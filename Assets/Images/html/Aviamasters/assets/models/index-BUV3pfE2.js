const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./polyfill-Bqv-txeS.js","./index-Bq1N6rF-.js","./polyfill-BD6wReFT.js"])))=>i.map(i=>d[i]);
import*as or from"https://cdn.bgaming-network.com/lib/pixi@7.4.2.min.js";import{Container as O,Assets as Ot,Texture as qe,WRAP_MODES as qt,MIPMAP_MODES as Ei,Sprite as lr,Point as Zi,utils as ls,Application as Ar,BaseTexture as hr,TextureGCSystem as ur,GC_MODES as cr,Text as qi,Color as dr}from"https://cdn.bgaming-network.com/lib/pixi@7.4.2.min.js";import"https://cdn.bgaming-network.com/lib/howler@2.2.3.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();const Ye={scenes:{preloader:{c:"PreloaderScene",p:{name:"preloader",backgroundColor:1052690},":":[{c:"Resizer",p:{relativeX:!0,xPos:.5,relativeY:!0,yPos:.5},":":[{c:"IsMobileTrigger",p:{landscapeScaleX:1,landscapeScaleY:1,landscapeAlpha:1,portraitScaleX:1.3,portraitScaleY:1.3,portraitAlpha:1},":":[{c:"ParticleContainer",p:{name:"fog-layer"}},{r:"common/preloader",p:{name:"progressg",y:180}},{c:"PreloaderPlane",p:{x:-1724,y:720,rotation:-.32,image:"models/plane0032.png"},":":[{c:"MovieClip",p:{name:"propeller",x:67,rotation:10408340855860843e-33,alpha:.5,"scale.x":.1,"scale.y":1.75,"pivot.y":8,image:"WHITE",timeline:{l:{},p:.02,d:.85,f:[{n:"scale.y",t:[{v:1.75,t:0,m:1},{v:-1.75,t:3,m:1},{v:1.75,t:6,m:1,j:0}]}]}}},{c:"DSprite",p:{name:"smoker",x:53,y:-4,rSpeed:1.1112},":":[{c:"Spawner",p:{name:"smoke-s",prefabToSpawn:"smoke-particle",speed:.1,speedRandom:0,applyRotation:!0,container:"all.fog-layer"}}]}]},{c:"DSprite",p:{y:-111,image:"models/logo.png"}}]}]}]}},prefabs:{"fader/default":{c:"Container",p:{name:"fader/default"},":":[{c:"MovieClip",p:{tint:0,timeline:{l:{"hide fader":120},p:.02,d:.85,f:[{n:"alpha",t:[{v:0,t:0,m:1},{v:1,t:11,m:1,a:"faderShoot"},{v:1,t:69,m:1,a:"this.stop"},{v:1,t:122,m:1},{v:0,t:131,m:1,a:"faderEnd"}]}]},alpha:0},":":[{c:"BackDrop",p:{}}]}]},"common/preloader":{c:"ProgressBar",p:{name:"common/preloader",dataPath:"loadingProgress",height:300,capMargin:0,refreshInterval:0,onFinish:"",onChanged:"",itemsCount:7},":":[{c:"Trigger",p:{name:"brand-loader",x:2,y:88,dataPath:"casinoOptions.ui.hide_logo",invert:!0,pow:1,damp:0},":":[{c:"DSprite",p:{name:"splitter",x:-85,y:-1,image:"preloader/line.png"}},{c:"DSprite",p:{name:"splitter",x:-32,y:-1,image:"preloader/line.png"}},{c:"DSprite",p:{name:"splitter",x:21,y:-1,image:"preloader/line.png"}},{c:"DSprite",p:{name:"splitter",x:74,y:-1,image:"preloader/line.png"}},{c:"DSprite",p:{name:"splitter",x:127,y:-1,image:"preloader/line.png"}},{c:"DSprite",p:{name:"splitter",x:180,y:-1,image:"preloader/line.png"}},{c:"DSprite",p:{name:"letter-B",x:-161,y:-1,image:"preloader/b.png"}},{c:"MovieClip",p:{name:"letter-G",x:-110,y:-1,isPlaying:!1,timeline:{l:{"progress-item-1":12,"progress-item-7":132},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/g.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:110},{v:0,t:115,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShiftSpeed:-.09765625,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"letter-A",x:-58,y:-1,isPlaying:!1,timeline:{l:{"progress-item-7":132,"progress-item-2":12},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/a.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:110},{v:0,t:115,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.3815,yShiftSpeed:-.09375,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"letter-M",x:-5,y:-1,isPlaying:!1,timeline:{l:{"progress-item-3":12,"progress-item-7":132},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/m.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:110},{v:0,t:115,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.626,yShiftSpeed:-.08984375,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"letter-I",x:46,y:-1,isPlaying:!1,timeline:{l:{"progress-item-4":12,"progress-item-7":132},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/i.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:115},{v:0,t:120,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.9483,yShiftSpeed:-.0859375,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"letter-N",x:100,y:-1,isPlaying:!1,timeline:{l:{"progress-item-7":112,"progress-item-5":12},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/n.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:97},{v:0,t:102,m:1,a:"this.stop"},{v:0,t:197},{v:0,t:202,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:164,m:1},{v:0,t:167,m:1},{v:0,t:171,m:1},{v:1,t:174,m:1},{v:1,t:178,m:1},{v:0,t:181,m:1},{v:0,t:185,m:1},{v:1,t:188,m:1},{v:1,t:192,m:1},{v:0,t:195,m:1},{v:0,t:199,m:1},{v:1,t:202,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.057800000000000004,yShiftSpeed:-.10546875,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"letter-G",x:154,y:-1,isPlaying:!1,timeline:{l:{"progress-item-7":12,"progress-item-5":118},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/g.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4,a:"this.#s.spawn"},{v:0,t:103},{v:0,t:108,m:1,a:"this.stop"}]},{n:"rotation",t:[{v:0,t:0},{v:0,t:108},{v:0,t:130,m:1},{v:.03,t:135,m:1},{v:-.03,t:140,m:1},{v:.03,t:145,m:1},{v:-.03,t:150,m:1},{v:.03,t:154,m:1},{v:-.03,t:159,m:1},{v:.03,t:164,m:1},{v:-.03,t:169,m:1},{v:.079,t:175,m:1},{v:-.11900000000000001,t:181,j:170,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1},{v:1,t:127,m:1},{v:1.8,t:228,m:1}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:64,m:1},{v:0,t:67,m:1},{v:0,t:71,m:1},{v:1,t:74,m:1},{v:1,t:78,m:1},{v:0,t:81,m:1},{v:0,t:85,m:1},{v:1,t:88,m:1},{v:1,t:92,m:1},{v:0,t:95,m:1},{v:0,t:99,m:1},{v:1,t:102,m:1}]},{n:"pivot.x",t:[{v:0,t:0,m:1},{v:0,t:108},{v:0,t:240,m:1},{v:2,t:243,m:1},{v:-2,t:248,m:1},{v:2,t:251,m:1},{v:-2,t:256,m:1},{v:2,t:261,m:1},{v:-2,t:266,m:1},{v:-6,t:272,m:1,r:-2},{v:6,t:275,m:1,j:270,r:-2}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"SpawnerRing",p:{name:"s",prefabToSpawn:"particle-white",speed:3,speedRandom:7,count:35,countRandom:0}},{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.9483,yShiftSpeed:-.10937500000000001,transparentTop:!0,transparentBottom:!0}}]}]},{c:"Trigger",p:{name:"common-loader",x:2,y:88,dataPath:"casinoOptions.ui.hide_logo",pow:1,damp:0},":":[{c:"DSprite",p:{name:"splitter",x:-108,y:-1,image:"preloader/line.png",tint:16737791}},{c:"DSprite",p:{name:"splitter",x:-55,y:-1,image:"preloader/line.png",tint:16737791}},{c:"DSprite",p:{name:"splitter",x:-2,y:-1,image:"preloader/line.png",tint:16737791}},{c:"DSprite",p:{name:"splitter",x:51,y:-1,image:"preloader/line.png",tint:16737791}},{c:"DSprite",p:{name:"splitter",x:104,y:-1,image:"preloader/line.png",tint:16737791}},{c:"MovieClip",p:{name:"star",x:-133,y:-1,isPlaying:!1,timeline:{l:{"progress-item-1":12,"progress-item-7":132},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/star.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:110},{v:0,t:115,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShiftSpeed:-.09375,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"star",x:-81,y:-1,isPlaying:!1,timeline:{l:{"progress-item-7":132,"progress-item-2":12},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/star.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:110},{v:0,t:115,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.3815,yShiftSpeed:-.09765625,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"star",x:-28,y:-1,isPlaying:!1,timeline:{l:{"progress-item-3":12,"progress-item-7":132},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/star.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:110},{v:0,t:115,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.626,yShiftSpeed:-.1015625,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"star",x:23,y:-1,isPlaying:!1,timeline:{l:{"progress-item-4":12,"progress-item-7":132},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/star.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:115},{v:0,t:120,m:1,a:"this.stop"},{v:0,t:217},{v:0,t:222,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:184,m:1},{v:0,t:187,m:1},{v:0,t:191,m:1},{v:1,t:194,m:1},{v:1,t:198,m:1},{v:0,t:201,m:1},{v:0,t:205,m:1},{v:1,t:208,m:1},{v:1,t:212,m:1},{v:0,t:215,m:1},{v:0,t:219,m:1},{v:1,t:222,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.9483,yShiftSpeed:-.10546875,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"star",x:77,y:-1,isPlaying:!1,timeline:{l:{"progress-item-7":112,"progress-item-5":12},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/star.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4},{v:0,t:97},{v:0,t:102,m:1,a:"this.stop"},{v:0,t:197},{v:0,t:202,m:1,a:"this.stop"}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:164,m:1},{v:0,t:167,m:1},{v:0,t:171,m:1},{v:1,t:174,m:1},{v:1,t:178,m:1},{v:0,t:181,m:1},{v:0,t:185,m:1},{v:1,t:188,m:1},{v:1,t:192,m:1},{v:0,t:195,m:1},{v:0,t:199,m:1},{v:1,t:202,m:1}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.057800000000000004,yShiftSpeed:-.10937500000000001,transparentTop:!0,transparentBottom:!0}}]},{c:"MovieClip",p:{name:"star",x:131,y:-1,isPlaying:!1,timeline:{l:{"progress-item-7":12,"progress-item-5":118},p:.16,d:.72,f:[{n:"image",t:[{v:"EMPTY",t:0,m:2},{v:"preloader/star.png",t:12,m:2,a:"setValueByPath,this.#spin.visible,false"}]},{n:"pivot.y",t:[{v:0,t:0},{v:0,t:12,s:-4,a:"this.#s.spawn"},{v:0,t:103},{v:0,t:108,m:1,a:"this.stop"}]},{n:"rotation",t:[{v:0,t:0},{v:0,t:108},{v:0,t:130,m:1},{v:.03,t:135,m:1},{v:-.03,t:140,m:1},{v:.03,t:145,m:1},{v:-.03,t:150,m:1},{v:.03,t:154,m:1},{v:-.03,t:159,m:1},{v:.03,t:164,m:1},{v:-.03,t:169,m:1},{v:.079,t:175,m:1},{v:-.11900000000000001,t:181,j:170,m:1}]},{n:"scale.y",t:[{v:1,t:0},{v:1,t:12,s:-.05},{v:1,t:110},{v:1,t:115,m:1},{v:1,t:127,m:1},{v:1.8,t:228,m:1}]},{n:"alpha",t:[{v:1,t:0,m:1},{v:1,t:64,m:1},{v:0,t:67,m:1},{v:0,t:71,m:1},{v:1,t:74,m:1},{v:1,t:78,m:1},{v:0,t:81,m:1},{v:0,t:85,m:1},{v:1,t:88,m:1},{v:1,t:92,m:1},{v:0,t:95,m:1},{v:0,t:99,m:1},{v:1,t:102,m:1}]},{n:"pivot.x",t:[{v:0,t:0,m:1},{v:0,t:108},{v:0,t:240,m:1},{v:2,t:243,m:1},{v:-2,t:248,m:1},{v:2,t:251,m:1},{v:-2,t:256,m:1},{v:2,t:261,m:1},{v:-2,t:266,m:1},{v:-6,t:272,m:1,r:-2},{v:6,t:275,m:1,j:270,r:-2}]},{n:"scale.x",t:[{v:1,t:0},{v:1,t:12,s:.05},{v:1,t:110},{v:1,t:115,m:1}]}]}},":":[{c:"SpawnerRing",p:{name:"s",prefabToSpawn:"particle-white",speed:3,speedRandom:7,count:35,countRandom:0}},{c:"Fill",p:{name:"spin",x:-32,y:-40,"scale.y":.32,image:"preloader/spin.png",tint:16777215,blendMode:0,verticesY:5,yRepeat:.32,yShift:.9483,yShiftSpeed:-.11328124999999999,transparentTop:!0,transparentBottom:!0}}]}]},{c:"MovieClip",p:{name:"start btn",y:-45,isPlaying:!1,timeline:{l:{"wait-for-click":2},p:.02,d:.85,f:[{n:"alpha",t:[{v:0,t:0,m:1},{v:0,t:26,m:1},{v:1,t:35,m:1},{v:1,t:95,m:1,j:79}]},{n:"scale.y",t:[{v:.01,t:0},{v:.01,t:26},{v:1,t:35},{v:1,t:148,s:-.04},{v:1,t:174,j:30,s:-.04}]},{n:"scale.x",t:[{v:.01,t:0},{v:.01,t:26},{v:1,t:35},{v:1,t:148,s:.04},{v:1,t:174,j:30,s:.04}]}]}},":":[{c:"Button",p:{name:"play-button",y:1,hoverImage:"EMPTY",pressImage:"EMPTY",onClick:["currentScene.onContinueClick"],sndClick:"click"},":":[{c:"BackDrop",p:{alpha:0}},{c:"DSprite",p:{x:-.05660000000000309,y:-1,image:"circle126.png",tint:16763945},":":[{c:"MovieClip",p:{"scale.x":.6,"scale.y":.6,image:"common/ui/arrow-icon.png",tint:1052690,timeline:{l:{},p:.02,d:.85,f:[{n:"x",t:[{v:0,t:0},{v:7,t:18},{v:0,t:39},{v:7,t:61},{v:0,t:251,j:0}]}]}}}]}]}]},{c:"Resizer",p:{name:"click-to-continue",relativeX:!0,xPos:.5,relativeY:!0,yPos:1,fixed:!0},":":[{c:"MovieClip",p:{y:-65,isPlaying:!1,timeline:{l:{"wait-for-click":2},p:.02,d:.85,f:[{n:"alpha",t:[{v:0,t:0,m:1},{v:0,t:30,m:1},{v:1,t:35,m:1},{v:1,t:61,m:1},{v:0,t:66,m:1},{v:0,t:89,m:1},{v:1,t:95,m:1,j:34}]}]}},":":[{c:"Text",p:{alpha:.7,text:"",translatableText:"slot.click_to_start","style.fontSize":42},":":[{c:"StaticTrigger",p:{invert:!0}}]},{c:"Text",p:{alpha:.7,text:"",translatableText:"slot.tap_to_start","style.fontSize":42},":":[{c:"StaticTrigger",p:{}}]}]}]},{c:"MovieClip",p:{isPlaying:!1,timeline:{l:{"progress-item-7":3},p:.02,d:.85,f:[{n:"visible",t:[{v:!1,t:0,m:2},{v:!1,t:8,m:2,a:"currentScene.onLoadingComplete"}]}]}}}]},"particle-white":{c:"ParticleShort",p:{name:"particle-white",x:114,y:141,image:"preloader/star.png"}},"smoke-particle":{c:"FlightParticle",p:{name:"smoke-particle","scale.x":3,"scale.y":3,rSpeed:.01},":":[{c:"MovieClip",p:{"scale.x":.2,"scale.y":.2,image:"fog.png",timeline:{l:{},p:.02,d:.68,f:[{n:"scale.x",t:[{v:.2,t:0,s:.101},{v:.8,t:15,m:1},{v:.1,t:65,j:47}]},{n:"scale.y",t:[{v:.2,t:0,s:.101},{v:.8,t:15,m:1},{v:.1,t:65,j:47}]},{n:"alpha",t:[{v:.5,t:0,m:1},{v:1,t:16,m:1},{v:.3,t:96,m:1}]},{n:"x",t:[{v:0,t:0},{v:0,t:11},{v:15,t:64,j:44}]}]},alpha:.5}}]}},fonts:["fonts/obelix_-lHGtyEB.woff","fonts/obelix_sLbZgIId.woff2"],images:["preloader/line_Ku5u1lrt.png","preloader/b_ex_v1x5P.png","preloader/g_I2wZyh4C.png","preloader/spin_cnWwiKnH.png","preloader/a_Hn6Q3m2z.png","preloader/m_Pg9w5_Dd.png","preloader/i_uFS1IXXK.png","preloader/n_YFktteYl.png","preloader/star_VWAhu3gE.png","circle126_vbK5z5so.png","common/ui/arrow-icon_jKQQjwHu.png","models/plane0032_JnEd06Fz.png","fog_17Q7oqZs.png","models/logo_Rivlxfna.png"],sounds:[["click_q92SC-Pt",.394739]],projectDesc:{mainScene:"main",defaultFont:"Geologica, Arial",jpgQuality:80,screenOrientation:"auto",width:1920,height:1080,portraitWidth:1080,portraitHeight:1920,renderResolution:1,renderResolutionMobile:1,framesSkipLimit:4,dynamicStageSize:!0,preventUpscale:!1,fontHolderText:"ЯSфzțȚșȘ",mipmap:!1,version:"0.0.1",soundFormats:["ogg","aac"],soundDefaultBitrate:48,loadOnDemandSounds:{},soundBitRates:{click2:128},loadOnDemandTextures:{"bg.jpg":8,"sea-overlay.png":8,"sea-noise.jpg":16,"clouds.png":8,"common/ui/spin-icon-blur.png":8,"preloader/spin.png":8},defaultLanguage:"en",defaultMusVol:1,defaultSoundsVol:1,embedLocales:!1,autoFullScreenDesktop:!1,autoFullScreenMobile:!0,webfontloader:{google:{families:["Fira Sans:300,400,700:cyrillic","Geologica:200,400,800:cyrillic"]},timeout:6e3,custom:{families:["obelix"]}},customOption1Default:!0,devDomainURL:"bgaming-system.com",l10nURL:"https://translations.bgaming-network.com/",rulesURL:"https://rules.bgaming-network.com/",UIBackGround:"#00000054",icon:"assets/models/logo.png",id:"aviamasters.bgaming.com",title:"Aviamasters",APIGameId:"Aviamasters",libs:["thing-games-utils/common","thing-games-utils/common-ui","thing-games-utils/common-ui-casual","../shared-lib"],dir:"games/flight/Aviamasters/"}},fr="modulepreload",pr=function(t,e){return new URL(t,e).href},As={},Ft=function(e,i,s){let r=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),A=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(i.map(h=>{if(h=pr(h,s),h in As)return;As[h]=!0;const u=h.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!s)for(let v=o.length-1;v>=0;v--){const y=o[v];if(y.href===h&&(!u||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":fr,u||(f.as="script"),f.crossOrigin="",f.href=h,A&&f.setAttribute("nonce",A),document.head.appendChild(f),u)return new Promise((v,y)=>{f.addEventListener("load",v),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};var mr=Object.defineProperty,gr=(t,e,i)=>e in t?mr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,st=(t,e,i)=>gr(t,typeof e!="symbol"?e+"":e,i);class vr extends O{constructor(){super(...arguments),st(this,"backgroundColor",0),st(this,"isStatic",!1),st(this,"faderType",null),st(this,"all"),st(this,"_onShowCalled",!1)}onShow(){}onMouseDown(e,i){}onMouseUp(e,i){}onMouseMove(e,i){}onHide(){}init(){this._refreshAllObjectRefs(),super.init(),n._setCurrentScene(this)}_refreshAllObjectRefs(){this.all={},Ws=this.all,this.forAllChildren(yr),n.currentScene===this&&(n.all=this.all)}}let Ws;const yr=t=>{t.name&&(Ws[t.name]=t)};var br=Object.defineProperty,_r=(t,e,i)=>e in t?br(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,gt=(t,e,i)=>_r(t,typeof e!="symbol"?e+"":e,i);class Us extends Howl{constructor(e){if(super(e),gt(this,"loadedWithError",!1),gt(this,"lastPlayStartFrame",0),gt(this,"soundIdSaved"),gt(this,"preciseDuration",0),this.state()!=="loaded"){n.loadingAdd(this),this.once("load",()=>{n.loadingRemove(this),this.preciseDuration&&(this._duration=this.preciseDuration,this._sprite.__default[1]=this.preciseDuration*1e3)});let i=0;this.on("loaderror",()=>{i<3&&!n._loadingErrorIsDisplayed?(i++,window.setTimeout(()=>{this.load()},i*1e3)):n.showLoadingError(this._src)})}}}const Ne=(t,e)=>{let i=Ji(t),s=i.p,r,a=s[0];a==="this"?r=e:r=n[a];let o=1,l;for(;o<s.length;){let A=s[o];l=r,typeof A=="string"?r=r[A]:r=r.getChildByName(A.c),o++}return i.hasOwnProperty("v")?r===Je?Je(i.v[0],i.v[1],e):r.apply(l,i.v):r.call(l)},Jt={},Ji=t=>{if(Jt.hasOwnProperty(t))return Jt[t];let e=t.split(","),i={p:e.shift().split(".").map(wr)};return e.length&&(i.v=e.map(Sr)),Jt[t]=i,i},Sr=t=>{let e=parseFloat(t);return!isNaN(e)||(e=parseInt(t),!isNaN(e))?e:t==="true"?!0:t==="false"?!1:t},wr=t=>t.charCodeAt(0)===35?{c:t.substring(1)}:t,He=(t,e)=>{let i=Ji(t),s=i.p,r,a=s[0];a==="this"?r=e:r=n[a];let o=1,l;for(;o<s.length;){let A=s[o];if(l=r,typeof A=="string"?r=r[A]:r=r.getChildByName(A.c),!r)return r;o++}return typeof r=="function"?r.apply(l,i.v):r},Je=(t,e,i)=>{let s=Ji(t).p,r,a=s[0];a==="this"?r=i:r=n[a];let o=1;for(;o<s.length-1;){let A=s[o];if(typeof A=="string"?r=r[A]:r=r.getChildByName(A.c),!r)return;o++}let l=s[o];r[l]!==e&&(r[l]=e)};let Mt={},De={},oe=window.navigator&&navigator.language?navigator.language.split("-")[0]:"en",Qs=!1;const g=(t,e)=>{let i;if(Mt.hasOwnProperty(t)?(i=Mt[t],g.messageProcessor&&(i=g.messageProcessor(i,e))):i=t,typeof e=="object")for(let s in e)i=i.replace(s,e[s]);return i};g.has=t=>Mt.hasOwnProperty(t);g.getData=()=>De;g.setCurrentLanguage=t=>{var e;if(!Qs){oe=t;return}if(oe!==t){if(t&&De.hasOwnProperty(t))oe=t,n.settings.setItem("locale",t);else if(oe=(e=n.settings)==null?void 0:e.getItem("locale"),!oe&&(oe=n.projectDesc.defaultLanguage,window.navigator&&navigator.languages)){for(let i of navigator.languages)if(i=i.split("-")[0],De.hasOwnProperty(i)){oe=i;break}}Mt=De[oe],g.refreshAllTextEverywhere()}};g.setLanguagesAssets=t=>{Qs=!0;for(let e in t)De[e]=Object.assign(De[e]||{},t[e]);g.setCurrentLanguage()};g.refreshAllTextEverywhere=()=>{n.forAllChildrenEverywhere(Er)};function Er(t){t.onLanguageChanged&&t.onLanguageChanged()}g.getCurrentLanguageId=()=>oe;g.getLanguagesList=()=>Object.keys(De);g._deserializeLanguage=t=>{let e={};return Bi(t,e),e};const Bi=(t,e,i)=>{for(let s in t)if(t.hasOwnProperty(s)){let r=t[s];typeof r=="string"?i?e[i+s]=t[s]:e[s]=t[s]:i?Bi(r,e,i+s+"."):Bi(r,e,s+".")}};let Ve=new Map;class ye{static clearAll(){Ve.clear()}static create(e){if(!Ve.has(e))return new e;let i=Ve.get(e);return i.length===0?new e:i.pop()}static dispose(e){let i=e.constructor;Ve.has(i)||Ve.set(i,[]),Ve.get(i).push(e)}}class Br extends O{constructor(){super(),this.visible=!1}onRemove(){super.onRemove();let e=ft.indexOf(this);e>=0&&ft.splice(e,1)}update(){}}var Cr=Object.defineProperty,Ir=(t,e,i)=>e in t?Cr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Se=(t,e,i)=>Ir(t,typeof e!="symbol"?e+"":e,i),xr=(t,e,i)=>new Promise((s,r)=>{var a=A=>{try{l(i.next(A))}catch(h){r(h)}},o=A=>{try{l(i.throw(A))}catch(h){r(h)}},l=A=>A.done?s(A.value):Promise.resolve(A.value).then(a,o);l((i=i.apply(t,e)).next())});let hs,le={},ue={},Ge={},we={},ct={};const ft=[],Rt=new Map,Pr=()=>{const t=Ot.loader.parsers.find(r=>r.name==="spritesheetLoader"),e=t.parse;t.parse=(r,a,...o)=>{const l=a.src.lastIndexOf("/")+1;let A=a.src.substring(0,l)+r.meta.image;return r.meta.image=Rt.get(A).split("/").pop(),e(r,a,...o)};const i=Ot.loader.parsers.find(r=>r.name==="loadBitmapFont"),s=i.parse;i.parse=(r,a,...o)=>{const l=/(file=")([^"]+)(")/gm;let A,h=r;for(;(A=l.exec(r))!==null;){const u=a.src.split("/");u.pop();const d=A[2],c=u.join("/")+"/"+d;h=h.replace(d,Rt.get(c).split("/").pop())}return s(h,a,...o)}};Pr();const ce=class P{static loadScene(e){if(Ge.hasOwnProperty(e))return Ge[e];le.hasOwnProperty(e);const i=P._deserializeObject(le[e]);return Nt(i),i.isStatic&&(Ge[e]=i),i}static _setClasses(e){n._setClasses(e),hs=e,us()}static hasPrefab(e){return ue.hasOwnProperty(e)}static hasScene(e){return le.hasOwnProperty(e)}static hasTexture(e){return we.hasOwnProperty(e)}static _unloadTexture(e){let i=we[e];i&&(qe.removeFromCache(i),i.destroy(!0))}static addResource(e,i,s=0){return xr(this,null,function*(){n.loadingAdd(i),yield Promise.all(P.__parsersLoadingPromises),Ot.load(i).then(r=>{if(r.textures)for(const a in r.textures){const o=r.textures[a];we[a]=o}P.resources[e]=r,n.loadingRemove(i)}).catch(r=>{s<3&&!n._loadingErrorIsDisplayed?(s++,window.setTimeout(()=>{P.addResource(e,i+(s===1?"?a":"a"),s),n.loadingRemove(i)},s*1e3)):n.showLoadingError(i)})})}static addTexture(e,i,s=0){typeof i=="string"?(n.loadingAdd(i),qe.fromURL(i).then(r=>{we[e]=r,P._afterTextureLoaded(e),n.loadingRemove(i)}).catch(()=>{s<3&&!n._loadingErrorIsDisplayed?(s++,window.setTimeout(()=>{P.addTexture(e,i+(s===1?"?a":"a"),s),n.loadingRemove(i)},s*1e3)):n.showLoadingError(i)})):(we[e]=i,P._afterTextureLoaded(e))}static _getTextureSettingsBits(e,i){let s=n.projectDesc.loadOnDemandTextures;return s.hasOwnProperty(e)?s[e]&i:0}static _afterTextureLoaded(e){let i=we[e].baseTexture;switch(P._getTextureSettingsBits(e,24)){case 0:i.wrapMode=qt.CLAMP;break;case 8:i.wrapMode=qt.REPEAT;break;default:i.wrapMode=qt.MIRRORED_REPEAT;break}P._getTextureSettingsBits(e,4)&&(i.mipmap=Ei.ON),n.isCanvasMode||i.update()}static getTexture(e){return we[e]}static _getStaticScenes(){return Ge}static hasSound(e){return ct.hasOwnProperty(e)}static getSound(e,i=!1){return ct[e]}static addSound(e,i,s){const r=new Us({src:n.projectDesc.soundFormats.map(a=>i+"."+a)});r.preciseDuration=s,ct[e]=r}static preloadSound(e){if(e){let i=ct[e];if(i.state()==="unloaded")return i.load(),!0}}static _deserializeObject(e){const i=ye.create(e.c);if(Object.assign(i,e.p),e.hasOwnProperty(":")){let s=e[":"];for(let r of s)i.addChild(P._deserializeObject(r))}return i}static getHashedFileName(e){return P.ASSETS_ROOT+Rt.get(P.ASSETS_ROOT+e)}static addAssets(e,i=P.ASSETS_ROOT){for(const s in e.prefabs)ue[s]||(ue[s]=e.prefabs[s]);for(const s in e.scenes)le[s]||(le[s]=e.scenes[s]);n.classes&&us(),e.text&&g.setLanguagesAssets(e.text);for(const s of e.images)P.addTexture(P.unHashFileName(s,i),i+s);for(const s of e.sounds)P.addSound(P.unHashFileName(s[0],i),i+s[0],s[1]);if(e.resources)for(const s of e.resources)P.addResource(P.unHashFileName(s,i),i+s+".json");if(e.xmls)for(const s of e.xmls)Ot.load(i+s+".xml");if(e.fonts)for(const s of e.fonts)P.fonts[P.unHashFileName(s,i)]=i+s}static unHashFileName(e,i=P.ASSETS_ROOT){const s=e.lastIndexOf(".");if(s>0){const r=e.substring(0,s-9)+e.substring(s);return Rt.set(i+r,e),r}return e.slice(0,-9)}static destroyObjectAndChildren(e,i){if(e.onRemove(),e._thing_initialized=!1,i){let s=ye.create(Br),r=e.parent.children;r[r.indexOf(e)]=s,s.parent=e.parent,ft.push(s),e.parent=null}else e.detachFromParent();for(;e.children.length>0;)P.destroyObjectAndChildren(e.getChildAt(e.children.length-1));ye.dispose(e),e.interactiveChildren=!0}static _cleanupRemoveHolders(){for(;ft.length>0;)P.destroyObjectAndChildren(ft[0])}static _loadClassInstanceById(e){const i=hs[e];let s=ye.create(i);return Object.assign(s,i.__defaultValues),Nt(s),s}static _clearStaticScene(e){let i=Ge[e];if(i){let s=n._getScenesStack();!i.parent&&s.indexOf(i)<0&&s.indexOf(i.name)<0&&P.destroyObjectAndChildren(i),delete Ge[e]}}};Se(ce,"ASSETS_ROOT","./assets/");Se(ce,"sounds");Se(ce,"resources",{});Se(ce,"fonts",{});Se(ce,"REMOVED_TEXTURE");Se(ce,"scenes");Se(ce,"prefabs");Se(ce,"__parsersLoadingPromises",[]);let m=ce,Nt=t=>{if(t._thing_initialized)return;t._thing_initialized=!0,t.init();let e=t.children,i=e.length;for(let s=0;s<i;s++)Nt(e[s])};m.scenes=le;m.prefabs=ue;const pt=t=>{if(t.c){if(typeof t.c=="string"&&(t.c=n.classes[t.c],t.p=Object.assign({},t.c.__defaultValues,t.p),t[":"]))for(const e of t[":"])pt(e)}else{const e=ue[t.r];if(pt(e),delete t.r,t.c=e.c,t.p=Object.assign({},e.p,t.p),e[":"]&&(t[":"]?t[":"]=e[":"].concat(t[":"]):t[":"]=e[":"]),t[":"])for(const i of t[":"])pt(i)}if(t.p.timeline)for(const e of t.p.timeline.f)t.p[e.n]=e.t[0].v},us=()=>{Object.values(ue).forEach(Ci),Object.values(le).forEach(Ci);for(const t in ue)pt(ue[t]);for(const t in le)pt(le[t])};m.loadPrefab=(t,e=n.__EDITOR_mode)=>{const i=m._deserializeObject(ue[t]);return Nt(i),i};const Tr=t=>!t[":"]||!t[":"].some(e=>e.c==="StaticTrigger"&&!!e.p.invert!=!He(e.p.dataPath||n.classes.StaticTrigger.__defaultValues.dataPath,n)),Ci=t=>{if(t[":"]){let e=t[":"].filter(Tr);t[":"]=e,e.forEach(Ci)}};m.sounds=ct;var Or=Object.defineProperty,Fr=(t,e,i)=>e in t?Or(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,se=(t,e,i)=>Fr(t,typeof e!="symbol"?e+"":e,i);const fe={};let Mr=0;class Le extends O{constructor(){super(),se(this,"_promiseWaitForResult",!1),se(this,"_promiseId",-1),se(this,"_rejectHandlers",[]),se(this,"_resolveHandlers",[]),se(this,"_finallyHandlers",[]),se(this,"visible",!1),se(this,"_promiseResultWaiting",fe),se(this,"_promiseErrorWaiting",fe),se(this,"loadingAdded",!1)}static promise(e,i){i||(i=n.currentContainer||n.currentFader);let s=ye.create(Le);i.addChild(s),i===n.currentFader||i===n.currentScene&&i.name===Mi?(s.loadingAdded=!0,n.loadingAdd(s)):s.loadingAdded=!1,s._promiseWaitForResult=!0;let r=Mr++;return s._promiseId=r,e(a=>{s._promiseId===r&&s.resolve(a)},a=>{s._promiseId===r&&(s._promiseErrorWaiting=a)},s),s}static resolve(e,i){return Le.promise(s=>{s(e)},i)}static all(e,i=n.currentContainer){let s=[],r=e.length;return Le.promise((a,o,l)=>{e.forEach((A,h)=>{l.addChild(A),A.then(u=>{s[h]=u}),A.catch(u=>{s=[],s[h]=u,o(s),s=null}),A.finally(()=>{r--,r===0&&s&&a(s)})})},i)}onRemove(){super.onRemove(),this._promiseWaitForResult&&(this._promiseWaitForResult=!1,this._handleFinally()),this._promiseId=-1,this._rejectHandlers.length=0,this._resolveHandlers.length=0,this._finallyHandlers.length=0,this._promiseResultWaiting=fe,this._promiseErrorWaiting=fe}resolve(e){this._promiseResultWaiting=e}then(e){return this._resolveHandlers.push(e),this}catch(e){return this._rejectHandlers.push(e),this}finally(e){return this._finallyHandlers.push(e),this}_handleFinally(){for(;this._finallyHandlers.length>0;)try{this._finallyHandlers.shift()()}catch(e){window.setTimeout(()=>{throw e},0),this._turnPromiseRejected(e);return}this._promiseWaitForResult=!1,this.loadingAdded&&(n.loadingRemove(this),this.loadingAdded=!1)}_turnPromiseRejected(e){this._promiseErrorWaiting===fe&&(this._resolveHandlers.length=0,this._promiseResultWaiting=fe,this._promiseErrorWaiting=e)}update(){if(this._promiseErrorWaiting!==fe){let e=this._promiseErrorWaiting;for(this._rejectHandlers.length===0&&window.setTimeout(()=>{throw console.error("SceneLinkedPromise unhandled rejection."),e},0);this._rejectHandlers.length>0;)try{let i=this._rejectHandlers.shift()(e);typeof i!="undefined"&&(e=i)}catch(i){this._rejectHandlers.length===0&&window.setTimeout(()=>{throw i},0)}this._handleFinally()}else if(this._promiseResultWaiting!==fe){let e=this._promiseResultWaiting;for(;this._resolveHandlers.length>0;)try{let i=this._resolveHandlers.shift()(e);typeof i!="undefined"&&(e=i)}catch(i){this._rejectHandlers.length===0&&window.setTimeout(()=>{throw i},0),this._turnPromiseRejected(i);return}this._handleFinally()}super.update(),this._promiseWaitForResult||this.remove()}}var Rr=Object.defineProperty,Nr=(t,e,i)=>e in t?Rr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,zt=(t,e,i)=>Nr(t,typeof e!="symbol"?e+"":e,i);class js extends lr{constructor(){super(),zt(this,"xSpeed",0),zt(this,"ySpeed",0),zt(this,"rSpeed",0),this.anchor.set(.5)}angleBySpeed(){this.rotation=Math.atan2(this.ySpeed,this.xSpeed)}update(){this.x+=this.xSpeed,this.y+=this.ySpeed,this.rotation+=this.rSpeed,super.update()}}var Dr=Object.defineProperty,Lr=(t,e,i)=>e in t?Dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,kr=(t,e,i)=>Lr(t,e+"",i);const Ii=.10000001;function cs(t,e){return t>Ii?t:e}const Xs=class C{static get soundsVol(){return Ee}static set soundsVol(e){e=Math.max(.1,Math.min(1,e)),Ee=e,n.settings.setItem("soundsVol",Ee)}static setSoundsVol(e){C.soundsVol=e}static setMusicVol(e){C.musicVol=e}static get musicVol(){return pe}static set musicVol(e){e=Math.max(.1,Math.min(1,e)),pe!==e&&n.classes.BgMusic&&n.classes.BgMusic._clearCustomFades(.2),pe=e,n.settings.setItem("musicVol",pe),n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic()}static get fullVol(){return Math.max(Ee,pe)}static set fullVol(e){let i=n.settings.getItem("musicEnabled",!0),s=n.settings.getItem("soundEnabled",!0);!i&&!s&&(i=s=!0),i?C.musicVol=e:n.settings.setItem("musicVolEnabling",e),s?C.soundsVol=e:n.settings.setItem("soundsVolEnabling",e)}static get musicEnabled(){return pe>=Ii}static set musicEnabled(e){C.musicEnabled!==e&&(n.classes.BgMusic&&n.classes.BgMusic._clearCustomFades(.2),e?C.musicVol=cs(n.settings.getItem("musicVolEnabling"),n.projectDesc.defaultMusVol):(n.settings.setItem("musicVolEnabling",pe),C.musicVol=0),C.rememberEnableLevels())}static rememberEnableLevels(){Pi||(Pi=window.setTimeout(Vr,10))}static toggleMusic(){C.musicEnabled=!C.musicEnabled}static get soundEnabled(){return Ee>Ii}static set soundEnabled(e){C.soundEnabled!==e&&(e?C.soundsVol=cs(n.settings.getItem("soundsVolEnabling"),n.projectDesc.defaultSoundsVol):(n.settings.setItem("soundsVolEnabling",Ee),C.soundsVol=0),C.rememberEnableLevels())}static toggleSounds(){C.soundEnabled=!C.soundEnabled}static toggleFullSound(){C.soundEnabled||C.musicEnabled?(C.soundEnabled=!1,C.musicEnabled=!1):(C.musicEnabled=n.settings.getItem("musicEnabled",!0),C.soundEnabled=n.settings.getItem("soundEnabled",!0))}static get isFullSoundEnabled(){return C.soundEnabled||C.musicEnabled}static init(){Ee=n.settings.getItem("soundsVol",n.projectDesc.defaultSoundsVol),pe=n.settings.getItem("musicVol",n.projectDesc.defaultMusVol)}static play(e,i=1,s=1,r=0,a=!1){if(C.isSoundsLockedByBrowser||!n.isVisible)return;let o=m.getSound(e);if(!o){let l=new Error('Attempt to play unknown sound "'+e+'"');window.setTimeout(()=>{throw l});return}if(o.lastPlayStartFrame<n.time&&(!a&&o.playing()&&o.stop(),i=i*C.soundsVol*C.soundsVol,i>.0100000001))try{a?(o.soundIdSaved=o.play(),o.volume(i,o.soundIdSaved),o.rate(s,o.soundIdSaved),r!==0&&o.seek(r,o.soundIdSaved)):(o.volume(i),o.rate(s),r!==0&&o.seek(r),o.soundIdSaved=o.play(o.soundIdSaved)),o.lastPlayStartFrame=n.time+2}catch(l){}}static playPitched(e,i=200,s=1.0594630943592953,r=3){let a=ps[e],o=n.time-a;if(o<2)return;let l;o<i?l=Math.min(fs[e]*s,r):l=1,fs[e]=l,ps[e]=n.time,C.play(e,1,l,0,!0)}static checkSoundLockByBrowser(){C.isSoundsLockedByBrowser=!0,n.loadingAdd(Ys),Hr();const e=()=>vt(!0),i=()=>vt(!1);ke.once("playerror",e),ke.once("end",i),xi=window.setTimeout(e,500);try{ke.play()}catch(s){vt(!0)}}static _unlockSound(){C.isSoundsLockedByBrowser&&vt(!1)}};kr(Xs,"isSoundsLockedByBrowser",!1);let q=Xs;const Hr=()=>{ke=new Us({src:"data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV"})};let ke,xi=0,ds=!1;const Ys="checkSoundLock",vt=(t=!1)=>{ds||(n.loadingRemove(Ys),ds=!0,xi&&clearTimeout(xi)),t||(ke.off("playerror"),ke.off("play"),ke.unload(),q.isSoundsLockedByBrowser=!1,n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic())};let fs={},ps={},Pi=0;function Vr(){Pi=0,(q.soundEnabled||q.musicEnabled)&&(n.settings.setItem("soundEnabled",q.soundEnabled),n.settings.setItem("musicEnabled",q.musicEnabled))}let Ee,pe;var Gr=Object.defineProperty,Wr=(t,e,i)=>e in t?Gr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,R=(t,e,i)=>Wr(t,typeof e!="symbol"?e+"":e,i);let yt=0;const Ur=30,Wt=class D extends js{constructor(){super(...arguments),R(this,"onClickCallback"),R(this,"hoverImage",null),R(this,"pressImage",null),R(this,"disabledImage",null),R(this,"disabledAlpha",0),R(this,"enabled",!0),R(this,"onClick",[]),R(this,"hotkey",0),R(this,"sndClick",null),R(this,"sndOver",null),R(this,"initialScale"),R(this,"initialImage"),R(this,"curDelay",0),R(this,"repeatDelay",0),R(this,"repeatInterval",0),R(this,"pointerStartPos")}get scrollable(){if(n.classes.ScrollLayer){const e=this.findParentByType(n.classes.ScrollLayer);return e&&(e.fullArea.w>e.visibleArea.w||e.fullArea.h>e.visibleArea.h)}return!1}init(){super.init(),this.on("pointerdown",this.onDown),this.on("pointerup",this.onUp),this.on("pointerover",this.onOver),this.on("pointerout",this.onOut),bt.unshift(this),this.initialScale=this.scale.x,this.initialImage=this.image,this.enabled?this.enable():this.disable(),this.pointerStartPos=void 0}onRemove(){super.onRemove(),this.onOut(),this.removeListener("pointerdown",this.onDown),this.removeListener("pointerup",this.onUp),this.removeListener("pointerover",this.onOver),this.removeListener("pointerout",this.onOut);let e=bt.indexOf(this);e>=0&&bt.splice(e,1),Ae===this&&(Ae=void 0),this.initialImage=null,this.enabled=!1,this.hasOwnProperty("onClickCallback")&&delete this.onClickCallback}disable(){this.initialImage&&(this.onUp(),this.onOut(),this.disabledImage?this.image=this.disabledImage:this.alpha=this.disabledAlpha),this.enabled=!1,this.cursor="default"}enable(){this.initialImage&&(this.disabledImage?this.image=this.initialImage:this.alpha=1),this.enabled=!0,this.cursor="pointer"}get isOvered(){return this===D.overedButton}get isDowned(){return this===D.downedButton}click(){this.isCanBePressed&&this._executeOnClick("invoke")}get isCanBePressed(){return this.enabled?super.isCanBePressed:!1}_executeOnClick(e){n.emit("button-click",this,e),D.clickedButton=this,this.onClickCallback&&this.onClickCallback();for(const i of this.onClick)Ne(i,this);e==="hotkey"&&n.classes.ClickOutsideTrigger&&n.classes.ClickOutsideTrigger.shootAll(this),D.clickedButton=null,this.sndClick&&q.play(this.sndClick),yt=n.time}_isNotPausable(){if(n.classes.UnPausableContainer)return this.findParentByType(n.classes.UnPausableContainer)}onDown(e,i="pointerdown"){if(q._unlockSound(),!((n.time===yt||n.__paused)&&!this._isNotPausable())){if(e){if(e.buttons!==1)return;Ut(e)}this.isCanBePressed&&(Math.abs(yt-n.time)>1||this._isNotPausable())&&D.downedButton!==this&&(D.downedButton&&D.downedButton.onUp(),this.pressImage?this.image=this.pressImage:this.scale.x=this.scale.y=this.initialScale*(this.isOvered?1:.9),D.downedButton=this,this.curDelay=this.repeatDelay,this.scrollable?this.pointerStartPos={x:n.mouse.x,y:n.mouse.y}:this._executeOnClick(i))}}update(){this.isDowned&&(!n.mouse.click&&Ae!==this||!n.isFocused?this.onUp():this.curDelay>0&&(this.curDelay--,this.curDelay===0&&(this.isCanBePressed&&Math.abs(yt-n.time)>1&&this._executeOnClick("autorepeat"),this.curDelay=this.repeatInterval))),super.update()}onUp(e,i="pointerup"){D.downedButton===this&&(this.pressImage?this.initialImage&&(this.image=this.initialImage):this.scale.x=this.scale.y=this.initialScale*(this.isOvered&&!this.hoverImage?1.05:1),e&&this.scrollable&&Math.hypot(n.mouse.x-this.pointerStartPos.x,n.mouse.y-this.pointerStartPos.y)<=Ur&&this._executeOnClick(i),D.downedButton=null)}onOver(){n.isMobile.any||this.enabled&&D.overedButton!==this&&(D.overedButton&&D.overedButton.onOut(),D.overedButton=this,this.hoverImage?this.image=this.hoverImage:this.scale.x=this.scale.y=this.initialScale*1.05,this.sndOver&&q.play(this.sndOver),this.gotoLabelRecursive("btn-over"))}_onDisableByTrigger(){this.onOut()}onOut(){n.isMobile.any||D.overedButton===this&&(D.overedButton=null,this.hoverImage?this.initialImage&&(this.image=this.initialImage):this.scale.x=this.scale.y=this.initialScale,this.onUp(),this.gotoLabelRecursive("btn-out"))}static _tryToClickByKeycode(e){for(let i of bt)if(i.hotkey===e&&i.isCanBePressed)return i.onDown(null,"hotkey"),i}};R(Wt,"clickedButton",null);R(Wt,"overedButton",null);R(Wt,"downedButton",null);let ve=Wt,Ae,bt=[];window.addEventListener("keydown",t=>{t.repeat||(Ae=ve._tryToClickByKeycode(t.keyCode),Ae&&(t.preventDefault(),t.stopPropagation()))});window.addEventListener("keyup",t=>{Ae&&Ae.hotkey===t.keyCode&&(Ae.onUp(t,"hotkey"),Ae=void 0)});const $t=new Zi,Kt=new Zi,Qr=t=>{n.mouse.gameClick=t.target===n.pixiApp.view,n.mouse.click=t.buttons||1,Ut(t),n.currentContainer&&n.currentContainer.onMouseDown&&n.currentContainer.interactiveChildren&&(q._unlockSound(),n.currentContainer.onMouseDown(n.mouse,t))},jr=t=>{n.mouse.click=0,n.mouse.gameClick=!1,Ut(t),n.currentContainer&&n.currentContainer.onMouseUp&&n.currentContainer.interactiveChildren&&n.currentContainer.onMouseUp(n.mouse,t)},Xr=t=>{t.buttons===0&&(n.mouse.click=0,n.mouse.gameClick=!1),Ut(t),n.currentContainer&&n.currentContainer.onMouseMove&&n.currentContainer.interactiveChildren&&n.currentContainer.onMouseMove(n.mouse,t)},Ut=t=>{const e=n.pixiApp.view.getBoundingClientRect(),i=(n._isCanvasRotated?n.H:n.W)/e.width;$t.x=(t.clientX-e.x)*i,$t.y=(t.clientY-e.y)*i,n.stage.toLocal($t,n.pixiApp.stage,Kt,!0);let s=Math.round(Kt.x),r=Math.round(Kt.y);s>n.W?s=n.W:s<0&&(s=0),r>n.H?r=n.H:r<0&&(r=0),n.mouse.x=s,n.mouse.y=r};window.cordova&&(document.addEventListener("backbutton",function(){ve._tryToClickByKeycode(27)},!1),n.exitApp=(t=!1)=>{t?navigator.app.exitApp():n.showQuestion(g("SUREEXIT_TITLE"),g("SUREEXIT_TEXT"),void 0,()=>{n.exitApp(!0)})});let Ti=[];function Dt(t){Ti.push(t)}function Yr(){const t=i=>{for(;Ti.length>0;)Ti.shift()(i);(n.isMobile.any?n.projectDesc.autoFullScreenMobile:n.projectDesc.autoFullScreenDesktop)&&n.fullscreen.isAvailable&&!n.fullscreen.isFullscreen&&n.fullscreen._openInner()},e=n.pixiApp.view;e.addEventListener("click",t),e.addEventListener("touchend",t),window.addEventListener("pointerdown",Qr),window.addEventListener("pointermove",Xr),window.addEventListener("pointerup",jr)}var Zr=Object.defineProperty,qr=(t,e,i)=>e in t?Zr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Jr=(t,e,i)=>qr(t,e+"",i);const Oi=document.documentElement,Zs=class Ze{static get isFullscreen(){return!!document.fullscreenElement}static open(){Dt(Ze._openInner)}static _openInner(){try{Oi.requestFullscreen&&Oi.requestFullscreen().catch(()=>{}).finally(()=>{try{n.projectDesc.screenOrientation!=="auto"&&screen.orientation.lock(n.projectDesc.screenOrientation)}catch(e){}}),n.projectDesc.screenOrientation!=="auto"&&screen.orientation.lock(n.projectDesc.screenOrientation)}catch(e){}}static toggle(){Ze.isFullscreen?Ze.close():Ze.open()}static close(){Dt(Ze._closeInner),n.projectDesc.autoFullScreenMobile=n.projectDesc.autoFullScreenDesktop=!1}static _closeInner(){document.exitFullscreen&&document.exitFullscreen()}};Jr(Zs,"isAvailable",Oi.requestFullscreen&&!window.cordova);let zr=Zs,I=new Set;const Lt=[];let Be=window;try{for(;Be&&(Be.addEventListener("keydown",t=>{I.add(t.keyCode),t.metaKey&&I.add(17),t.keyCode>=37&&t.keyCode<=40&&t.preventDefault()}),Be.addEventListener("keyup",t=>{Lt.push(t.keyCode),t.metaKey&&Lt.push(17)}),Be.parent!==Be);)Be=Be.parent}catch(t){}class $r{static update(){for(;Lt.length>0;)I.delete(Lt.pop())}static get all(){return I}static get up(){return I.has(38)||I.has(87)}static set up(e){e?I.add(38):(I.delete(38),I.delete(87))}static get down(){return I.has(40)||I.has(83)}static set down(e){e?I.add(40):(I.delete(40),I.delete(83))}static get shiftKey(){return I.has(16)}static get altKey(){return I.has(18)}static get ctrlKey(){return I.has(17)}static get left(){return I.has(37)||I.has(65)}static set left(e){e?I.add(37):(I.delete(37),I.delete(65))}static get right(){return I.has(39)||I.has(68)}static set right(e){e?I.add(39):(I.delete(39),I.delete(68))}static isKeycodePressed(e){return I.has(e)}static resetAll(){I.clear()}}var Kr=Object.defineProperty,ea=(t,e,i)=>e in t?Kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,It=(t,e,i)=>ea(t,typeof e!="symbol"?e+"":e,i);const qs=class Fi{constructor(e){It(this,"_storageId"),It(this,"data"),It(this,"__flushInterval",0),this._storageId=e,this.data={};try{typeof Storage!="undefined"&&localStorage.hasOwnProperty(e)&&(this.data=JSON.parse(localStorage[e]))}catch(i){}this.flush=this.flush.bind(this),window.addEventListener("beforeunload",()=>{this.__flushInterval&&this.flush()})}getItem(e,i){return this.data.hasOwnProperty(e)?this.data[e]:i}setItem(e,i){(i!==this.data[e]||typeof i=="object")&&(this.data[e]=i,this.changed(),Fi.globalOnChanged&&Fi.globalOnChanged(e,i))}removeItem(e){this.data.hasOwnProperty(e)&&(delete this.data[e],this.changed())}changed(){this.__flushInterval||(this.__flushInterval=window.setTimeout(this.flush,10,this))}clear(){this.data={},this.changed()}flush(){if(typeof Storage!="undefined"){this.__flushInterval=0;try{localStorage.setItem(this._storageId,JSON.stringify(this.data))}catch(e){this.data=this.data||{}}}}};It(qs,"globalOnChanged");let Js=qs;const ta=(t,e,i,s,r,a,o,l=!0)=>{const A=()=>{n.hideModal(t),r&&(typeof r=="string"?Ne(r,t):r())},h=()=>{n.hideModal(t),o&&(typeof o=="string"?Ne(o,t):o())};let u=t.findChildByName("easyCloseBtn");if(u&&(l?u.onClickCallback=h:u.disable()),typeof e=="string"){let f=t.findChildByName("title");f&&(f.text=e)}if(typeof i=="string"){let f=t.findChildByName("message");f&&(f.text=i)}let d=t.findChildByName("okBtn");if(d){if(s){let f=d.findChildByName("label");f&&(g.has(s)?f.translatableText=s:(f.translatableText=null,f.text=s))}d.onClickCallback=A}let c=t.findChildByName("noBtn");if(c){if(a){let f=c.findChildByName("label");f&&(g.has(a)?f.translatableText=a:(f.translatableText=null,f.text=a))}a||o&&!l?c.onClickCallback=h:(c.visible=!1,d.x=(d.x+c.x)/2)}},ia=`<div class="loading-error-wrapper" style="
			position:absolute;
			z-index: 2;
			width:100%;
			height:100%;
			left:0;
			top:0;
			background:rgba(0,0,0,0.7)">
	<div class="loading-error-body" style="
			padding: 5vh;
			box-sizing: border-box;
			margin: 20vh 0;
			width: 100%;
			background: #000000;
			text-align: center;">
		<div class="loading-error-game-title">$TITLE$</div>
		<div class="loading-error-title" style="
			margin: 2vh;
			font-size:200%;">
			LOADING ERROR</div>
		<div class="loading-error-message">(click to reload)</div>
	</div>
</div>`;var sa=Object.defineProperty,na=(t,e,i)=>e in t?sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,S=(t,e,i)=>na(t,typeof e!="symbol"?e+"":e,i);window.PIXI={};Object.assign(window.PIXI,or);let nt,We,j=[],Ce=[],rt,V=[],ei,W,at=[],Ue=0,Qe=0,ti=1,ii=0;const ra="fader/default",Mi="preloader",aa=4,_t=1;let Ie=0;const oa=t=>{t._onRenderResize&&t._onRenderResize()};class la extends ls.EventEmitter{constructor(){super(),S(this,"W",0),S(this,"H",0),S(this,"data",{}),S(this,"Sound",q),S(this,"_loadingErrorIsDisplayed",!1),S(this,"projectDesc"),S(this,"all"),S(this,"classes"),S(this,"pixiApp"),S(this,"stage"),S(this,"settings"),S(this,"fullscreen",zr),S(this,"isCanvasMode",!1),S(this,"isVisible",!0),S(this,"isFocused",!1),S(this,"isMobile",ls.isMobile),S(this,"isPortrait",!1),S(this,"isLandscapeMobile",!1),S(this,"_isCanvasRotated",!1),S(this,"_isWaitingToHideFader",!1),S(this,"mouse",new Zi),S(this,"frameSeed",0),S(this,"isUpdateBeforeRender",!1),S(this,"onGameReload"),S(this,"loadingsInProgress",0),S(this,"loadingsFinished",0),S(this,"loadingProgress",0),S(this,"keys",$r),S(this,"L"),S(this,"exitApp"),S(this,"time",0),S(this,"setValueByPath",Je),S(this,"currentScene"),S(this,"__doOneStep",!1),S(this,"__paused",!1),We=new O,We.name="stage",this.stage=We,We.__nodeExtendData={}}init(e,i,s){n.addAssets(Ye),window.dispatchEvent(new CustomEvent("game-will-init")),m.addTexture("EMPTY",qe.EMPTY),m.addTexture("WHITE",qe.WHITE),this.pixiApp=nt=new Ar(s),(e||document.body).appendChild(nt.view),this.onResize=this.onResize.bind(this),this.settings=new Js(i||this.projectDesc.id),Yr(),Aa(),nt.stage.addChild(We),Ft(()=>import("./classes-BqdvCSLu.js"),[],import.meta.url).then(()=>{n._startGame()}).catch(()=>{n.showLoadingError("classes.js")})}_setClasses(e){this.classes||(this._updateGlobal=this._updateGlobal.bind(this),nt.ticker.add(this._updateGlobal),q.init()),this.classes=e}_startGame(){qe.WHITE.baseTexture.resource.source.getContext("2d").fillRect(0,0,1,1),this.pixiApp.view.addEventListener("wheel",e=>e.preventDefault()),window.addEventListener("resize",this._onContainerResize.bind(this)),this.onResize(),this.emit("preloader-scene-will-start"),this.showScene(Mi)}_onContainerResize(){for(let e of[1,20,40,80,200,500,1e3,1500,2e3,3e3])window.setTimeout(this.onResize,e)}get isAllButtonsDisabled(){return!!W}addAssets(e){e.projectDesc&&n.applyProjectDesc(e.projectDesc),n.emit("assets-will-add",e),m.addAssets(e)}applyProjectDesc(e){hr.defaultOptions.mipmap=e.mipmap?Ei.ON:Ei.OFF,ur.defaultMode=cr.MANUAL,this.projectDesc=e,n.projectDesc.defaultFont&&(document.body.style.fontFamily=n.projectDesc.defaultFont)}onResize(){if(!this.pixiApp)return;let e,i;this.pixiApp.view.parentNode===document.body?(e=window.innerWidth,i=window.innerHeight):(e=this.pixiApp.view.parentNode.clientWidth,i=this.pixiApp.view.parentNode.clientHeight);const s=e,r=i;let a=n.projectDesc.dynamicStageSize,o;o=this.projectDesc.screenOrientation,o==="auto"&&(o=e<i&&n.isMobile.any?"portrait":"landscape");let l=!1;switch(o){case"portrait":l=e>i,n.isPortrait=!0;break;default:l=i>e,n.isPortrait=!1;break}this.isLandscapeMobile=!this.isPortrait&&this.isMobile.any,this.isMobile.any||(l=!1),n.isPortrait?(this.W=this.projectDesc.portraitWidth,this.H=this.projectDesc.portraitHeight):(this.W=this.projectDesc.width,this.H=this.projectDesc.height),a||n.projectDesc.preventUpscale&&(l?(e=Math.min(this.H,e),i=Math.min(this.W,i)):(e=Math.min(this.W,e),i=Math.min(this.H,i)));let A;l?A=Math.min(i/this.W,e/this.H):A=Math.min(e/this.W,i/this.H),a&&(n.projectDesc.preventUpscale?(A<1&&(e=e/A,i=i/A),A=1):(e=e/A,i=i/A));let h=1;if(this.isMobile.any?n.projectDesc.renderResolutionMobile&&(h=n.projectDesc.renderResolutionMobile):n.projectDesc.renderResolution&&(h=n.projectDesc.renderResolution),h=Math.max(window.devicePixelRatio||1,h),A*=h,A=Math.min(3,A),this.pixiApp&&this.pixiApp.renderer&&(n.isCanvasMode=!this.pixiApp.renderer.gl,!n.isCanvasMode)){let N=this.pixiApp.renderer.gl,_=N.getParameter(N.MAX_TEXTURE_SIZE);_<3e3&&(A=Math.min(1,A)),e*A>_&&(A=_/e),i*A>_&&(A=_/i)}a&&(l?(this.H=e,this.W=i):(this.W=e,this.H=i));let u,d;l?(u=this.H,d=this.W):(u=this.W,d=this.H),this.W=Math.round(this.W),this.H=Math.round(this.H),this.W&1&&this.W++,this.H&1&&this.H++,u=Math.floor(u+=1e-4),d=Math.floor(d+=1e-4);let c=Ue!==u||Qe!==d||ti!==A;Ue=u,Qe=d,ti=A;let f=n.stage;if(n._isCanvasRotated=l,l?(f.rotation=Math.PI/2,f.x=this.H):(f.rotation=0,f.x=0),c){let N=n.pixiApp.renderer;N.resolution=ti,N.resize(Ue,Qe),this.emit("stage-will-resize"),this.forAllChildrenEverywhere(oa)}const v=s/Ue>=r/Qe,y=this.pixiApp.view,F=v?Math.round(r*Ue/Qe):s,x=v?r:Math.round(s*Qe/Ue);y.style.width=F+"px",y.style.height=x+"px",y.style.left=Math.round((s-F)/2)+"px",y.style.top=Math.round((r-x)/2)+"px"}forAllChildrenEverywhere(e){n.stage&&n.stage.forAllChildren&&n.stage.forAllChildren(e),n.forAllChildrenEverywhereBack(e)}forAllChildrenEverywhereBack(e){for(let s of V)typeof s!="string"&&(e(s),s.parent||(e(s),s.forAllChildren(e)));const i=m._getStaticScenes();for(let s in i){let r=i[s];r.parent||(e(r),r.forAllChildren(e))}}get currentContainer(){return j.length>0?j[j.length-1]:this.currentScene}_updateGlobal(e){if(!this.__paused||this.__doOneStep){for(this.emit("global-update"),e=Math.min(e,aa),Ie+=e,Ie=Math.min(Ie,_t*n.projectDesc.framesSkipLimit);Ie>_t;)if(Ie-=_t,n.isUpdateBeforeRender=!(Ie>_t),this._updateFrame(),this.__doOneStep){this.__doOneStep=!1,Ie=0;break}}if(this.currentScene){nt.renderer.background.backgroundColor.setValue(this.currentScene.backgroundColor),this.currentScene.interactiveChildren=j.length===0&&!W;let i=j.length-1,s=!W;for(;i>=0;)j[i].interactiveChildren=s,s=!1,i--}}_updateFrame(){if(n._loadingErrorIsDisplayed)return;if(this.frameSeed=Math.floor(Math.random()*2147483648),this.time++,!n.isCanvasMode){if(this.pixiApp.renderer.gl.isContextLost()){n.isVisible&&(ii++,ii===60&&n._reloadGame());return}ii=0}this.emit("update"),n._isWaitingToHideFader?n.loadingsFinished===n.loadingsInProgress&&(n._processScenesStack(),n.currentScene._onShowCalled?n._hideCurrentFaderAndStartScene():(n.currentScene._onShowCalled=!0,n.currentScene.onShow(),n.currentScene.emit("on-scene-show"),n.currentScene.name===Mi&&(n._hideCurrentFaderAndStartScene(),this.loadingAdd("assets-main load"),Ft(()=>import("./assets-main-ClGH7_IG.js"),[],import.meta.url).then(i=>{this.loadingRemove("assets-main load"),n.addAssets(i.default)}).catch(i=>{console.error(i),n.showLoadingError("assets-main.json")})))):this.currentContainer&&(!W||this.currentContainer!==this.currentScene||Ce.length<1)&&this.currentContainer.update(),W&&W.update();let e=at.length-1;for(;e>=0;){let i=at[e];rt=i,i.update(),e--}if(!W){let i=Ce.length-1;for(;i>=0;){let s=Ce[i];s.alpha-=.1,s.alpha<=.01&&(m.destroyObjectAndChildren(s),Ce.splice(i,1)),i--}}this.keys.update(),this.emit("updated"),m._cleanupRemoveHolders()}get currentFader(){return W}_hideCurrentFaderAndStartScene(){W.gotoLabelRecursive("hide fader"),at.unshift(W),W=void 0,n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic(),n._isWaitingToHideFader=!1}_processScenesStack(){for(;;){let e=V[V.length-1];if(e===n.currentScene)break;n.currentScene&&(n.currentScene._onShowCalled&&n.currentScene.onHide(),ha()),e=V[V.length-1],V[V.length-1]=n._setCurrentSceneContent(e)}}_reloadGame(){n.onGameReload&&n.onGameReload(),m.hasPrefab("final-fader")&&n.showModal("final-fader"),window.location.reload()}showScene(e,i){V.push(e),n._startFaderIfNeed(i)}loadingAdd(e){this.loadingsFinished===this.loadingsInProgress&&(this.loadingsInProgress=0,this.loadingsFinished=0),this.loadingsInProgress++,this._refreshLoadingProgress()}_refreshLoadingProgress(){this.loadingProgress=this.loadingsInProgress?Math.floor(this.loadingsFinished/this.loadingsInProgress*100):0}loadingRemove(e){this.loadingsFinished++,this._refreshLoadingProgress()}replaceScene(e,i){e||(e=n.projectDesc.mainScene),Ri(V.pop()),V.push(e),n._startFaderIfNeed(i)}_startFaderIfNeed(e){V[V.length-1]!==n.currentScene&&(ei=j.slice(),W||(e||(this.currentScene&&this.currentScene.faderType?e=this.currentScene.faderType:e=ra),W=m.loadPrefab(e),this.stage.addChild(W),n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic()))}closeCurrentScene(e){Ri(V.pop()),n._startFaderIfNeed(e)}closeAllScenes(e){for(;V.length>1;)n.closeCurrentScene(e)}showQuestion(e,i,s,r,a,o,l=!0,A="ui/sure-question"){let h=m.loadPrefab(A);return ta(h,e,i,s,r,a,o,l),n.showModal(h)}showModal(e,i){if(typeof e=="string"&&(e=m.loadPrefab(e)),j.push(e),i){const s=Le.promise(()=>{},e);s.name="modal-promise-awaiter",s.then(i)}return e.interactiveChildren=!1,n.stage.addChild(e),n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic(),n.emit("modal-shown"),e}hideModal(e,i=!1){let s;if(!e)s=j.pop();else{let a=j.indexOf(e);s=e,j.splice(a,1)}const r=s.getChildByName("modal-promise-awaiter");r&&(r.resolve(s),r.update()),i?m.destroyObjectAndChildren(s):(s.interactiveChildren=!1,Ce.push(s)),n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic()}__togglePause(){n.__paused=!n.__paused}__oneStep(){n.__doOneStep=!0}faderShoot(){for(;ei.length>0;){let e=ei.pop(),i=j.indexOf(e);i>=0&&(j.splice(i,1),m.destroyObjectAndChildren(e))}for(;Ce.length>0;){let e=Ce.pop();m.destroyObjectAndChildren(e)}n._isWaitingToHideFader=!0}faderEnd(){if(rt){let e=at.indexOf(rt);at.splice(e,1),m.destroyObjectAndChildren(rt),rt=null}}openUrl(e,i="_blank"){Dt(()=>{window.open(e,i)})}showLoadingError(e){if(n._loadingErrorIsDisplayed)return;n._loadingErrorIsDisplayed=!0,n.classes&&n.classes.BgMusic&&n.classes.BgMusic._recalculateMusic();let i=document.createElement("div");i.innerHTML=ia.replace("$TITLE$",n.projectDesc.title),document.body.appendChild(i),document.addEventListener("click",()=>{n._reloadGame()})}_setCurrentScene(e){e?n.all=e.all:n.all=null,n.currentScene=e}_setCurrentSceneContent(e){return e=ua(e),this._setCurrentScene(e),e.interactiveChildren=!1,We.addChildAt(e,0),e._onShowCalled=!1,e}_getScenesStack(){return V}applyCSS(e){let i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.appendChild(document.createTextNode(e)),i.appendChild(s)}}const ms=new Set;let ne;function Aa(){var t,e,i,s,r,a;if((i=(e=(t=n.projectDesc.webfontloader)==null?void 0:t.custom)==null?void 0:e.families)!=null&&i.length||(a=(r=(s=n.projectDesc.webfontloader)==null?void 0:s.google)==null?void 0:r.families)!=null&&a.length){if(n.loadingAdd("FontsLoading"),n.projectDesc.fontHolderText){ne||(ne=document.createElement("span"),ne.style.opacity="0",ne.style.userSelect="none",ne.style.color="rgba(0,0,0,0.01)",ne.style.position="absolute",ne.style.zIndex="-1");for(let o in n.projectDesc.webfontloader){let l=n.projectDesc.webfontloader[o].families;if(l){for(let A of l)if(!ms.has(A)){if(ms.add(A),o==="custom"){A=A.replace(/ /g,"");let c="fonts/"+A.replace(/ /g,"")+".woff",f=c+"2";c=m.fonts[c],f=m.fonts[f],n.applyCSS(`
@font-face {
	font-family: '`+A+`';
	src: url('`+f+`') format('woff2'),
	url('`+c+`') format('woff');
}
									`)}else if(o==="google"){const c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.href="https://fonts.googleapis.com/css?family="+A,document.head.appendChild(c)}let h=A.split(":"),u=h[0],d=h[1]?h[1].split(","):["normal"];for(let c of d){let f=document.createElement("span");f.style.fontFamily=`"${u}"`,f.style.fontWeight=c,f.style.position="absolute",f.innerHTML=n.projectDesc.fontHolderText,ne.appendChild(f)}}}}document.body.appendChild(ne)}document.fonts.ready.then(()=>{n.loadingRemove("FontsLoading")})}}function ha(){let t=n.currentScene;n._setCurrentScene(null),Ri(t)}function Ri(t){t instanceof vr&&t!==n.currentScene&&(!t.isStatic&&V.indexOf(t)<0?m.destroyObjectAndChildren(t):t.detachFromParent())}function ua(t){return typeof t=="string"&&(t=m.loadScene(t)),t}const n=new la;document.addEventListener("visibilitychange",()=>zs());window.addEventListener("focus",()=>Qt(!0));window.addEventListener("blur",()=>Qt(!1));const Qt=t=>{n.isFocused!==t&&(n.isFocused=t,n.pixiApp&&window.setTimeout(()=>{n.keys.resetAll()},10))},zs=()=>{const t=document.visibilityState==="visible";n.isVisible!==t&&(n.isVisible=t,n.pixiApp&&window.setTimeout(()=>{const e=()=>{var i;(i=n.classes)!=null&&i.BgMusic&&(n.classes.BgMusic._clearCustomFades(.2),n.classes.BgMusic._recalculateMusic())};t&&(n.isMobile.apple.phone||n.isMobile.apple.ipod)?setTimeout(()=>{const i=Howler.ctx;i?(i.suspend(),i.resume().then(e)):e()},500):e()},10),Qt(t))};Qt(!0);zs();let gs=!1;function ca(){gs||(gs=!0,window.addEventListener("keydown",t=>{t.keyCode===80&&(t.ctrlKey||t.metaKey)?(n.__togglePause(),t.preventDefault()):t.keyCode===219&&(t.ctrlKey||t.metaKey)&&(n.__oneStep(),t.preventDefault())}))}var da=Object.defineProperty,fa=(t,e,i)=>e in t?da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,St=(t,e,i)=>fa(t,typeof e!="symbol"?e+"":e,i);const pa="data:video/webm;base64,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",ma="data:video/mp4;base64,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",si=()=>typeof navigator!="undefined"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,ni=()=>"wakeLock"in navigator;class ga{constructor(){if(St(this,"enabled",!1),St(this,"_wakeLock",null),St(this,"noSleepTimer",0),St(this,"noSleepVideo"),ni()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else si()?this.noSleepTimer=0:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",ma),this._addSourceToVideo(this.noSleepVideo,"mp4",pa),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,i,s){var r=document.createElement("source");r.src=s,r.type=`video/${i}`,e.appendChild(r)}get isEnabled(){return this.enabled}enable(){return ni()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0}).catch(e=>{this.enabled=!1}):si()?(this.disable(),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(i=>(this.enabled=!0,i)).catch(i=>{this.enabled=!1})}disable(){ni()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):si()?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=0):this.noSleepVideo.pause(),this.enabled=!1}}if(n.isMobile.any){const t=new ga;let e=0;const i=()=>{const r=Date.now();r-4e3>e&&(e=r,t.enable())},s=()=>{Dt(i)};document.addEventListener("touchend",s),document.addEventListener("click",s)}const kt=(t,e,i)=>{if(window.trackGameEventListeners&&window.trackGameEventListeners.length){let s=window.trackGameEventListeners.length;for(;s--;)if(window.trackGameEventListeners[s])try{window.trackGameEventListeners[s](t,e,i)}catch(r){console.error("analytic error:"),console.error(r)}}},va=()=>{var t;kt("game_resources_loaded"),kt("game_loaded",(t=window.__OPTIONS__)==null?void 0:t.identifier)},H={addListener:t=>{window.trackGameEventListeners||(window.trackGameEventListeners=[]),window.trackGameEventListeners.push(t)},track:kt,trackGameLoaded:va};n.thingGamesUtilsAnalytics=H;n.onGameReload=()=>{kt("game_reloading")};let ya=!1;window.dispatchEvent(new CustomEvent("analytics/incoming",{detail:{type:"start",payload:{isEditor:ya}}}));const ba=t=>t()?Promise.resolve():new Promise(e=>{let i=window.setInterval(()=>{t()&&(e(void 0),clearInterval(i))},100)});var _a=(t,e,i)=>new Promise((s,r)=>{var a=A=>{try{l(i.next(A))}catch(h){r(h)}},o=A=>{try{l(i.throw(A))}catch(h){r(h)}},l=A=>A.done?s(A.value):Promise.resolve(A.value).then(a,o);l((i=i.apply(t,e)).next())});const ri=[];let ot=!1;class $s{static addHook(e){ri.push(e)}static fetch(e,i,s="json",r,a=1,o=!1){let l=!1,A=Le.promise((h,u)=>_a(this,null,function*(){let d=0;for(ri.length&&(yield Promise.all(ri.map(c=>c(i,s,r)))),o&&(ot?yield ba(()=>{if(!ot)return ot=!0,!0}):ot=!0);a>0&&!l;)yield fetch(i,r).then(c=>c[s]()).then(c=>{a=0,h(c)}).catch(c=>{a--,d+=1e3,a===0&&u&&u(c)}),d&&(yield new Promise(c=>{window.setTimeout(c,d)}));o&&(ot=!1)}),e);return A.name="Request: "+i,A.finally(()=>{l=!0}),A}}var Sa=Object.defineProperty,wa=(t,e,i)=>e in t?Sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ai=(t,e,i)=>wa(t,typeof e!="symbol"?e+"":e,i);class be extends O{constructor(){super(),ai(this,"delay",0),ai(this,"callback",null),ai(this,"___stack"),this.visible=!1}static delay(e,i,s=n.currentContainer){if(i<=0)e();else{let r=ye.create(be);return r.delay=i,r.callback=e,s.addChild(r),r}}skip(){this.callback(),this.callback=null,this.remove()}update(){this.delay--,this.delay<1&&(this.callback(),this.remove())}}var Ea=Object.defineProperty,Ba=(t,e,i)=>e in t?Ea(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Ca=(t,e,i)=>Ba(t,e+"",i);class Ia extends qi{constructor(){super(...arguments),Ca(this,"phase",0)}init(){super.init(),this.phase=0}hide(){this.phase=0}update(){super.update(),this.y-=1,this.phase--,this.phase<=0?(this.alpha-=.05,this.alpha<=0&&this.remove()):this.alpha<.95&&(this.alpha+=.2)}static flyText(e,i=null,s=null,r="fly-text",a=0,o){typeof i!="number"&&(i=n.W/2),typeof s!="number"&&(s=n.H/2);let l=m.loadPrefab(r);if(typeof e!="string"&&(e=e.toString()),l.text=e,l.phase=e.length*6+a,o)typeof o=="string"&&(o=He(o,n.currentContainer));else{o=n.currentContainer;let A=l.width/2+5;i<A&&(i=A),i>n.W-A&&(i=n.W-A)}return l.alpha=0,l.x=i,l.y=s,o.addChild(l),l}}const Ks={win_levels:[2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536],lose_levels:[Number.EPSILON,.25,.5,1],name:"unnamed",base_bet:10,bet_adding:0,limit:5e4,features:[],default_bet:100,currency:{code:"EUR",symbol:"€",subunits:100,exponent:2},math:{RTP:.97}};function xa(t,e){const i=JSON.parse(JSON.stringify(t));return e=JSON.parse(JSON.stringify(e)),i.custom&&e.custom&&(e.custom=Object.assign({},i.custom,e.custom)),Object.assign(i,e),t!==Ks&&e.base_bet&&e.base_bet!==t.base_bet&&(e.default_bet||(i.default_bet=t.default_bet/t.base_bet*e.base_bet)),i}var Pa=Object.defineProperty,Ta=(t,e,i)=>e in t?Pa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,oi=(t,e,i)=>Ta(t,typeof e!="symbol"?e+"":e,i);const Oa=2147483648,Fa=1103515245,Ma=12345;class en{constructor(){oi(this,"state0",0),oi(this,"state1",0),oi(this,"state2",0)}seed(e){this.state0=e,this.state1=e*213947+1238971,this.state2=e*7431+94823,this.random()}random(e=Number.MAX_SAFE_INTEGER){let i=this.state0,s=this.state1;return this.state0=s,i^=i<<23,i^=i>>17,i^=s,i^=s>>26,this.state1=i,this.state2=(Fa*this.state2+Ma)%Oa,(this.state0+this.state1+this.state2)%e}}var Ra=Object.defineProperty,Na=Math.pow,Da=(t,e,i)=>e in t?Ra(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,T=(t,e,i)=>Da(t,typeof e!="symbol"?e+"":e,i);const Re=Na(2,13),La=250*Re,ka=0,Ha=60,Va=110,vs=2,li=1350,Ga=2500,Wa=4050,tn=20;class Ua{constructor(){T(this,"win",1),T(this,"playerY",0),T(this,"xSpeed",0),T(this,"ySpeed",0),T(this,"shipX",0),T(this,"isFinished",!0),T(this,"landed",!1),T(this,"distance",0),T(this,"bonuses"),T(this,"random",new en),this.bonuses=[new Y(this,this.random,-40,1,1,1),new Y(this,this.random,-40,1,1,2),new Y(this,this.random,-40,1,1,3),new Y(this,this.random,-40,2,1,4),new Y(this,this.random,-40,2,1,5),new Y(this,this.random,-40,5,1,6),new Y(this,this.random,-40,10,1,7),new Y(this,this.random,-40,0,2,8),new Y(this,this.random,-40,0,3,9),new Y(this,this.random,-40,0,4,10),new Y(this,this.random,-40,0,5,11),new Y(this,this.random,tn,0,.5)];for(const e of this.bonuses)e.bonuses=this.bonuses}seed(e){this.distance=0,this.isFinished=!1,this.win=Re,this.landed=!1,this.ySpeed=-78,this.xSpeed=-80,this.playerY=0,this.shipX=0,typeof e!="undefined"&&this.random.seed(e);for(const i of this.bonuses)i.y=-1e6;for(const i of this.bonuses)i.newRound()}reset(){this.xSpeed=0,this.isFinished=!0,this.shipX=0,this.playerY=0,this.win=Re}update(){this.shipX+=this.xSpeed,this.distance-=this.xSpeed,this.shipX<-Ga&&(this.shipX=Wa),this.landed?this.shipX>-li?(this.xSpeed&&(this.xSpeed+=vs),this.xSpeed===0&&(this.isFinished=!0)):(this.landed=!1,this.isFinished=!0):(this.ySpeed<Ha&&this.ySpeed++,this.playerY+=this.ySpeed,this.playerY>=0&&(this.shipX>-li&&this.shipX<li?(this.landed=!0,this.ySpeed=0,this.playerY=0):this.isFinished=!0,this.xSpeed&&(this.xSpeed+=vs)));for(const e of this.bonuses)e.update()}getPlaneY(){return this.playerY}getPlanerSpeed(){return this.xSpeed}getCurrentMultiplier(){return this.win/Re}getTotalWinMultiplier(){return this.landed?this.win/Re:0}getShipX(){return this.shipX}__getEmotion(){return Math.abs(this.shipX)+this.distance*2}}class Y{constructor(e,i,s,r,a=1,o=0){T(this,"add",0),T(this,"multiply",0),T(this,"y",0),T(this,"x",0),T(this,"rarity",0),T(this,"collected",!1),T(this,"yAdd",0),T(this,"random"),T(this,"speed",0),T(this,"reSpawnsToTurnRocket",0),T(this,"currentRespawn",0),T(this,"isRocket",!1),T(this,"bonuses"),T(this,"onCollected",null),T(this,"onRespawn",null),T(this,"game"),this.game=e,this.reSpawnsToTurnRocket=o,this.random=i,this.add=r,this.multiply=a,this.rarity=2e3+r*400+a*2e3,this.yAdd=s,this.speed=a<1?-ka:0}newRound(){this.isRocket=!1,this.currentRespawn=0,this.respawn()}respawn(){for(this.x=this.random.random(this.rarity)+4e3,this.y=-this.random.random(4e3)-700;this.bonuses.some(e=>e!==this&&Math.abs(e.x-this.x)<300&&Math.abs(e.y-this.y)<450);)this.y-=200}update(){if(this.x+=this.game.xSpeed+this.speed,this.x<=0){const e=Math.abs(this.game.playerY-this.y)<=220;if(e){if(this.collected=!0,this.isRocket||this.multiply<1){let r=Math.max(1,Math.floor(this.game.win*.5));this.game.win-=r,this.game.win<0&&(this.game.win=0)}else this.game.win+=this.add*Re,this.game.win*=this.multiply;this.game.win=Math.min(La,this.game.win);const i=Math.max(-this.game.ySpeed+20,Math.floor((6e3+this.game.playerY+.5)/64)),s=this.isRocket?tn:this.yAdd;this.game.ySpeed=Math.max(-i,-Va,this.game.ySpeed+s),s<0&&(this.game.ySpeed=Math.min(s,this.game.ySpeed))}e&&this.onCollected&&this.onCollected(),this.currentRespawn++,this.currentRespawn===this.reSpawnsToTurnRocket&&(this.isRocket=!0),this.respawn(),this.onRespawn&&this.onRespawn(e)}}}const Qa=xa(Ks,{base_bet:100,name:"basic",rules:"The plane must land successfully to claim your winnings.",limit:250,minPossibleWin:1/Re}),Ht=[Qa];var ja=Object.defineProperty,Xa=(t,e,i)=>e in t?ja(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,zi=(t,e,i)=>Xa(t,typeof e!="symbol"?e+"":e,i);const jt=class sn{static get currentConfig(){return Ht[this.currentVariantId]}static winToQ(e,i){const s=sn.currentConfig;return e/(i*(s.base_bet-s.bet_adding)/s.base_bet)}};zi(jt,"variantsCount",0);zi(jt,"currentVariantId",0);zi(jt,"allOptions",Ht);let b=jt;class ys{static reapplyMathConfigs(e){b.variantsCount=b.allOptions.length,b.currentVariantId=e}}const bs=1e-4,Ya=(t,e)=>t>=.95?Math.ceil(t*e-bs):Math.floor(t*e+bs);var Za=Object.defineProperty,qa=(t,e,i)=>e in t?Za(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,te=(t,e,i)=>qa(t,typeof e!="symbol"?e+"":e,i);const nn=class Ni{constructor(e){if(te(this,"__lastSeed",0),te(this,"__realTimeModel"),te(this,"random",new en),te(this,"options"),te(this,"rawLimit",0),te(this,"winLimit",0),te(this,"balanceToClose",0),te(this,"featuresByName",{}),te(this,"featuresBuyByName",{}),this.options=e,e.features)for(let i of e.features)this.featuresByName[i.name]=i;if(this.options.buy_features)for(let i of this.options.buy_features.features)i.trigger||(i.trigger=i.name),this.featuresBuyByName[i.name]=i;this.rawLimit=(e.base_bet-e.bet_adding)/e.base_bet*e.limit,this.spinData=this.generateSpinData()}seed(e){Ni.__lastSeed=e,this.__lastSeed=e,this.__realTimeModel&&this.__realTimeModel.seed(e),this.random.seed(e)}generateSpinData(){return{spinWin:0,balance:1e6,bet:0,steps:[],start:{},end:{}}}onSpin(e,i=1,s=0,r=!1,a=0){const o=this.spinData,l=e.options;let A=l.bet;if(this.winLimit=Math.round(A*this.rawLimit),l.purchased_feature||(l.purchased_feature=null),l.purchased_feature){const u=this.featuresBuyByName[l.purchased_feature].price*A;o.balance-=u,o.end.purchased_feature=l.purchased_feature}for(let h=i;h>0;){if(o.start=JSON.parse(JSON.stringify(o.end)),!o.end.freeFeatures)o.bet=A,o.mode=l.mode,l.purchased_feature||(o.balance-=A);else{const f=this.getActiveFeature();f.spined++,f.realSpined++,A=o.bet}o.spinWin=0,this.spinData.steps=[],this.processSpin(l),this.processTriggerFeatures(l);let u=this.getActiveFeature();if(o.spinWin){const f=o.spinWin;this.balanceToClose+=f,u&&(u.totalWin+=f)}h=0;const d=this.winLimit;let c=d<=this.balanceToClose;if(c){if(this._onLimitReached(),o.end.freeFeatures){for(const f of o.end.freeFeatures)f.spined=f.issued;o.end.freeFeatures[0].totalWin=d}this.balanceToClose=d}for(;u&&(u.spined===u.issued||u.forceFinish||c);)this.finishFeature(u),u=this.getActiveFeature();u||(o.end.purchased_feature=void 0,this.closeRound(),h--)}}selectRandomElements(e,i,s){const r=this.randomInt(e.length);let a=0;for(let o=0;o<s;o++)i.push(e[(a+r)%e.length]),a+=1+(this.randomInt(e.length-s-a)||0)}processTriggerFeatures(e){}_onLimitReached(){}restartFeature(e,i){this.spinData.steps.push([{type:"restart-feature",count:i,featureName:e.name}]),e.spined=0,e.issued=i}retriggerFeature(e,i){this.spinData.steps.push([{type:"retrigger-feature",count:i,featureName:e.name}]),e.issued+=i}triggerFeature(e,i){this.spinData.end.freeFeatures?this.getActiveFeature().totalWin+=this.spinData.spinWin:this.spinData.end.freeFeatures=[],this.spinData.steps.push([{type:"trigger-feature",featureName:e,count:i,totalWin:this.spinData.end.freeFeatures.length===0?this.spinData.spinWin:0}]),this.spinData.end.freeFeatures.push({name:e,issued:i,spined:0,realSpined:0,forceFinish:!1,totalWin:this.spinData.end.freeFeatures.length===0?0:-this.spinData.spinWin})}finishFeature(e){const i=this.spinData.end.freeFeatures;this.spinData.steps.push([{type:"finish-feature",realSpined:e.realSpined,count:e.issued,totalWin:e.totalWin,featureName:e.name}]),i.length===1?(this.spinData.end.freeFeatures=void 0,this.spinData.end.purchased_feature&&(this.featuresBuyByName[this.spinData.end.purchased_feature].trigger,e.name),this.hideAllValues()):(i.pop(),i[i.length-1].totalWin+=e.totalWin)}isFeatureActive(e){if(this.spinData.end.freeFeatures){for(const i of this.spinData.end.freeFeatures)if(i.name===e)return!0}return!1}getActiveFeature(){return this.spinData.end.freeFeatures&&this.spinData.end.freeFeatures[this.spinData.end.freeFeatures.length-1]}addValue(e,i,s,r){if(r||(r=[],this.spinData.steps.push(r)),!this.spinData.end.values){const o={name:e,type:i,value:s};return this.spinData.end.values=[o],r.push({type:"show-value",value:Object.assign({},o)}),r}for(let o of this.spinData.end.values)if(o.name===e)return o.value=s,r.push({type:"show-value",value:Object.assign({},o)}),r;const a={name:e,type:i,value:s};return this.spinData.end.values.push(a),r.push({type:"show-value",value:Object.assign({},a)}),r}getValue(e){return this.spinData.end.values.find(i=>i.name===e).value}hideValue(e,i){if(i||(i=[],this.spinData.steps.push(i)),this.spinData.end.values.length===1)this.spinData.end.values=void 0;else{const s=this.spinData.end.values.findIndex(r=>r.name===e);this.spinData.end.values.splice(s,1)}return i.push({type:"hide-value",valueName:e}),i}hideAllValues(){this.spinData.end.values=void 0,this.spinData.steps.push([{type:"hide-all-values"}])}showMessage(e,i){this.spinData.steps.push([{type:"show-message",textId:e,customName:i}])}bigWinPoint(){this.spinData.steps.push([{type:"big-win-point"}])}processSpin(e){for(;!this.__realTimeModel.isFinished;)this.__realTimeModel.update();const i=Ya(this.__realTimeModel.getTotalWinMultiplier(),e.bet);this.spinData.spinWin=i,this.spinData.steps.push([{type:"win-client-side",win:i,seed:Ni.__lastSeed}])}closeRound(){const e=this.spinData;this.balanceToClose&&(e.balance+=this.balanceToClose,this.balanceToClose=0)}randomInt(e){return this.random.random(e)}beToNewFormat(e){var i;if(!e.end){if(typeof e.balance!="number"){if(e.features){const r=e.features.bonus_data||e.features;for(const a in r)a.includes("issued")?e.features.issued=parseInt(r[a]):a.includes("left")&&(e.features.left=parseInt(r[a]))}if(e.free_rounds){const r=e.balance;r.game||(r.game=0),r.free_rounds||(r.free_rounds=0),e.free_rounds.performed&&(r.free_rounds+=r.game,r.game=0),e.free_rounds.win=r.free_rounds}(i=e.features)!=null&&i.left?e.balance=e.balance.wallet:e.balance=e.balance.wallet+e.balance.game}e.start={},e.end={},e.steps=[],e.id=e.flow.round_id||e.id;const s=e.outcome&&e.outcome.win;if(e.spinWin=s||0,e.outcome){e.bet=e.outcome.bet;const r=e.outcome.storage.seed;e.outcome&&e.steps.push([{type:"win-client-side",win:s,seed:r}])}}}flyValue(e,i,s,r,a){if(r||(r=[],this.spinData.steps.push(r)),typeof s=="string"){for(const l of this.spinData.end.values)if(l.name===s){l.value=i;break}}const o={type:"fly-value",finalValue:i,from:e,to:s,valueType:a};return s||(o.win=i-this.spinData.spinWin,this.spinData.spinWin=i),r.push(o),r}unpackRoundDataFromResponse(e,i){var s,r;this.beToNewFormat(e);let a=[];if(e.steps.length){const o=e.steps[0][0].seed;if(this.playClientSideRound(o,a,{bet:e.bet||e.options.default_bet,purchased_feature:e.start.purchased_feature}),a[0].steps.length){e.isRestoring&&!e.end.freeFeatures&&!e.start.freeFeatures&&!e.features&&(a[0].balance=e.balance);let l=0;if(e.features?l=e.features.issued-e.features.left:l=e.start.freeFeatures?e.start.freeFeatures[0].spined+1:0,(s=e.free_rounds)!=null&&s.performed)for(let h=0;h<a.length;h++)e.free_rounds.win-=a[h].spinWin;const A=a[l];if(A.balance=e.balance,!l&&!i){let h=0;for(const u of a)h+=u.spinWin;h=Math.min(h,this.winLimit||h)}e.spinWin=A.spinWin,e.balance=A.balance,e.start=A.start,e.end=A.end,e.steps=A.steps}else(r=e.free_rounds)!=null&&r.performed&&(e.free_rounds.win-=e.spinWin)}else e.steps=this.spinData.steps,e.start=this.spinData.start}finishAllFeatures(){if(this.spinData.end.freeFeatures)for(const e of this.spinData.end.freeFeatures)e.forceFinish=!0}playClientSideRound(e,i,s,r){this.spinData=this.generateSpinData(),typeof r=="number"&&(this.spinData.balance=r),i.push(this.spinData);const a={command:"spin",options:s,id:0};this.seed(e),this.onSpin(a);let o=this.spinData.spinWin;if(this.spinData.end.freeFeatures){const l=s.purchased_feature;for(delete s.purchased_feature;this.spinData.end.freeFeatures;)this.spinData=JSON.parse(JSON.stringify(this.spinData)),this.onSpin(a),i.push(this.spinData),o+=this.spinData.spinWin;l&&(s.purchased_feature=l)}return o}};te(nn,"__lastSeed",0);let rn=nn;class an extends rn{constructor(e){super(e),this.__realTimeModel=new Ua}}an.__versionHash="tlMOQAcV";const Ja=an,za=(t,e,i)=>Math.abs(t-e)<=i?e:t>e?t-i:t+i;function Di(t,e=0){let i=t<0,s;if(i&&(t=-t),e>0){let r=t.toFixed(e).split(".");r[0].length>3&&(r[0]=r[0].replace(/(.)(?=(.{3})+$)/g,"$1 ")),s=r.join(".")}else s=t.toFixed(0).replace(/(.)(?=(.{3})+$)/g,"$1 ");return i?"-"+s:s}var $a=Object.defineProperty,Ka=(t,e,i)=>e in t?$a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,L=(t,e,i)=>Ka(t,typeof e!="symbol"?e+"":e,i);const on=class Li extends qi{constructor(){super(...arguments),L(this,"dataPath",null),L(this,"refreshInterval",10),L(this,"template",null),L(this,"paramName","%d"),L(this,"isNumeric",!1),L(this,"plusMinus",!1),L(this,"counterSpeed",1),L(this,"decimalsCount",0),L(this,"onChanged",null),L(this,"onCounter",null),L(this,"onCounterFinish",null),L(this,"currentInterval",0),L(this,"showedVal"),L(this,"processedVal"),L(this,"lastUpdateTime",0),L(this,"localizationParams",{})}init(){super.init(),this.currentInterval=0,this.text="",this.showedVal=void 0,this.processedVal=void 0,this.lastUpdateTime=n.time,this.localizationParams={}}onLanguageChanged(){this._translatableText&&(this.showedVal=void 0,this.refreshNow(),n.__paused&&super.onLanguageChanged())}customizeVal(e){return e}updateValue(){if(n.time-this.lastUpdateTime>1&&this.refreshNow(),this.lastUpdateTime=n.time,this.currentInterval<=0&&this.dataPath){let e=He(this.dataPath,this);e=this.customizeVal(e),e||e===0?(e!==this.processedVal&&(this.onChanged&&Ne(this.onChanged,this),this.processedVal=e),e!==this.showedVal&&(this.visible=!0,this.applyValue(e))):(this.processedVal=void 0,this.showedVal=void 0,this.visible=!1),this.currentInterval=this.refreshInterval}else this.currentInterval--}update(){this.updateValue(),super.update()}applyValue(e){if(this.isNumeric){if(this.counterSpeed<1&&this.showedVal!==void 0){let i=Math.max(1/Math.pow(10,this.decimalsCount),Math.abs((e-(this.showedVal||0))*this.counterSpeed));this.showedVal=za(this.showedVal||0,e,i),this.showedVal===e?this.onCounterFinish&&Ne(this.onCounterFinish,this):this.onCounter&&Ne(this.onCounter,this)}else this.showedVal=e;this.plusMinus&&e>0?e="+"+Li.formatMoney(this.showedVal,this.decimalsCount):e=Li.formatMoney(this.showedVal,this.decimalsCount)}else this.showedVal=e;this.template?this.text=this.template.replace(this.paramName,e):this._translatableText?this.paramName?(this.localizationParams[this.paramName]=e,this.text=g(this._translatableText,this.localizationParams)):this.text=g(this._translatableText,e):this.text=e}isEqual(e){return e==this.processedVal}isBigger(e){return e<this.processedVal}freezeCounter(){this.currentInterval=Number.MAX_SAFE_INTEGER}unfreezeCounter(){this.currentInterval=0}refreshNow(){this.currentInterval=0,this.lastUpdateTime=n.time,this.updateValue()}};L(on,"formatMoney",Di);let _s=on;var eo=Object.defineProperty,to=(t,e,i)=>e in t?eo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,me=(t,e,i)=>to(t,typeof e!="symbol"?e+"":e,i);class ln extends _s{constructor(){super(...arguments),me(this,"currencyNamePath",null),me(this,"maxWidthLandscape",400),me(this,"maxWidthPortrait",400),me(this,"countOnStart",!1),me(this,"showedVal2"),me(this,"symbol"),me(this,"symbolParamName","%s"),me(this,"savedTemplate",null)}init(){super.init(),this.showedVal2=void 0,this.countOnStart&&(this.showedVal=0),this.applyMaxWidth()}updateValue(){if(this.currencyNamePath&&this.currentInterval===this.refreshInterval){const e=He(this.currencyNamePath,this);e!==void 0&&e!==this.showedVal2&&(this.showedVal2=e,this.setSymbol(e))}super.updateValue()}refreshNow(){this.showedVal=void 0,super.refreshNow()}customizeVal(e){return e&&(this.decimalsCount=n.data.currencyDigits,e/=n.data.currencySubUnits)}setSymbol(e){this.translatableText?this.template=g(this.translatableText):this.savedTemplate?this.template=this.savedTemplate:this.savedTemplate=this.template,this.template&&(this.template=this.template.replace(this.symbolParamName,e)),this.localizationParams[this.symbolParamName]=e,this.symbol=e,this.currentInterval=0,this.showedVal=void 0}recalculateTextSize(){this.applyMaxWidth(),super.recalculateTextSize()}onLanguageChanged(){this.symbol&&this.translatableText&&this.setSymbol(this.symbol),super.onLanguageChanged()}_onRenderResize(){this.applyMaxWidth()}onRemove(){super.onRemove(),this.savedTemplate=null}applyMaxWidth(){const e=n.isPortrait?this.maxWidthPortrait:this.maxWidthLandscape;e>0&&(this.maxWidth=e)}static initMoneyFormatter(e){typeof Intl=="object"&&(_s.formatMoney=(i,s)=>{let r=Ss[s];return r||(r=Intl.NumberFormat(e.substr(0,2),{maximumFractionDigits:s,minimumFractionDigits:s}).format,Ss[s]=r),r(i)})}}const Ss={};n.casinoOptions={};function An(){const t=window.__OPTIONS__;t||console.error("__OPTIONS__ is not detected. Release build can run on backend environment only."),t.ui||(t.ui={}),t.actions||(t.actions={}),n.casinoOptions=t;const e=new URLSearchParams(window.location.search).get("lang");e&&(t.locale=e),ln.initMoneyFormatter(t.locale||"en"),t.ui.hide_logo=t.ui.logo==="hidden",t.ui.isTinyAutoSpinsDialog=t.ui.autospins_dialog==="tiny",t.ui.isAutoSpinAvailable=t.ui.autospins_dialog!=="disable",n.isMobile.any&&(t.ui.home_button=!0),t.actions.return||(t.ui.home_button=!1),t.history_url=t.actions.history&&t.actions.history.link||null}var io=Object.defineProperty,so=(t,e,i)=>e in t?io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,xe=(t,e,i)=>so(t,typeof e!="symbol"?e+"":e,i);class no{constructor(){xe(this,"isRealityCheckEnabled",!1),xe(this,"realityCheckTriggerInterval",0),xe(this,"isPopupActive",!1),xe(this,"popupTriggeredTime",0),xe(this,"sessionStart",Date.now()),xe(this,"userOverallBet",0),xe(this,"userOverallWin",0)}get isNeedToShowPopup(){return this.isPopupActive||!this.isRealityCheckEnabled||this.realityCheckTriggerInterval===0?!1:this.sessionTime>this.realityCheckTriggerInterval&&this.timeFromLastPopupShown>=this.realityCheckTriggerInterval}get userOverallLose(){return Math.max(this.userOverallBet-this.userOverallWin,0)}get sessionTime(){return Date.now()-this.sessionStart}get timeFromLastPopupShown(){return Date.now()-this.popupTriggeredTime}get timeToNextTrigger(){const e=Math.max(this.realityCheckTriggerInterval-this.timeFromLastPopupShown,0);return this.isRealityCheckEnabled?e:-1}}var ro=Object.defineProperty,ao=(t,e,i)=>e in t?ro(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ws=(t,e,i)=>ao(t,typeof e!="symbol"?e+"":e,i);class oo{constructor(){ws(this,"model"),ws(this,"checkTimeoutId",0),this.model=new no,this.checkTimeoutId=0,this.checkForReality=this.checkForReality.bind(this),this._gameEventHandler=this._gameEventHandler.bind(this)}initialize(){H.addListener(this._gameEventHandler)}startSession(e=60*60*60*1e3){this.model.sessionStart=Date.now(),this.model.popupTriggeredTime=Date.now(),this.model.userOverallBet=0,this.model.userOverallWin=0,this.model.realityCheckTriggerInterval=e,this.model.isRealityCheckEnabled=e!==void 0&&e>0,this._scheduleRealityCheck()}restartRealityCheckSession(){this.model.sessionStart=Date.now(),this.model.popupTriggeredTime=Date.now(),this._scheduleRealityCheck()}clearRealityCheckSchedule(){var e;this.checkTimeoutId!==void 0&&((e=this.model)!=null&&e.isRealityCheckEnabled)&&clearTimeout(this.checkTimeoutId)}checkForReality(){this.model.isNeedToShowPopup&&(this.model.isPopupActive=!0,n.showModal("common/ui/reality-check-popup",()=>{this.model.isPopupActive=!1,this.model.popupTriggeredTime=Date.now()})),this._scheduleRealityCheck()}updateSessionBet(e){e>0&&(this.model.userOverallBet+=e)}updateSessionWin(e){e>0&&(this.model.userOverallWin+=e)}_scheduleRealityCheck(){if(this.clearRealityCheckSchedule(),this.model.isRealityCheckEnabled){const e=this.model.timeToNextTrigger;this.checkTimeoutId=setTimeout(this.checkForReality,e)}}_gameEventHandler(e,i,s){switch(e){case"game_initialized":this.startSession(this._realityCheckInterval);break;case"finish_round_animations":this.checkForReality();break;case"pre_play":this.clearRealityCheckSchedule();break;case"play":this.updateSessionBet(n.data.balanceChargedForSpin),this.updateSessionWin(s.win);break}}get _realityCheckInterval(){var e,i,s;return((s=(i=(e=window.__OPTIONS__)==null?void 0:e.license_rules)==null?void 0:i.reality_check)==null?void 0:s.interval)||0}}const lo=new oo;var Ao=Object.defineProperty,ho=(t,e,i)=>e in t?Ao(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Fe=(t,e,i)=>ho(t,typeof e!="symbol"?e+"":e,i),uo=(t,e,i)=>new Promise((s,r)=>{var a=A=>{try{l(i.next(A))}catch(h){r(h)}},o=A=>{try{l(i.throw(A))}catch(h){r(h)}},l=A=>A.done?s(A.value):Promise.resolve(A.value).then(a,o);l((i=i.apply(t,e)).next())});const hn=class ki{constructor(){Fe(this,"replaySpinNumber",0),Fe(this,"replayData"),Fe(this,"started",!1),Fe(this,"buttonClickInProgress",!1),Fe(this,"buttonClickDelay",0),Fe(this,"purchaseFeatureName")}static get isReplay(){var e;return!!((e=window.__OPTIONS__)!=null&&e.replay)}static setDataByRoundView(e){var i;const s=window.__OPTIONS__.show_dump_based_round_info,r=s.extend_data?s.extend_data.balance:0;ki.isBonusRoundReplay=!r;const a=parseInt(s.mode)||0;e.defaultMathVariant=a;const o=s.bet*b.allOptions[0].base_bet/b.allOptions[a].base_bet;window.__OPTIONS__.locale=s.locale,window.__OPTIONS__.replay=[{needReplayUnpacking:!0,options:{available_bets:[o],default_bet:o,currency:s.currency},balance:r,flow:{round_id:1,last_action_id:"1_1",state:"ready",command:"init",available_actions:["init","spin"]}},{balance:r-s.full_bet,flow:{round_id:1,last_action_id:"1_1",state:"ready",command:"init",available_actions:["init","spin"],purchased_feature:(i=s.extend_data)!=null&&i.feature?{name:s.extend_data.feature}:void 0},outcome:{bet:s.bet,storage:{seed:s.seed,mode:s.mode}}}]}initData(){var e,i;let s=this.replayData=JSON.parse(JSON.stringify(((e=window.__OPTIONS__)==null?void 0:e.replay)||null));if(s&&((n.Sound.soundEnabled||n.Sound.musicEnabled)&&n.Sound.toggleFullSound(),(i=s[1])!=null&&i.free_rounds)){const r=Object.assign({},s[1].free_rounds);r.win=0,s[1].free_rounds.win=s[1].outcome.win,r.performed--,s[0].free_rounds=r}}getReplayData(e){var i;if(this.replayData&&e){if(this.replayData[0].needReplayUnpacking&&(n.settings.clear(),e.options)){this.replayData[0].needReplayUnpacking=!1;const s=[];n.data.game.api.currentClientSideDirectMath.playClientSideRound(this.replayData[1].outcome.storage.seed,s,{bet:this.replayData[1].outcome.bet});const r=s.length>1?s[s.length-1].balance-s[0].balance:s[0].spinWin;if(s.forEach((a,o)=>{const l=o===s.length-1,A=JSON.parse(JSON.stringify(this.replayData[1]));s.length>1&&(A.features={issued:s.length-1,left:s.length-1-o}),A.outcome.win=o===0?r:0,A.flow.available_actions[1]=l?"spin":"freespin",A.balance=this.replayData[1].balance+(l?r:0),this.replayData[1+o]=A}),ki.isBonusRoundReplay){const a=n.data.game.getCurrentCharge((i=this.replayData[1].flow.purchased_feature)==null?void 0:i.name);for(let o=0;o<this.replayData.length;o++)this.replayData[o].balance+=a}}if(e.command==="init")return this.replaySpinNumber=1,this.replayData[0];if(e.command==="spin"||e.command==="freespin")return this.purchaseFeatureName=void 0,this.replaySpinNumber>=this.replayData.length?(he.restartGame(),null):this.replayData[this.replaySpinNumber++]}}isNextSpinReplay(){var e,i;return((e=window.__OPTIONS__)==null?void 0:e.replay)&&this.replaySpinNumber<((i=window.__OPTIONS__)==null?void 0:i.replay.length)}update(){if(this.replayData){n.data.doNotStopOnPopupsCheckBox=!0,n.stage.scale.x=n.stage.scale.y=n.H/(n.H+108),n.stage.pivot.x=-8,n.stage.pivot.y=-100;const e=document.body,i=window.getComputedStyle(e),s=new dr(i.getPropertyValue("background-color"));if(n.all["replay-body-color-overlay"].shapeFillColor=s.toNumber(),this.purchaseFeatureName&&!this.buttonClickInProgress)if(this.buttonClickDelay)this.buttonClickDelay--;else{const r=n.currentContainer.findChildrenByType(ve).filter(o=>o.isCanBePressed);r.reverse();const a=n.data.game.findButtonForReplay(r,this.purchaseFeatureName);if(a){this.buttonClickInProgress=!0;const o=n.all["replay-hand"];be.delay(()=>{o.gotoLabelRecursive("show"),o.flyTo(a,!1,()=>{o.gotoLabelRecursive("click"),be.delay(()=>{n.time=Date.now(),a.onDown(null,"replay"),be.delay(()=>{this.buttonClickInProgress=!1,a.onUp(void 0,"replay")},10)},20,o)})},20,o)}}}}isPauseButton(){return this.started&&!n.__paused}isReplayButton(){return this.started&&!this.buttonClickInProgress&&!n.data.game.isSpinInProgress&&!this.replayData[this.replaySpinNumber]}restartButtonClick(){he.restartGame()}playButtonClick(){return uo(this,null,function*(){var e;if(this.isReplayButton())n.data.game.api.restartGame();else if(this.started)n.__paused=!n.__paused;else{this.started=!0;const i=n.all["spin-button"],s=(e=this.replayData[1].flow.purchased_feature)==null?void 0:e.name;s?this.purchaseFeatureName=s:i&&i.isCanBePressed&&i.click()}})}setSpeed(e){n.pixiApp.ticker.speed=e}isSpeed(e){return n.pixiApp.ticker.speed===e}};Fe(hn,"isBonusRoundReplay",!1);let $i=hn;var co=Object.defineProperty,fo=(t,e,i)=>e in t?co(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,dt=(t,e,i)=>fo(t,typeof e!="symbol"?e+"":e,i),Es=(t,e,i)=>new Promise((s,r)=>{var a=A=>{try{l(i.next(A))}catch(h){r(h)}},o=A=>{try{l(i.throw(A))}catch(h){r(h)}},l=A=>A.done?s(A.value):Promise.resolve(A.value).then(a,o);l((i=i.apply(t,e)).next())});let lt=0,Ai=0;const Bs="current-math-variant",Cs=t=>{let e=t.flow?t.flow.last_action_id:"-";const i=t.free_rounds;return i&&i.performed&&(e=[e,i.bet_level,i.count,i.performed,i.status,i.win].join(":")),e};function Is(){he.actionExec(window.__OPTIONS__.actions.deposit)}function wt(){he.restartGame()}let xs=!1;const un=class Z{constructor(){dt(this,"clientSideDirectMaths",[]),dt(this,"currentClientSideDirectMath"),dt(this,"replays",new $i),dt(this,"globalHandlers");var e,i,s,r,a;if(lt=0,!xs){xs=!0;let o=n.projectDesc.defaultMathVariant||0;const l=(i=(e=window.__OPTIONS__)==null?void 0:e.license_rules)==null?void 0:i.lines_count;if(l){const A=b.allOptions.findIndex(h=>h.name.toLocaleLowerCase()===l+" lines");A>=0&&(o=A)}ys.reapplyMathConfigs(((s=window.__OPTIONS__)!=null&&s.replay?o:(r=n.settings)==null?void 0:r.getItem(Bs,o))||0)}this.globalHandlers=[],n.data.gameTitle=n.projectDesc.title,(a=window.__OPTIONS__)!=null&&a.title?n.data.gameTitle=window.__OPTIONS__.title:window.document.title=n.data.gameTitle,n.data.debugSettings=new Js(n.projectDesc.APIGameId+"_debug")}initApi(e){An(),this.replays.initData(),this.initRequest(e),this.startBalanceChecking()}startBalanceChecking(){n.projectDesc.disableBalanceChecking||(Ai&&clearInterval(Ai),Ai=window.setInterval(()=>{vo()&&!lt&&this.requestCommand("init",e=>{var i;if(e&&((i=n.data.game)!=null&&i.isUpdateBalanceAllowed())){let s=Ps(e);typeof s=="number"&&yo(s)}},{balance:!0},!0)},1e3))}_createClientSideMaths(){this.clientSideDirectMaths=Ht.map(e=>new Ja(e)),this.setMathVariant(b.currentVariantId)}getBalance(e){return this.requestCommand("init",i=>e(Ps(i)),void 0,!0)}initRequest(e){return this.requestCommand("init",i=>{var s,r;const a=b.allOptions[0].base_bet;for(const o of b.allOptions){const l={available_bets:i.options.available_bets.map(A=>A/a*o.base_bet),math:i.options.math||o.math,currency:i.options.currency,default_bet:i.options.default_bet/a*o.base_bet};Object.assign(o,l)}n.data.backendOptions=JSON.parse(JSON.stringify(i.options)),this._createClientSideMaths(),i.isRestoring=!0,i.mode=(r=(s=i.outcome)==null?void 0:s.storage)==null?void 0:r.mode,typeof i.mode=="string"?this.setMathVariant(parseInt(i.mode)):this.setMathVariant(b.currentVariantId),i.options=b.currentConfig,this.currentClientSideDirectMath.unpackRoundDataFromResponse(i,!0),n.data.initData=i,this.onInitResponse(i),e(i)})}prepareRoundData(e){e.end.freeFeatures||(e.steps=e.steps.filter(i=>i[0].type!=="retrigger-feature"&&i[0].type!=="restart-feature")),n.data.spinData=e}spinRequest(e){return Es(this,arguments,function*(i,s={}){s.bet=n.data.bet/b.currentConfig.base_bet*Ht[0].base_bet,n.data.isNextSpinFree||(s.mode=b.currentVariantId.toString(),b.currentConfig.requestOptions&&Object.assign(s,b.currentConfig.requestOptions)),H.track("pre_play",void 0,{totalBet:s.bet,bet:n.data.isNextSpinFree?0:s.bet,isAutoSpin:n.data.isLastSpinIsAutoSpin,isFreeSpin:!!n.data.isNextSpinFree,isRespin:!!n.data.isNextSpinFree,purchasedFeature:s.purchased_feature});let r="spin";n.data.isNextSpinFree&&(r=n.data.spinData.flow.available_actions.find(a=>a==="freespin"||a==="respin")),this.requestCommand(r,a=>Es(this,null,function*(){var o,l,A,h,u,d,c,f,v;let y=0;if((o=a.end)!=null&&o.freeFeatures&&(y=a.end.freeFeatures[a.end.freeFeatures.length-1].totalWin),H.track("play",void 0,{spinMode:Z.trackingSpinMode,gameTotalWin:a.free_rounds?0:y,win:a.free_rounds?0:a.spinWin,totalBet:a.bet,bet:n.data.isNextSpinFree||a.free_rounds?0:a.bet,isFreeSpin:!!n.data.isNextSpinFree,isRespin:!1,isAutoSpin:n.data.isLastSpinIsAutoSpin,purchasedFeature:(A=(l=a.flow)==null?void 0:l.purchased_feature)==null?void 0:A.name,purchasedFeatureLevel:(u=(h=a.flow)==null?void 0:h.purchased_feature)==null?void 0:u.level,isFreeRound:!!a.free_rounds,gameFlow:a.flow}),((d=a.free_rounds)==null?void 0:d.status)==="played"){const x=yield new Promise(N=>this.getBalance(N));n.data.balance=a.balance.wallet=x-(a.balance.game||0)-(a.balance.free_rounds||0)}const F=(f=(c=a.outcome)==null?void 0:c.storage)==null?void 0:f.mode;if(typeof F=="string"){const x=parseInt(F);b.currentVariantId!=x&&this.setMathVariant(x)}(v=this.currentClientSideDirectMath)==null||v.unpackRoundDataFromResponse(a,!1),this.__applyCheatBeforeNextSpin=!1,this.prepareRoundData(a),i(a)}),s)})}getCurrencyDigits(e){const i=e.options.available_bets.slice();let s=e.options.currency,r=s.subunits,a=Math.log10(r);const o=d=>{let c=d.toString(),f=r.toString().length-1,v=c.indexOf(".");if(v>=0)return Math.min(f,c.length-1-v);for(;c[c.length-1]==="0"&&f;)f--,c=c.substring(0,c.length-1);return f};let l;const A=(()=>{const d=e.options.payTables||e.options.leveledPayTable||{};let c=Object.values(d).flat(Number.MAX_SAFE_INTEGER);return c.length&&isNaN(c[0])&&(c=c.map(f=>Object.values(f)).flat(Number.MAX_SAFE_INTEGER)),c})();b.allOptions[0].minPossibleWin&&A.push(b.allOptions[0].minPossibleWin);const u=A.map(d=>i.map(c=>(c||0)*d/b.allOptions[0].base_bet)).flat().filter(d=>d>0).map(o);return l=Math.max.apply(null,u),l=Math.min(a,l),Math.max(s.exponent||0,l)}onInitResponse(e){var i,s;if(po(e),n.data.currencyDigits=this.getCurrencyDigits(e),n.data.currencySubUnits=e.options.currency.subunits,n.data.currencyDivider=e.options.currency.subunits,n.data.currency=e.options.currency.code,n.data.bet=e.options.default_bet,e.end.freeFeatures)n.data.balance=e.balance;else{n.data.balance=e.balance-((i=e.free_rounds)!=null&&i.performed?0:e.spinWin);e:for(let r=e.steps.length-1;r>=0;r--){const a=e.steps[r];for(let o=a.length-1;o>=0;o--){const l=a[o];if(l.type==="finish-feature"){n.data.balance=e.balance-((s=e.free_rounds)!=null&&s.performed?0:l.totalWin);break e}}}}n.currentScene.gotoLabelRecursive("math-variant-"+b.currentVariantId+"-quick"),this.trackBalance(),this.prepareRoundData(e)}trackBalance(){H.track("balance_update",void 0,{amount:n.data.balance})}checkForMessagesToShow(e){!e||!e.messages||e.messages.forEach(i=>{let s=m.loadPrefab("thing-games-utils/api-message");s.findChildByName("title").text=i.title,s.findChildByName("message").text=i.text;const r=s.findChildByName("close-btn"),a=s.findChildrenByName("btn");let o=[],l;const A=()=>{i.intrusive||n.hideModal(l)};r.visible=!i.intrusive,r.onClickCallback=A,a.forEach((d,c)=>{let f=i.actions?i.actions[c]:null;d.visible=!!f,f&&(o.push(d),d.findChildByName("label").text=f.text,d.onClickCallback=()=>{Z.actionExec(f,A)})});let h=a[1].x-a[0].x,u=-Math.round(h*(o.length-1)/2);for(let d of o)d.x=u,u+=h;l=n.showModal(s)})}showError(e="some_error",i,s=!1){var r,a;let o="errors."+e;g.has(o)||(o="errors.default");let l=e==301,A=(a=(r=window.__OPTIONS__)==null?void 0:r.actions)==null?void 0:a.deposit;l&&!A&&(o+="nodep");let h="",u=i||g(o);console.error(u),H.track("game_error",e,{messageText:u}),l&&A?n.showQuestion(h,u,"buttons.deposit",()=>{Is(),wt()},"buttons.ok",wt,s):n.showQuestion(h,u,"buttons.ok",wt,void 0,s?wt:void 0,s)}request(e,i,s=1,r,a=!1){const o=this.replays.getReplayData(i);if(typeof o!="undefined")return Le.resolve(o,n.currentFader);let l;return i&&(r=r||{},r["Content-Type"]="application/json",l={body:JSON.stringify(i),method:"POST",headers:r}),$s.fetch(n.currentFader||n.currentContainer,e,"json",l,s,!0).catch(()=>{a||this.showError(0,g("errors.some_error"))})}addGlobalHandler(e){this.globalHandlers.push(e)}requestCommand(e,i,s,r=!1){mo();const a=r?void 0:m.loadPrefab("ui/loading-spinner");a&&n.currentScene.addChild(a),lt++,this.request(window.__OPTIONS__.api,{command:e,options:s},void 0,void 0,r).then(o=>{if(o){if(!r){if(this.handleDataErrors(o))return null;this.checkForMessagesToShow(o),e==="spin"||e==="freespin"||e==="respin"?this.saveRestoringData(o):e==="init"&&this.loadRestoringData(o);for(const l of this.globalHandlers)l(o)}i(o)}a&&a.remove(),lt--}).catch(o=>{console.error(o),Z.clearRestoringData(),r||this.showError(),a&&a.remove(),lt--})}handleDataErrors(e){var i;if(e){if(e.errors&&e.errors.length>0){let s=e.errors[0].code;return s===700?this.showCustomButtonsMessage(e.errors[0]):(s===105&&Z.__resetUser(),e.errors[0].bonus_game&&(s+="bonus_round"),this.showError(s,e.errors[0].text)),!0}else if(((i=e.free_rounds)==null?void 0:i.status)==="canceled")return this.showError(e.free_rounds.bonus_game?"206bonus_round":206),!0}else return this.showError(),!0}showCustomButtonsMessage(e){let i=m.loadPrefab("common/ui/sure-question700");i.findChildByName("title").text=e.desc,i.findChildByName("message").text=e.text;let s=i.findChildrenByName("btn"),r=[],a=e.buttons.filter(A=>A.action!=="history"||window.__OPTIONS__.actions.history);s.forEach((A,h)=>{let u=a[h];A.visible=u&&!0,A.visible&&(r.push(A),A.findChildByName("label").text=u.text,A.onClickCallback=()=>{switch(u.action){case"home":Z.gotoHome();break;case"history":Z.showHistory();break;case"deposit":Is(),this.restartGame();break;default:this.restartGame()}})});let o=s[1].x-s[0].x,l=-Math.round(o*(r.length-1)/2);for(let A of r)A.x=l,l+=o;n.showModal(i)}restartGame(){Z.restartGame()}static reapplyMathConfig(e){ys.reapplyMathConfigs(e)}setMathVariant(e){var i;n.settings.setItem(Bs,e),Z.reapplyMathConfig(e),this.currentClientSideDirectMath=this.clientSideDirectMaths[b.currentVariantId],(i=n.data.game)==null||i.applyNewMathVariant(this.currentClientSideDirectMath),n.currentScene.gotoLabelRecursive("math-variant-"+b.currentVariantId)}static __resetUser(){this.restartGame()}static restartGame(){n.replaceScene(n.currentScene.findChildrenByType(Tt).length?n.currentScene.name:"main")}static showHistory(){var e;Z.actionExec((e=window.__OPTIONS__)==null?void 0:e.actions.history)}gotoHome(){Z.gotoHome()}static gotoHome(){H.track("go_home"),Z.actionExec(window.__OPTIONS__.actions.return)}static actionExec(e,i=()=>{}){if(e)switch(H.track("action_exec",e.mode),e.mode){case"continue":i();break;case"open":n.openUrl(e.link),i();break;case"redirect":n.openUrl(e.link,"_top"),i();break;case"request":fetch(e.link),i();break;case"request_with_response":fetch(e.link).finally(()=>i());break;case"back":window.history.go(-1),i();break;default:e.link&&n.openUrl(e.link),i();break}}static clearRestoringData(){window.__OPTIONS__&&(n.settings.removeItem("USER_TOKEN_latestSpinResultTimeV2"+window.__OPTIONS__.cache_id),n.settings.removeItem("USER_TOKEN_latestSpinResultV2"+window.__OPTIONS__.cache_id))}saveRestoringData(e){window.__OPTIONS__&&(n.settings.setItem("USER_TOKEN_latestSpinResultV2"+window.__OPTIONS__.cache_id,JSON.parse(JSON.stringify(e))),n.settings.setItem("USER_TOKEN_latestSpinResultTimeV2"+window.__OPTIONS__.cache_id,Date.now()))}loadRestoringData(e){var i,s;if(window.__OPTIONS__&&Date.now()-n.settings.getItem("USER_TOKEN_latestSpinResultTimeV2"+window.__OPTIONS__.cache_id,0)<4*60*60*1e3){let r=JSON.parse(JSON.stringify(n.settings.getItem("USER_TOKEN_latestSpinResultV2"+window.__OPTIONS__.cache_id)));if(Cs(r)===Cs(e)){if(r.features&&!e.features&&((i=r.features.bonus_data)!=null&&i.respins_left||r.features.freespins_left))return;e.flow&&(e.flow.purchased_feature=(s=r.flow)==null?void 0:s.purchased_feature),e.mode=r.mode,e.outcome=r.outcome,e.features=r.features,e.bet=r.bet,e.isLocalRestoring=!0}return r}}};dt(un,"trackingSpinMode");let he=un;function po(t){let e=t.steps[0];if(e||(e=[{type:"canceled"}],t.steps.push(e)),t.start.values){const i=t.start.values.slice();i.reverse();for(const s of i)s.name.startsWith("spins-count")&&s.value++,e.unshift({type:"show-value-quick",value:s})}if(t.start.freeFeatures)for(const i of t.start.freeFeatures)e.unshift({type:"trigger-feature-quick",featureName:i.name,count:i.issued,spined:i.spined+1,totalWin:i.totalWin});if(t.end.freeFeatures)for(const i of t.end.freeFeatures)i.spined<i.issued&&!t.steps.find(s=>{const r=s[0];return(r.type==="trigger-feature"||r.type==="retrigger-feature"||r.type==="finish-feature")&&r.featureName===i.name})&&t.steps.push([{type:"feature-restore-popup",featureName:i.name,count:i.issued,spined:i.spined}])}lo.initialize();let cn=0;function mo(){cn=Date.now()}const go=5e3;function vo(){var t,e;if((t=window.__OPTIONS__)!=null&&t.replay)return!1;if(Date.now()>cn+go-500)return((e=n.data.game)==null?void 0:e.isUpdateBalanceAllowed())&&n.currentScene.name==="main"&&n.currentContainer===n.currentScene}function yo(t){n.data.balance=t}function Ps(t){let e=t.balance;return typeof e=="object"&&(e=e.wallet),e}const Ts={},bo=(t,e,i,s)=>{if(typeof Intl=="object"){let r=Ts[i];return r||(r=Intl.NumberFormat(g.getCurrentLanguageId().substring(0,2),{maximumFractionDigits:i,minimumFractionDigits:i}).format,Ts[i]=r),r(t/e)}return s?Di(t/e,i)+" "+s:Di(t/e,i)},Hi=(t,e)=>{let i=t.findChildrenByName(e);if(i.length<=1)return i[0];const s=i.filter(r=>r.worldVisible&&r.worldAlpha>0);return s[s.length-1]||i[i.length-1]};var Vi=function(t,e){return Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])},Vi(t,e)};function tt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vi(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var B=function(){return B=Object.assign||function(e){for(var i,s=1,r=arguments.length;s<r;s++){i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},B.apply(this,arguments)};function Ki(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i}function dn(t,e,i,s){var r=arguments.length,a=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a}function fn(t,e){return function(i,s){e(i,s,t)}}function _o(t,e,i,s,r,a){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var l=s.kind,A=l==="getter"?"get":l==="setter"?"set":"value",h=!e&&t?s.static?t:t.prototype:null,u=e||(h?Object.getOwnPropertyDescriptor(h,s.name):{}),d,c=!1,f=i.length-1;f>=0;f--){var v={};for(var y in s)v[y]=y==="access"?{}:s[y];for(var y in s.access)v.access[y]=s.access[y];v.addInitializer=function(x){if(c)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(x||null))};var F=(0,i[f])(l==="accessor"?{get:u.get,set:u.set}:u[A],v);if(l==="accessor"){if(F===void 0)continue;if(F===null||typeof F!="object")throw new TypeError("Object expected");(d=o(F.get))&&(u.get=d),(d=o(F.set))&&(u.set=d),(d=o(F.init))&&r.unshift(d)}else(d=o(F))&&(l==="field"?r.unshift(d):u[A]=d)}h&&Object.defineProperty(h,s.name,u),c=!0}function So(t,e,i){for(var s=arguments.length>2,r=0;r<e.length;r++)i=s?e[r].call(t,i):e[r].call(t);return s?i:void 0}function wo(t){return typeof t=="symbol"?t:"".concat(t)}function Eo(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function pn(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function mn(t,e,i,s){function r(a){return a instanceof i?a:new i(function(o){o(a)})}return new(i||(i=Promise))(function(a,o){function l(u){try{h(s.next(u))}catch(d){o(d)}}function A(u){try{h(s.throw(u))}catch(d){o(d)}}function h(u){u.done?a(u.value):r(u.value).then(l,A)}h((s=s.apply(t,e||[])).next())})}function gn(t,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,r,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(u){return A([h,u])}}function A(h){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(i=0)),i;)try{if(s=1,r&&(a=h[0]&2?r.return:h[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,h[1])).done)return a;switch(r=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,r=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){i.label=h[1];break}if(h[0]===6&&i.label<a[1]){i.label=a[1],a=h;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(h);break}a[2]&&i.ops.pop(),i.trys.pop();continue}h=e.call(t,i)}catch(u){h=[6,u],r=0}finally{s=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Xt=Object.create?function(t,e,i,s){s===void 0&&(s=i);var r=Object.getOwnPropertyDescriptor(e,i);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,r)}:function(t,e,i,s){s===void 0&&(s=i),t[s]=e[i]};function vn(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&Xt(e,t,i)}function Vt(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function es(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),r,a=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a}function yn(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(es(arguments[e]));return t}function bn(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var s=Array(t),r=0,e=0;e<i;e++)for(var a=arguments[e],o=0,l=a.length;o<l;o++,r++)s[r]=a[o];return s}function mt(t,e,i){if(i||arguments.length===2)for(var s=0,r=e.length,a;s<r;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}function ze(t){return this instanceof ze?(this.v=t,this):new ze(t)}function _n(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),r,a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(c){s[c]&&(r[c]=function(f){return new Promise(function(v,y){a.push([c,f,v,y])>1||l(c,f)})})}function l(c,f){try{A(s[c](f))}catch(v){d(a[0][3],v)}}function A(c){c.value instanceof ze?Promise.resolve(c.value.v).then(h,u):d(a[0][2],c)}function h(c){l("next",c)}function u(c){l("throw",c)}function d(c,f){c(f),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Sn(t){var e,i;return e={},s("next"),s("throw",function(r){throw r}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(r,a){e[r]=t[r]?function(o){return(i=!i)?{value:ze(t[r](o)),done:!1}:a?a(o):o}:a}}function wn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Vt=="function"?Vt(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(a){i[a]=t[a]&&function(o){return new Promise(function(l,A){o=t[a](o),r(l,A,o.done,o.value)})}}function r(a,o,l,A){Promise.resolve(A).then(function(h){a({value:h,done:l})},o)}}function En(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Bo=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function Bn(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&Xt(e,t,i);return Bo(e,t),e}function Cn(t){return t&&t.__esModule?t:{default:t}}function In(t,e,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(t):s?s.value:e.get(t)}function xn(t,e,i,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,i):r?r.value=i:e.set(t,i),i}function Pn(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Tn(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose]}if(typeof s!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}var Co=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var s=new Error(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function On(t){function e(s){t.error=t.hasError?new Co(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}function i(){for(;t.stack.length;){var s=t.stack.pop();try{var r=s.dispose&&s.dispose.call(s.value);if(s.async)return Promise.resolve(r).then(i,function(a){return e(a),i()})}catch(a){e(a)}}if(t.hasError)throw t.error}return i()}const Io={__extends:tt,__assign:B,__rest:Ki,__decorate:dn,__param:fn,__metadata:pn,__awaiter:mn,__generator:gn,__createBinding:Xt,__exportStar:vn,__values:Vt,__read:es,__spread:yn,__spreadArrays:bn,__spreadArray:mt,__await:ze,__asyncGenerator:_n,__asyncDelegator:Sn,__asyncValues:wn,__makeTemplateObject:En,__importStar:Bn,__importDefault:Cn,__classPrivateFieldGet:In,__classPrivateFieldSet:xn,__classPrivateFieldIn:Pn,__addDisposableResource:Tn,__disposeResources:On},AA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Tn,get __assign(){return B},__asyncDelegator:Sn,__asyncGenerator:_n,__asyncValues:wn,__await:ze,__awaiter:mn,__classPrivateFieldGet:In,__classPrivateFieldIn:Pn,__classPrivateFieldSet:xn,__createBinding:Xt,__decorate:dn,__disposeResources:On,__esDecorate:_o,__exportStar:vn,__extends:tt,__generator:gn,__importDefault:Cn,__importStar:Bn,__makeTemplateObject:En,__metadata:pn,__param:fn,__propKey:wo,__read:es,__rest:Ki,__runInitializers:So,__setFunctionName:Eo,__spread:yn,__spreadArray:mt,__spreadArrays:bn,__values:Vt,default:Io},Symbol.toStringTag,{value:"Module"}));var w;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(w||(w={}));var M;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(M||(M={}));var $e;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})($e||($e={}));function Os(t){return t.type===M.literal}function xo(t){return t.type===M.argument}function Fn(t){return t.type===M.number}function Mn(t){return t.type===M.date}function Rn(t){return t.type===M.time}function Nn(t){return t.type===M.select}function Dn(t){return t.type===M.plural}function Po(t){return t.type===M.pound}function Ln(t){return t.type===M.tag}function kn(t){return!!(t&&typeof t=="object"&&t.type===$e.number)}function Gi(t){return!!(t&&typeof t=="object"&&t.type===$e.dateTime)}var Hn=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,To=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Oo(t){var e={};return t.replace(To,function(i){var s=i.length;switch(i[0]){case"G":e.era=s===4?"long":s===5?"narrow":"short";break;case"y":e.year=s===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][s-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][s-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=s===4?"long":s===5?"narrow":"short";break;case"e":if(s<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][s-4];break;case"c":if(s<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][s-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][s-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][s-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][s-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][s-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][s-1];break;case"s":e.second=["numeric","2-digit"][s-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=s<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var Fo=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function Mo(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(Fo).filter(function(c){return c.length>0}),i=[],s=0,r=e;s<r.length;s++){var a=r[s],o=a.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var l=o[0],A=o.slice(1),h=0,u=A;h<u.length;h++){var d=u[h];if(d.length===0)throw new Error("Invalid number skeleton")}i.push({stem:l,options:A})}return i}function Ro(t){return t.replace(/^(.*?)-/,"")}var Fs=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Vn=/^(@+)?(\+|#+)?[rs]?$/g,No=/(\*)(0+)|(#+)(0+)|(0+)/g,Gn=/^(0+)$/;function Ms(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(Vn,function(i,s,r){return typeof r!="string"?(e.minimumSignificantDigits=s.length,e.maximumSignificantDigits=s.length):r==="+"?e.minimumSignificantDigits=s.length:s[0]==="#"?e.maximumSignificantDigits=s.length:(e.minimumSignificantDigits=s.length,e.maximumSignificantDigits=s.length+(typeof r=="string"?r.length:0)),""}),e}function Wn(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Do(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var i=t.slice(0,2);if(i==="+!"?(e.signDisplay="always",t=t.slice(2)):i==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!Gn.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function Rs(t){var e={},i=Wn(t);return i||e}function Lo(t){for(var e={},i=0,s=t;i<s.length;i++){var r=s[i];switch(r.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=r.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=Ro(r.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=B(B(B({},e),{notation:"scientific"}),r.options.reduce(function(A,h){return B(B({},A),Rs(h))},{}));continue;case"engineering":e=B(B(B({},e),{notation:"engineering"}),r.options.reduce(function(A,h){return B(B({},A),Rs(h))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(r.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(No,function(A,h,u,d,c,f){if(h)e.minimumIntegerDigits=u.length;else{if(d&&c)throw new Error("We currently do not support maximum integer digits");if(f)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Gn.test(r.stem)){e.minimumIntegerDigits=r.stem.length;continue}if(Fs.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(Fs,function(A,h,u,d,c,f){return u==="*"?e.minimumFractionDigits=h.length:d&&d[0]==="#"?e.maximumFractionDigits=d.length:c&&f?(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length+f.length):(e.minimumFractionDigits=h.length,e.maximumFractionDigits=h.length),""});var a=r.options[0];a==="w"?e=B(B({},e),{trailingZeroDisplay:"stripIfInteger"}):a&&(e=B(B({},e),Ms(a)));continue}if(Vn.test(r.stem)){e=B(B({},e),Ms(r.stem));continue}var o=Wn(r.stem);o&&(e=B(B({},e),o));var l=Do(r.stem);l&&(e=B(B({},e),l))}return e}var Et={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function ko(t,e){for(var i="",s=0;s<t.length;s++){var r=t.charAt(s);if(r==="j"){for(var a=0;s+1<t.length&&t.charAt(s+1)===r;)a++,s++;var o=1+(a&1),l=a<2?1:3+(a>>1),A="a",h=Ho(e);for((h=="H"||h=="k")&&(l=0);l-- >0;)i+=A;for(;o-- >0;)i=h+i}else r==="J"?i+="H":i+=r}return i}function Ho(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var i=t.language,s;i!=="root"&&(s=t.maximize().region);var r=Et[s||""]||Et[i||""]||Et["".concat(i,"-001")]||Et["001"];return r[0]}var hi,Vo=new RegExp("^".concat(Hn.source,"*")),Go=new RegExp("".concat(Hn.source,"*$"));function E(t,e){return{start:t,end:e}}var Wo=!!String.prototype.startsWith&&"_a".startsWith("a",1),Uo=!!String.fromCodePoint,Qo=!!Object.fromEntries,jo=!!String.prototype.codePointAt,Xo=!!String.prototype.trimStart,Yo=!!String.prototype.trimEnd,Zo=!!Number.isSafeInteger,qo=Zo?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},Wi=!0;try{var Jo=Qn("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Wi=((hi=Jo.exec("a"))===null||hi===void 0?void 0:hi[0])==="a"}catch(t){Wi=!1}var Ns=Wo?function(e,i,s){return e.startsWith(i,s)}:function(e,i,s){return e.slice(s,s+i.length)===i},Ui=Uo?String.fromCodePoint:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s="",r=e.length,a=0,o;r>a;){if(o=e[a++],o>1114111)throw RangeError(o+" is not a valid code point");s+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return s},Ds=Qo?Object.fromEntries:function(e){for(var i={},s=0,r=e;s<r.length;s++){var a=r[s],o=a[0],l=a[1];i[o]=l}return i},Un=jo?function(e,i){return e.codePointAt(i)}:function(e,i){var s=e.length;if(!(i<0||i>=s)){var r=e.charCodeAt(i),a;return r<55296||r>56319||i+1===s||(a=e.charCodeAt(i+1))<56320||a>57343?r:(r-55296<<10)+(a-56320)+65536}},zo=Xo?function(e){return e.trimStart()}:function(e){return e.replace(Vo,"")},$o=Yo?function(e){return e.trimEnd()}:function(e){return e.replace(Go,"")};function Qn(t,e){return new RegExp(t,e)}var Qi;if(Wi){var Ls=Qn("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Qi=function(e,i){var s;Ls.lastIndex=i;var r=Ls.exec(e);return(s=r[1])!==null&&s!==void 0?s:""}}else Qi=function(e,i){for(var s=[];;){var r=Un(e,i);if(r===void 0||jn(r)||il(r))break;s.push(r),i+=r>=65536?2:1}return Ui.apply(void 0,s)};var Ko=function(){function t(e,i){i===void 0&&(i={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!i.ignoreTag,this.locale=i.locale,this.requiresOtherClause=!!i.requiresOtherClause,this.shouldParseSkeletons=!!i.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,i,s){for(var r=[];!this.isEOF();){var a=this.char();if(a===123){var o=this.parseArgument(e,s);if(o.err)return o;r.push(o.val)}else{if(a===125&&e>0)break;if(a===35&&(i==="plural"||i==="selectordinal")){var l=this.clonePosition();this.bump(),r.push({type:M.pound,location:E(l,this.clonePosition())})}else if(a===60&&!this.ignoreTag&&this.peek()===47){if(s)break;return this.error(w.UNMATCHED_CLOSING_TAG,E(this.clonePosition(),this.clonePosition()))}else if(a===60&&!this.ignoreTag&&ji(this.peek()||0)){var o=this.parseTag(e,i);if(o.err)return o;r.push(o.val)}else{var o=this.parseLiteral(e,i);if(o.err)return o;r.push(o.val)}}}return{val:r,err:null}},t.prototype.parseTag=function(e,i){var s=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:M.literal,value:"<".concat(r,"/>"),location:E(s,this.clonePosition())},err:null};if(this.bumpIf(">")){var a=this.parseMessage(e+1,i,!0);if(a.err)return a;var o=a.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!ji(this.char()))return this.error(w.INVALID_TAG,E(l,this.clonePosition()));var A=this.clonePosition(),h=this.parseTagName();return r!==h?this.error(w.UNMATCHED_CLOSING_TAG,E(A,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:M.tag,value:r,children:o,location:E(s,this.clonePosition())},err:null}:this.error(w.INVALID_TAG,E(l,this.clonePosition())))}else return this.error(w.UNCLOSED_TAG,E(s,this.clonePosition()))}else return this.error(w.INVALID_TAG,E(s,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&tl(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,i){for(var s=this.clonePosition(),r="";;){var a=this.tryParseQuote(i);if(a){r+=a;continue}var o=this.tryParseUnquoted(e,i);if(o){r+=o;continue}var l=this.tryParseLeftAngleBracket();if(l){r+=l;continue}break}var A=E(s,this.clonePosition());return{val:{type:M.literal,value:r,location:A},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!el(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var i=[this.char()];for(this.bump();!this.isEOF();){var s=this.char();if(s===39)if(this.peek()===39)i.push(39),this.bump();else{this.bump();break}else i.push(s);this.bump()}return Ui.apply(void 0,i)},t.prototype.tryParseUnquoted=function(e,i){if(this.isEOF())return null;var s=this.char();return s===60||s===123||s===35&&(i==="plural"||i==="selectordinal")||s===125&&e>0?null:(this.bump(),Ui(s))},t.prototype.parseArgument=function(e,i){var s=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(w.EXPECT_ARGUMENT_CLOSING_BRACE,E(s,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(w.EMPTY_ARGUMENT,E(s,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(w.MALFORMED_ARGUMENT,E(s,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(w.EXPECT_ARGUMENT_CLOSING_BRACE,E(s,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:M.argument,value:r,location:E(s,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(w.EXPECT_ARGUMENT_CLOSING_BRACE,E(s,this.clonePosition())):this.parseArgumentOptions(e,i,r,s);default:return this.error(w.MALFORMED_ARGUMENT,E(s,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),i=this.offset(),s=Qi(this.message,i),r=i+s.length;this.bumpTo(r);var a=this.clonePosition(),o=E(e,a);return{value:s,location:o}},t.prototype.parseArgumentOptions=function(e,i,s,r){var a,o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,A=this.clonePosition();switch(l){case"":return this.error(w.EXPECT_ARGUMENT_TYPE,E(o,A));case"number":case"date":case"time":{this.bumpSpace();var h=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),d=this.parseSimpleArgStyleIfPossible();if(d.err)return d;var c=$o(d.val);if(c.length===0)return this.error(w.EXPECT_ARGUMENT_STYLE,E(this.clonePosition(),this.clonePosition()));var f=E(u,this.clonePosition());h={style:c,styleLocation:f}}var v=this.tryParseArgumentClose(r);if(v.err)return v;var y=E(r,this.clonePosition());if(h&&Ns(h==null?void 0:h.style,"::",0)){var F=zo(h.style.slice(2));if(l==="number"){var d=this.parseNumberSkeletonFromString(F,h.styleLocation);return d.err?d:{val:{type:M.number,value:s,location:y,style:d.val},err:null}}else{if(F.length===0)return this.error(w.EXPECT_DATE_TIME_SKELETON,y);var x=F;this.locale&&(x=ko(F,this.locale));var c={type:$e.dateTime,pattern:x,location:h.styleLocation,parsedOptions:this.shouldParseSkeletons?Oo(x):{}},N=l==="date"?M.date:M.time;return{val:{type:N,value:s,location:y,style:c},err:null}}}return{val:{type:l==="number"?M.number:l==="date"?M.date:M.time,value:s,location:y,style:(a=h==null?void 0:h.style)!==null&&a!==void 0?a:null},err:null}}case"plural":case"selectordinal":case"select":{var _=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(w.EXPECT_SELECT_ARGUMENT_OPTIONS,E(_,B({},_)));this.bumpSpace();var J=this.parseIdentifierIfPossible(),$=0;if(l!=="select"&&J.value==="offset"){if(!this.bumpIf(":"))return this.error(w.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,E(this.clonePosition(),this.clonePosition()));this.bumpSpace();var d=this.tryParseDecimalInteger(w.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,w.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(d.err)return d;this.bumpSpace(),J=this.parseIdentifierIfPossible(),$=d.val}var K=this.tryParsePluralOrSelectOptions(e,l,i,J);if(K.err)return K;var v=this.tryParseArgumentClose(r);if(v.err)return v;var de=E(r,this.clonePosition());return l==="select"?{val:{type:M.select,value:s,options:Ds(K.val),location:de},err:null}:{val:{type:M.plural,value:s,options:Ds(K.val),offset:$,pluralType:l==="plural"?"cardinal":"ordinal",location:de},err:null}}default:return this.error(w.INVALID_ARGUMENT_TYPE,E(o,A))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(w.EXPECT_ARGUMENT_CLOSING_BRACE,E(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,i=this.clonePosition();!this.isEOF();){var s=this.char();switch(s){case 39:{this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(w.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,E(r,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(i.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(i.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,i){var s=[];try{s=Mo(e)}catch(r){return this.error(w.INVALID_NUMBER_SKELETON,i)}return{val:{type:$e.number,tokens:s,location:i,parsedOptions:this.shouldParseSkeletons?Lo(s):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,i,s,r){for(var a,o=!1,l=[],A=new Set,h=r.value,u=r.location;;){if(h.length===0){var d=this.clonePosition();if(i!=="select"&&this.bumpIf("=")){var c=this.tryParseDecimalInteger(w.EXPECT_PLURAL_ARGUMENT_SELECTOR,w.INVALID_PLURAL_ARGUMENT_SELECTOR);if(c.err)return c;u=E(d,this.clonePosition()),h=this.message.slice(d.offset,this.offset())}else break}if(A.has(h))return this.error(i==="select"?w.DUPLICATE_SELECT_ARGUMENT_SELECTOR:w.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);h==="other"&&(o=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error(i==="select"?w.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:w.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,E(this.clonePosition(),this.clonePosition()));var v=this.parseMessage(e+1,i,s);if(v.err)return v;var y=this.tryParseArgumentClose(f);if(y.err)return y;l.push([h,{value:v.val,location:E(f,this.clonePosition())}]),A.add(h),this.bumpSpace(),a=this.parseIdentifierIfPossible(),h=a.value,u=a.location}return l.length===0?this.error(i==="select"?w.EXPECT_SELECT_ARGUMENT_SELECTOR:w.EXPECT_PLURAL_ARGUMENT_SELECTOR,E(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(w.MISSING_OTHER_CLAUSE,E(this.clonePosition(),this.clonePosition())):{val:l,err:null}},t.prototype.tryParseDecimalInteger=function(e,i){var s=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(s=-1);for(var a=!1,o=0;!this.isEOF();){var l=this.char();if(l>=48&&l<=57)a=!0,o=o*10+(l-48),this.bump();else break}var A=E(r,this.clonePosition());return a?(o*=s,qo(o)?{val:o,err:null}:this.error(i,A)):this.error(e,A)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var i=Un(this.message,e);if(i===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return i},t.prototype.error=function(e,i){return{val:null,err:{kind:e,message:this.message,location:i}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(Ns(this.message,e,this.offset())){for(var i=0;i<e.length;i++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var i=this.offset(),s=this.message.indexOf(e,i);return s>=0?(this.bumpTo(s),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var i=this.offset();if(i===e)break;if(i>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&jn(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),i=this.offset(),s=this.message.charCodeAt(i+(e>=65536?2:1));return s!=null?s:null},t}();function ji(t){return t>=97&&t<=122||t>=65&&t<=90}function el(t){return ji(t)||t===47}function tl(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function jn(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function il(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function Xi(t){t.forEach(function(e){if(delete e.location,Nn(e)||Dn(e))for(var i in e.options)delete e.options[i].location,Xi(e.options[i].value);else Fn(e)&&kn(e.style)||(Mn(e)||Rn(e))&&Gi(e.style)?delete e.style.location:Ln(e)&&Xi(e.children)})}function Xn(t,e){e===void 0&&(e={}),e=B({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var i=new Ko(t,e).parse();if(i.err){var s=SyntaxError(w[i.err.kind]);throw s.location=i.err.location,s.originalMessage=i.err.message,s}return e!=null&&e.captureLocation||Xi(i.val),i.val}var hA=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function sl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function uA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),i}var ts={};Object.defineProperty(ts,"__esModule",{value:!0});var Yn=ts.shouldPolyfill=void 0;function nl(){return typeof Intl=="undefined"||!("getCanonicalLocales"in Intl)||Intl.getCanonicalLocales("und-x-private")[0]==="x-private"}Yn=ts.shouldPolyfill=nl;var is={};Object.defineProperty(is,"__esModule",{value:!0});var Zn=is.shouldPolyfill=void 0;function rl(){try{return new Intl.Locale("und-x-private").toString()==="x-private"}catch(t){return!0}}function al(){return!("Locale"in Intl)||rl()}Zn=is.shouldPolyfill=al;var ss={exports:{}};function ol(t,e){var i=e&&e.cache?e.cache:dl,s=e&&e.serializer?e.serializer:cl,r=e&&e.strategy?e.strategy:Al;return r(t,{cache:i,serializer:s})}function ll(t){return t==null||typeof t=="number"||typeof t=="boolean"}function qn(t,e,i,s){var r=ll(s)?s:i(s),a=e.get(r);return typeof a=="undefined"&&(a=t.call(this,s),e.set(r,a)),a}function Jn(t,e,i){var s=Array.prototype.slice.call(arguments,3),r=i(s),a=e.get(r);return typeof a=="undefined"&&(a=t.apply(this,s),e.set(r,a)),a}function ns(t,e,i,s,r){return i.bind(e,t,s,r)}function Al(t,e){var i=t.length===1?qn:Jn;return ns(t,this,i,e.cache.create(),e.serializer)}function hl(t,e){var i=Jn;return ns(t,this,i,e.cache.create(),e.serializer)}function ul(t,e){var i=qn;return ns(t,this,i,e.cache.create(),e.serializer)}function cl(){return JSON.stringify(arguments)}function Yt(){this.cache=Object.create(null)}Yt.prototype.has=function(t){return t in this.cache};Yt.prototype.get=function(t){return this.cache[t]};Yt.prototype.set=function(t,e){this.cache[t]=e};var dl={create:function(){return new Yt}};ss.exports=ol;ss.exports.strategies={variadic:hl,monadic:ul};var fl=ss.exports;const xt=sl(fl);function ui(t,e){var i=e&&e.cache?e.cache:bl,s=e&&e.serializer?e.serializer:yl,r=e&&e.strategy?e.strategy:ml;return r(t,{cache:i,serializer:s})}function pl(t){return t==null||typeof t=="number"||typeof t=="boolean"}function zn(t,e,i,s){var r=pl(s)?s:i(s),a=e.get(r);return typeof a=="undefined"&&(a=t.call(this,s),e.set(r,a)),a}function $n(t,e,i){var s=Array.prototype.slice.call(arguments,3),r=i(s),a=e.get(r);return typeof a=="undefined"&&(a=t.apply(this,s),e.set(r,a)),a}function rs(t,e,i,s,r){return i.bind(e,t,s,r)}function ml(t,e){var i=t.length===1?zn:$n;return rs(t,this,i,e.cache.create(),e.serializer)}function gl(t,e){return rs(t,this,$n,e.cache.create(),e.serializer)}function vl(t,e){return rs(t,this,zn,e.cache.create(),e.serializer)}var yl=function(){return JSON.stringify(arguments)};function as(){this.cache=Object.create(null)}as.prototype.get=function(t){return this.cache[t]};as.prototype.set=function(t,e){this.cache[t]=e};var bl={create:function(){return new as}},ci={variadic:gl,monadic:vl},Ke;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(Ke||(Ke={}));var Zt=function(t){tt(e,t);function e(i,s,r){var a=t.call(this,i)||this;return a.code=s,a.originalMessage=r,a}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),ks=function(t){tt(e,t);function e(i,s,r,a){return t.call(this,'Invalid values for "'.concat(i,'": "').concat(s,'". Options are "').concat(Object.keys(r).join('", "'),'"'),Ke.INVALID_VALUE,a)||this}return e}(Zt),_l=function(t){tt(e,t);function e(i,s,r){return t.call(this,'Value for "'.concat(i,'" must be of type ').concat(s),Ke.INVALID_VALUE,r)||this}return e}(Zt),Sl=function(t){tt(e,t);function e(i,s){return t.call(this,'The intl string context variable "'.concat(i,'" was not provided to the string "').concat(s,'"'),Ke.MISSING_VALUE,s)||this}return e}(Zt),G;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(G||(G={}));function wl(t){return t.length<2?t:t.reduce(function(e,i){var s=e[e.length-1];return!s||s.type!==G.literal||i.type!==G.literal?e.push(i):s.value+=i.value,e},[])}function El(t){return typeof t=="function"}function Pt(t,e,i,s,r,a,o){if(t.length===1&&Os(t[0]))return[{type:G.literal,value:t[0].value}];for(var l=[],A=0,h=t;A<h.length;A++){var u=h[A];if(Os(u)){l.push({type:G.literal,value:u.value});continue}if(Po(u)){typeof a=="number"&&l.push({type:G.literal,value:i.getNumberFormat(e).format(a)});continue}var d=u.value;if(!(r&&d in r))throw new Sl(d,o);var c=r[d];if(xo(u)){(!c||typeof c=="string"||typeof c=="number")&&(c=typeof c=="string"||typeof c=="number"?String(c):""),l.push({type:typeof c=="string"?G.literal:G.object,value:c});continue}if(Mn(u)){var f=typeof u.style=="string"?s.date[u.style]:Gi(u.style)?u.style.parsedOptions:void 0;l.push({type:G.literal,value:i.getDateTimeFormat(e,f).format(c)});continue}if(Rn(u)){var f=typeof u.style=="string"?s.time[u.style]:Gi(u.style)?u.style.parsedOptions:s.time.medium;l.push({type:G.literal,value:i.getDateTimeFormat(e,f).format(c)});continue}if(Fn(u)){var f=typeof u.style=="string"?s.number[u.style]:kn(u.style)?u.style.parsedOptions:void 0;f&&f.scale&&(c=c*(f.scale||1)),l.push({type:G.literal,value:i.getNumberFormat(e,f).format(c)});continue}if(Ln(u)){var v=u.children,y=u.value,F=r[y];if(!El(F))throw new _l(y,"function",o);var x=Pt(v,e,i,s,r,a),N=F(x.map(function($){return $.value}));Array.isArray(N)||(N=[N]),l.push.apply(l,N.map(function($){return{type:typeof $=="string"?G.literal:G.object,value:$}}))}if(Nn(u)){var _=u.options[c]||u.options.other;if(!_)throw new ks(u.value,c,Object.keys(u.options),o);l.push.apply(l,Pt(_.value,e,i,s,r));continue}if(Dn(u)){var _=u.options["=".concat(c)];if(!_){if(!Intl.PluralRules)throw new Zt(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ke.MISSING_INTL_API,o);var J=i.getPluralRules(e,{type:u.pluralType}).select(c-(u.offset||0));_=u.options[J]||u.options.other}if(!_)throw new ks(u.value,c,Object.keys(u.options),o);l.push.apply(l,Pt(_.value,e,i,s,r,c-(u.offset||0)));continue}}return wl(l)}function Bl(t,e){return e?B(B(B({},t||{}),e||{}),Object.keys(t).reduce(function(i,s){return i[s]=B(B({},t[s]),e[s]||{}),i},{})):t}function Cl(t,e){return e?Object.keys(t).reduce(function(i,s){return i[s]=Bl(t[s],e[s]),i},B({},t)):t}function di(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,i){t[e]=i}}}}}function Il(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:ui(function(){for(var e,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new((e=Intl.NumberFormat).bind.apply(e,mt([void 0],i,!1)))},{cache:di(t.number),strategy:ci.variadic}),getDateTimeFormat:ui(function(){for(var e,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new((e=Intl.DateTimeFormat).bind.apply(e,mt([void 0],i,!1)))},{cache:di(t.dateTime),strategy:ci.variadic}),getPluralRules:ui(function(){for(var e,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new((e=Intl.PluralRules).bind.apply(e,mt([void 0],i,!1)))},{cache:di(t.pluralRules),strategy:ci.variadic})}}var xl=function(){function t(e,i,s,r){var a=this;if(i===void 0&&(i=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(A){var h=a.formatToParts(A);if(h.length===1)return h[0].value;var u=h.reduce(function(d,c){return!d.length||c.type!==G.literal||typeof d[d.length-1]!="string"?d.push(c.value):d[d.length-1]+=c.value,d},[]);return u.length<=1?u[0]||"":u},this.formatToParts=function(A){return Pt(a.ast,a.locales,a.formatters,a.formats,A,void 0,a.message)},this.resolvedOptions=function(){var A;return{locale:((A=a.resolvedLocale)===null||A===void 0?void 0:A.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=i,this.resolvedLocale=t.resolveLocale(i),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=r||{};o.formatters;var l=Ki(o,["formatters"]);this.ast=t.__parse(e,B(B({},l),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Cl(t.formats,s),this.formatters=r&&r.formatters||Il(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(typeof Intl.Locale!="undefined"){var i=Intl.NumberFormat.supportedLocalesOf(e);return i.length>0?new Intl.Locale(i[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=Xn,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}();const Gt=[];Yn()&&Gt.push(Ft(()=>import("./polyfill-Bqv-txeS.js").then(t=>t.p),__vite__mapDeps([0,1]),import.meta.url));Zn()&&Gt.push(Ft(()=>import("./polyfill-BD6wReFT.js").then(t=>t.p),__vite__mapDeps([2,1]),import.meta.url));Gt.length&&(n.loadingAdd("l10n polyfills"),Promise.all(Gt).then(()=>{n.loadingRemove("l10n polyfills")}));const Pl={getNumberFormat:xt((t,e)=>new Intl.NumberFormat(t,e)),getDateTimeFormat:xt((t,e)=>new Intl.DateTimeFormat(t,e)),getPluralRules:xt((t,e)=>new Intl.PluralRules(t,e))},Tl=xt(Xn);g.messageProcessor=(t,e)=>{const i={};if(typeof e=="object")for(const s in e)i[s.replace(/^\{|\}$/g,"")]=e[s];i.count=typeof e=="number"?e:e&&e["%d"]||10;try{return new xl(Tl(t),g.getCurrentLanguageId(),void 0,{formatters:Pl}).format(i)}catch(s){}return t};O.prototype.getGlobalRotation=function(){let e=this.rotation,i=this.parent;for(;i&&i!==n.stage;)e+=i.rotation,i=i.parent;return e};O.prototype.getScenePosition=function(e,i=!1){return n.stage.toLocal(this,this.parent,e,i)};O.prototype.getRootContainer=function(){let e=this;for(;e&&e.parent!==n.stage&&e.parent;)e=e.parent;return e};O.prototype.detachFromParent=function(){this.parent&&this.parent.removeChild(this)};O.prototype.init=function(){};O.prototype.onRemove=function(){};O.prototype.remove=function(){m.destroyObjectAndChildren(this,!0)};O.prototype.removeWithoutHolder=function(){m.destroyObjectAndChildren(this)};O.prototype.findParentByType=function(t){let e=this.parent;for(;e&&!(e instanceof t);)e=e.parent;return e};O.prototype.findParentByName=function(t){let e=this.parent;for(;e&&e.name!==t;)e=e.parent;return e};O.prototype.addFilter=function(e){this.filters?this.filters.push(e):this.filters=[e]};O.prototype.removeFilter=function(e){var i;let s=(i=this.filters)==null?void 0:i.indexOf(e);s>=0&&this.filters.splice(s,1)};O.prototype.update=function(){for(let e of this.children)e.update()};let Kn="",Yi;const Ol=t=>{t.name===Kn&&(Yi=t)};O.prototype.findChildByName=function(e){return Kn=e,Yi=void 0,this.forAllChildren(Ol),Yi};let et,er;const Fl=t=>{t instanceof er&&et.push(t)};O.prototype.findChildrenByType=function(t){return er=t,et=[],this.forAllChildren(Fl),et};let tr;const Ml=t=>{t.name===tr&&et.push(t)};O.prototype.findChildrenByName=function(t){return tr=t,et=[],this.forAllChildren(Ml),et};O.prototype.forAllChildren=function(t){for(let e of this.children)t(e),e.forAllChildren(t)};Object.defineProperty(O.prototype,"isCanBePressed",{get:function(){if(!this.interactive||n.isAllButtonsDisabled)return!1;let t=this.parent;for(;t!==n.stage&&t.interactiveChildren&&t.visible;)if(t=t.parent,!t)return!1;return t.interactiveChildren&&t.visible},enumerable:!0});Object.defineProperties(O.prototype,{"scale.x":{get:function(){return this.transform.scale.x},set:function(t){this.transform.scale.x=t},configurable:!0},"scale.y":{get:function(){return this.transform.scale.y},set:function(t){this.transform.scale.y=t},configurable:!0},"skew.x":{get:function(){return this.transform.skew.x},set:function(t){this.transform.skew.x=t},configurable:!0},"skew.y":{get:function(){return this.transform.skew.y},set:function(t){this.transform.skew.y=t},configurable:!0},"pivot.x":{get:function(){return this.transform.pivot.x},set:function(t){this.transform.pivot.x=t},configurable:!0},"pivot.y":{get:function(){return this.transform.pivot.y},set:function(t){this.transform.pivot.y=t},configurable:!0}});O.prototype.gotoLabelRecursive=function(t){for(let e of this.children)e.gotoLabelRecursive(t)};var Rl=Object.defineProperty,Nl=(t,e,i)=>e in t?Rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Pe=(t,e,i)=>Nl(t,typeof e!="symbol"?e+"":e,i);class Dl extends O{constructor(){super(...arguments),Pe(this,"appliedInitData"),Pe(this,"options"),Pe(this,"ownerGame"),Pe(this,"active"),Pe(this,"minPrice",0),Pe(this,"restoreMathVariantOnPopupCancel",null),Pe(this,"_isDollarPathContainer",!0)}init(){n.$=this,super.init(),this.options=null,this.active=void 0,this.appliedInitData=void 0,this.ownerGame=n.data.game,this.ownerGame.onStepStart(this.onSlotStepStart,this),this.ownerGame.onStepEnd(this.onSlotStepEnd,this),this.ownerGame.onGameInit(this.onSlotInit,this)}get canOpenPopup(){return n.data.game.canChangeBet}openBuyPopup(){typeof b.currentConfig.buyPopupSwitchesToConfig=="number"&&(this.restoreMathVariantOnPopupCancel=b.currentVariantId,he.clearRestoringData(),n.data.game.api.setMathVariant(b.currentConfig.buyPopupSwitchesToConfig));const e=m.loadPrefab("common/buy/popup");n.all["popups-layer"].addChild(e),e.setScreenComponent(this),n.data.game.playFirstSound("snd/open_buy_click","click")}onSlotInit(e){var i,s;this.options=(s=(i=e.options)==null?void 0:i.buy_features)==null?void 0:s.features,this.initBuyFeatures(e.options)}onSlotStepStart(e,i){var s,r,a,o;this.appliedInitData!==i&&(this.appliedInitData=i,i.options&&this.initBuyFeatures(i.options),(i.start.purchased_feature||(r=(s=i.flow)==null?void 0:s.purchased_feature)!=null&&r.name)&&this.setActive(!0,(o=(a=i.flow)==null?void 0:a.purchased_feature)==null?void 0:o.name))}setActive(e,i){this.interactiveChildren=!e,e?(this.restoreMathVariantOnPopupCancel=null,this.active={},this.active[i]=!0):this.active=void 0}onSlotStepEnd(e,i){for(const s of e)s.type==="finish-feature"&&this.setActive(!1)}update(){if(n.$=this,this.options){this.minPrice=Number.MAX_SAFE_INTEGER;for(const e of this.options){const i=e.price*(n.data.bet*(b.currentConfig.base_bet-b.currentConfig.bet_adding)/b.currentConfig.base_bet);i<this.minPrice&&(this.minPrice=i)}this.active&&this.canOpenPopup&&!n.data.game.flowLocked&&this.setActive(!1)}super.update()}initBuyFeatures(e){var i,s;const r=(s=(i=n.data.backendOptions)==null?void 0:i.feature_options)==null?void 0:s.disabled_features;if(r){n.data.disabledFeatures={};for(const a of r)n.data.disabledFeatures[a]=!0}(!e.buy_features||!e.buy_features.features.some(a=>!(r!=null&&r.includes(a.name))))&&this.remove()}onRemove(){super.onRemove(),this.ownerGame&&(this.ownerGame.offStepStart(this.onSlotStepStart,this),this.ownerGame.offGameInit(this.onSlotInit,this),this.ownerGame.offStepEnd(this.onSlotStepEnd,this),this.ownerGame=null)}}var Ll=Object.defineProperty,kl=(t,e,i)=>e in t?Ll(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ee=(t,e,i)=>kl(t,typeof e!="symbol"?e+"":e,i);class Hl{constructor(){ee(this,"target"),ee(this,"fieldName"),ee(this,"timeline"),ee(this,"pow",0),ee(this,"damper",0),ee(this,"time",0),ee(this,"currentFrame"),ee(this,"val"),ee(this,"targetVal"),ee(this,"speed",0)}init(e,i,s,r){this.target=e,this.fieldName=i.n,this.timeline=i.t,this.pow=s,this.damper=r,this.reset()}reset(){this.time=0,this.currentFrame=this.timeline[0],this.currentFrame.hasOwnProperty("r")&&(this.time-=(n.frameSeed^this.target._seed)%this.currentFrame.r),this.val=this.currentFrame.v,this.targetVal=this.val,this.speed=0,this.target[this.fieldName]=this.val}goto(e,i){if(this.time=e,this.currentFrame=i,i.m===1){let s=i.t-this.time;s>0?this.speed=(i.v-this.val)/s:this.speed=0}else i.m===2&&(this.speed=0)}update(){let e=this.currentFrame;if(this.time===e.t){let i;if(e.hasOwnProperty("a")&&(i=e.a),(e.m===1||e.m===2)&&(this.val=e.v),this.time=e.j,e.hasOwnProperty("r")&&(this.time-=(n.frameSeed^this.target._seed)%e.r),e.m===0&&(this.speed+=(e.v-this.val)*this.pow,this.val+=this.speed,this.speed*=this.damper),e.hasOwnProperty("s")&&(this.speed=e.s),this.currentFrame=e.n,e=e.n,e.m===1){let s=e.t-this.time;s>0?this.speed=(e.v-this.val)/s:this.speed=0}i&&Ne(i,this.target)}else e.m===0?(this.speed+=(e.v-this.val)*this.pow,this.val+=this.speed,this.speed*=this.damper):e.m===1?this.val+=this.speed:e.m===3?(this.speed+=e.g,this.val+=this.speed,this.val>=e.v&&(this.val=e.v,this.speed*=e.b)):e.m===4&&(this.speed-=e.g,this.val+=this.speed,this.val<=e.v&&(this.val=e.v,this.speed*=e.b));this.time++,this.target[this.fieldName]=this.val}}var ir=(t=>(t[t.SMOOTH=0]="SMOOTH",t[t.LINEAR=1]="LINEAR",t[t.DISCRETE=2]="DISCRETE",t[t.BOUNCE_BOTTOM=3]="BOUNCE_BOTTOM",t[t.BOUNCE_TOP=4]="BOUNCE_TOP",t))(ir||{}),Vl=Object.defineProperty,Gl=(t,e,i)=>e in t?Vl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,je=(t,e,i)=>Gl(t,typeof e!="symbol"?e+"":e,i);class Me extends js{constructor(){super(...arguments),je(this,"_seed",0),je(this,"fieldPlayers",[]),je(this,"_goToLabelNextFrame",!1),je(this,"isPlaying",!0),je(this,"delay",0),je(this,"_timelineData")}set timeline(e){if(this._goToLabelNextFrame=!1,this._disposePlayers(),e===null){this._timelineData=null;return}let i;fi.has(e)?i=fi.get(e):(i=Me._deserializeTimelineData(e),fi.set(e,i)),this._timelineData=i;let s=i.p,r=i.d,a=i.f;for(let o=0;o<a.length;o++){let l=ye.create(Hl);l.init(this,a[o],s,r),this.fieldPlayers.push(l)}}update(){if(this.isPlaying)if(this.delay>0)this.delay--;else{if(this._goToLabelNextFrame){let e=this._timelineData.l[this._goToLabelNextFrame];this._goToLabelNextFrame=!1;let i=this.fieldPlayers.length;for(let s=0;s<i;s++)this.fieldPlayers[s].goto(e.t,e.n[s])}for(let e of this.fieldPlayers)e.update()}super.update()}static _findNextKeyframe(e,i){let s;for(let r of e){if(r.t>i)return r;s=r}return s}static _deserializeTimelineData(e){let i=e.f.map(a=>{let o=a.t.map(l=>{let A=Object.assign({},l);return A.hasOwnProperty("j")||(A.j=A.t),A.hasOwnProperty("m")||(A.m=ir.SMOOTH),A});for(let l of o)l.n=Me._findNextKeyframe(o,l.j);return{n:a.n,t:o}}),s={};for(let a in e.l){let o=e.l[a],l=i.map(A=>Me._findNextKeyframe(A.t,o-1));s[a]={t:o,n:l,___name:a}}return{l:s,p:e.p,d:e.d,f:i}}_disposePlayers(){for(;this.fieldPlayers.length>0;)ye.dispose(this.fieldPlayers.pop())}resetTimeline(){for(let e of this.fieldPlayers)e.reset()}hasLabel(e){return this._timelineData.l.hasOwnProperty(e)}gotoLabel(e){this._goToLabelNextFrame=e,this.play()}gotoRandomLabel(){const e=arguments[Math.floor(Math.random()*arguments.length)];e&&this.gotoLabel(e)}gotoLabelIf(e,i,s){!He(i,this)!=!s&&this.gotoLabel(e)}play(){this.isPlaying=!0}stop(){this.isPlaying=!1}playRecursive(){this.isPlaying=!0;for(let e of this.findChildrenByType(Me))e.isPlaying=!0}stopRecursive(){this.isPlaying=!1;for(let e of this.findChildrenByType(Me))e.isPlaying=!1}gotoLabelRecursive(e){this.hasLabel(e)&&(this.delay=0,this.gotoLabel(e)),super.gotoLabelRecursive(e)}}let fi=new WeakMap;var Wl=Object.defineProperty,Ul=(t,e,i)=>e in t?Wl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,X=(t,e,i)=>Ul(t,typeof e!="symbol"?e+"":e,i);const pi=new Map,Bt=new Map;class ie extends Me{constructor(){super(...arguments),X(this,"locksFlow",!0),X(this,"flowLocked",0),X(this,"parentContainer",null),X(this,"__possibleNames"),X(this,"__usedPrefabName"),X(this,"scheduled",[]),X(this,"owner",null),X(this,"subFlows",[]),X(this,"relatedTo"),X(this,"isFirst",!1),X(this,"isLast",!1),X(this,"_isDollarPathContainer",!0),X(this,"killIfEmpty",!1)}get flowLocksCount(){return this.__locks.length}init(){if(this.killIfEmpty=!1,super.init(),this.parent){const e=this.findParentByType(ie);e&&this.setOwner(e)}n.data.isQuickSpin&&this.gotoLabelRecursive("quick-spin")}extractSoundId(e,i){if(!e)return i;const s=e+"###"+i;return pi.has(s)||pi.set(s,"snd/"+i.replace("snd/","").split("/").pop()+(i?"_":"")+e.split("/").pop().replace(/(\/|\-)/gm,"_")),pi.get(s)}findTopVisible(e,i=n.currentContainer){return Hi(i,e)}playSound(e){return this.name?this.playFirstSound(this.extractSoundId(this.name,e),e):this.playFirstSound(e)}playFirstSound(...e){const i=[e[0]];(n.data.isSkipped||n.data.isQuickSpin)&&e.unshift(i+"-quick-spin"),this.isLast&&e.unshift(i+"_last"),this.isFirst&&e.unshift(i+"_first");for(const s of e)if(ie.playLeveledSound(s))return!0}playRandomSound(...e){this.playSound(e[Math.floor(Math.random()*e.length)])}moveToFront(){this.parent.name==="slot/symbol-cell-container"?this.parent.parent.addChild(this.parent):this.parent.addChild(this)}static playLeveledSound(e){if(!Bt.has(e)){let s,r=1;for(;;){let a=r===1&&m.hasSound(e)?e:e+r;if(m.hasSound(a))s||(s=[]),s.push(a);else break;r++}Bt.set(e,{lastPlayTime:-100,sounds:s,current:0})}const i=Bt.get(e);if(i.sounds)return i.lastPlayTime<n.time&&(q.play(i.sounds[i.current],1,1,0,!0),i.current<i.sounds.length-1&&i.current++,i.lastPlayTime=n.time+2),!0}static resetLeveledSounds(){Bt.forEach(e=>{e.current=0,e.lastPlayTime=-100})}update(){if(this._isDollarPathContainer&&(n.$=this),this.flowLocked||this.launchNext(),this.killIfEmpty&&!this.flowLocked){this.remove();return}super.update()}launchNext(){for(;!this.flowLocked&&this.scheduled.length;)this.scheduled.shift()[0]()}lockFlow(e){var i;e?(this.flowLocked++,this.owner&&this.owner.lockFlow(e)):((i=this.owner)==null||i.lockFlow(this),this.locksFlow=!0)}unlockFlowIfLocked(){this.locksFlow&&this.unlockFlow()}unlockFlow(e){var i;e?(this.flowLocked--,this.flowLocked||this.launchNext(),this.owner&&this.owner.unlockFlow(e)):((i=this.owner)==null||i.unlockFlow(this),this.locksFlow=!1)}schedule(e,i){this.scheduled.push([i])}createAnimationIfExists(...e){for(const i of e)if(m.hasPrefab(i))return m.loadPrefab(i)}activateAnimation(e){e.setOwner(this),e.parent||this.addChild(e)}launchAnimationIfExists(...e){const i=this.createAnimationIfExists(...e);if(i)return this.activateAnimation(i),i}launchAnimationIfExistsCustomizable(...e){return this.launchAnimationIfExists(...e)}clearOwner(){var e;this.locksFlow&&n.all&&((e=this.owner)==null||e.unlockFlow(this),this.locksFlow=!1),this.owner&&(this.owner.subFlows.splice(this.owner.subFlows.indexOf(this),1),this.owner=null)}setOwner(e){this.owner=e,this.parentContainer&&He(this.parentContainer,this).addChild(this),e.subFlows.push(this),this.locksFlow&&e.lockFlow(this)}hasLabel(e){return this._timelineData&&super.hasLabel(e)}onRemove(){this.relatedTo=null,this.scheduled.length=0;let e=this.subFlows.length-1;for(;e>=0;)this.subFlows[e--].clearOwner();this.clearOwner(),this.flowLocked=0,super.onRemove()}static createFlow(e,i){const s=m._loadClassInstanceById("Flow");return s.name=i,e.addChild(s),s.setOwner(e),s.killIfEmpty=!0,s}showClickToContinue(e=240){n.data.game.waitForClickToContinue(e,this),this.schedule("hide free feature popup",()=>{this.gotoLabelRecursive("hide")})}}var Ql=Object.defineProperty,jl=(t,e,i)=>e in t?Ql(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Te=(t,e,i)=>jl(t,typeof e!="symbol"?e+"":e,i);const At=[];let Ct=!1;class U extends ie{constructor(){super(...arguments),Te(this,"onFinish"),Te(this,"noSkipableTime",1),Te(this,"canBeSkipped",!1),Te(this,"removeOnSkip",!1),Te(this,"skipLabel",null),Te(this,"keepLockedOnSkip",!1),Te(this,"skipOnQuickSpin",!0)}init(){this.canBeSkipped=!1,super.init(),At.push(this)}static skip(){if(Ct=!0,n.data.isSkipped=!0,At.length){const e=At.slice();for(const i of e)i.skipFlowIfCan()}}static isSkipped(){return Ct}static resetSkip(){n.data.isQuickSpin?(n.data.isSkipped=!0,Ct=!0):(n.data.isSkipped=!1,Ct=!1)}onFlowSkip(){this.disableSkip(),this.onFinish&&this.onFinish(),this.removeOnSkip&&this.remove()}skipFlow(){this.locksFlow&&!this.keepLockedOnSkip&&this.unlockFlow(),this.skipLabel&&this.gotoLabelRecursive(this.skipLabel),this.onFlowSkip()}skipFlowIfCan(){if(this.canBeSkipped)return this.skipFlow(),!0}disableSkip(){this.canBeSkipped=!1,this.noSkipableTime=-1}update(){if(this.locksFlow&&(this.noSkipableTime--,this.noSkipableTime===0&&(this.canBeSkipped=!0,U.isSkipped()&&this.skipOnQuickSpin))){this.skipFlow();return}super.update()}onRemove(){At.splice(At.indexOf(this),1),this.canBeSkipped=!1,super.onRemove()}}n.resetSkip=U.resetSkip;var Xl=Object.defineProperty,Yl=(t,e,i)=>e in t?Xl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Xe=(t,e,i)=>Yl(t,typeof e!="symbol"?e+"":e,i);const Hs=3;class Zl extends U{constructor(){super(),Xe(this,"targetPath"),Xe(this,"targetVal"),Xe(this,"currentDirtyValue",0),Xe(this,"step",0),Xe(this,"time",0),Xe(this,"onCountUpdate"),this.removeOnSkip=!0}static create(e,i,s,r,a=30,o=10,l,A){const h=m._loadClassInstanceById("FlowCounter");return e.addChild(h),h.setOwner(e),h.name=i,h.time=0,h.targetPath=s,h.targetVal=r,h.noSkipableTime=o,h.onCountUpdate=l,h.onFinish=A,h.currentDirtyValue=He(s,e)||0,h.step=(r-h.currentDirtyValue)/a*Hs,h}update(){if(this.time++,this.time>=Hs){this.time=0,this.currentDirtyValue+=this.step;const e=Math.round(this.currentDirtyValue*100)/100;if(this.onCountUpdate&&this.onCountUpdate(e),this.step<0?e<=this.targetVal:e>=this.targetVal){this.onFlowSkip();return}else Je(this.targetPath,e,this.owner)}super.update()}onFlowSkip(){Je(this.targetPath,this.targetVal,this.owner),super.onFlowSkip()}}var ql=Object.defineProperty,Jl=(t,e,i)=>e in t?ql(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,zl=(t,e,i)=>Jl(t,e+"",i);class Oe extends U{constructor(){super(),zl(this,"flowDelay",0),this.removeOnSkip=!0}static create(e,i,s,r=10,a){const o=m._loadClassInstanceById("FlowDelay");return e.addChild(o),o.setOwner(e),o.noSkipableTime=r,o.onFinish=a,o.flowDelay=s,o}update(){if(this.flowDelay--,this.flowDelay===0){this.onFlowSkip();return}super.update()}}var $l=Object.defineProperty,Kl=(t,e,i)=>e in t?$l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,re=(t,e,i)=>Kl(t,typeof e!="symbol"?e+"":e,i);class ht extends ie{constructor(){super(...arguments),re(this,"value",0),re(this,"xTo",0),re(this,"yTo",0),re(this,"arrangeStepX",0),re(this,"arrangeStepY",120),re(this,"gridColumns",0),re(this,"gridRows",0),re(this,"arrangeLimit",0),re(this,"valueType")}get valueOwner(){return n.data.game.getValueOwner(this)}setValue(e){this.value=e,this.gotoLabelRecursive("on-value"),this.gotoLabelRecursive("on-value-"+e)}setValueSilent(e){this.value=e}showQuick(){this.gotoLabelRecursive("show-quick")}onValueShown(){}hide(){delete n.data.game.gameValues[this.name],this.locksFlow||this.lockFlow(),this.gotoLabelRecursive("hide")}update(){this.xSpeed+=(this.xTo-this.x)*.1,this.ySpeed+=(this.yTo-this.y)*.1,this.xSpeed*=.8,this.ySpeed*=.8,super.update()}isEqual(e){return e==this.value}isBigger(e){return e<this.value}init(){super.init(),this.xTo=0,this.yTo=0,this.value=null}}const ut=t=>{if(n.all.hasOwnProperty(t))return n.all[t]};var eA=Object.defineProperty,tA=(t,e,i)=>e in t?eA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,p=(t,e,i)=>tA(t,typeof e!="symbol"?e+"":e,i),iA=(t,e,i)=>new Promise((s,r)=>{var a=A=>{try{l(i.next(A))}catch(h){r(h)}},o=A=>{try{l(i.throw(A))}catch(h){r(h)}},l=A=>A.done?s(A.value):Promise.resolve(A.value).then(a,o);l((i=i.apply(t,e)).next())});const mi="EVENT_STEP_START",gi="EVENT_STEP_END",vi="EVENT_DID_INIT",yi="EVENT_DID_MATH_CHANGE",bi="EVENT_DID_SPIN",_i="EVENT_WILL_SPIN_REQUEST",Si="EVENT_WILL_SPIN_START",sA="EVENT_SHOW_WIN_POPUP",wi="EVENT_AFTER_STANDARD_FEATURES",sr=6e4;let Vs=Date.now()-sr/2;const it=class k extends ie{constructor(){super(),p(this,"noWinSpinDelay",10),p(this,"winPopupFinalDelay",30),p(this,"lastSpinTime",0),p(this,"api"),p(this,"hasStoppingPopups",!0),p(this,"freeSpinsNoWinDelay",15),p(this,"_isSpinInProgressInner",!1),p(this,"isSpinInProgress",!1),p(this,"canChangeBet",!0),p(this,"spinButtonPressedTime",0),p(this,"isAnyFreeFeatureInfoLineVisible",!1),p(this,"freeFeaturesInfoLines",{}),p(this,"shownInfoPriority",Number.MIN_SAFE_INTEGER),p(this,"flyTextLayer"),p(this,"autoSpinsAnimator"),p(this,"bigWinLevel",20),p(this,"megaWinLevel",40),p(this,"superMegaWinLevel",80),p(this,"luxoriousWinLevel",Number.MAX_SAFE_INTEGER),p(this,"spinRequestFlow"),p(this,"musicStopCount",0),p(this,"options"),p(this,"gameValues"),p(this,"mainMusic"),p(this,"currentMusic"),p(this,"inactivityBGMusic"),p(this,"valuesContainer"),p(this,"ownerScene"),p(this,"screenShakers"),p(this,"userInactivityTime",600),p(this,"lastUserActivityTime",0),p(this,"isMusicStoppedForInactivity",!1),p(this,"freeRoundsIcon"),p(this,"totalWinFlyDelay",30),p(this,"hideCustomOption",!1),p(this,"spinButton"),p(this,"initialized",!1),p(this,"_isDollarPathContainer",!1),p(this,"currentBetsListBaseBet",""),p(this,"rulesButton"),p(this,"payTableButton"),p(this,"homeButton"),p(this,"infoButton"),p(this,"historyButton"),p(this,"_quickSpinCheckBoxSet",n.settings.getItem("quick-spin",!1)),p(this,"_spaceBarToSpinCheckBoxSet",!0),p(this,"disableQuickSpin",0),this.onSceneShow=this.onSceneShow.bind(this),(window.location.href.includes(n.projectDesc.devDomainURL)||window.location.href.includes("//localhost:"))&&ca()}init(){const e=new URLSearchParams(window.location.search);this.hideDebugUI=e.has("hideDebugUI"),this.ownerScene=n.currentScene,this.ownerScene.on("on-scene-show",this.onSceneShow),n.data.spinNumber=0,n.all.hasOwnProperty("free-rounds-icon")&&(this.freeRoundsIcon=n.all["free-rounds-icon"]),this.BaseServer=rn,this.currentBetsListBaseBet="",this.lastUserActivityTime=0,this.isMusicStoppedForInactivity=!1,n.projectDesc.shortBetName&&(n.all["bet-title"].translatableText="slot.popups.buy_bonus.bet"),n.data.freespinsLeft=0,n.data.isFreespinsActive=!1,n.data.game=this,n.data.autoSpinsLeft=0,n.data.betLocked=!1,this.freeFeaturesInfoLines={},this._isSpinInProgressInner=!0,this.isSpinInProgress=!0,this.canChangeBet=!1,this.spinButtonPressedTime=0,this.options=null,this.gameValues={},this.api=new he,this.api.initApi(i=>iA(this,null,function*(){this.onInitResponse(i)})),n.currentScene.findChildrenByType(Dl).length>1&&n.all["common-buy-features"].remove(),this.valuesContainer=this.findChildByName("game-values-layer"),this.currentMusic=void 0,n.all.hasOwnProperty("inactivity-music")&&(this.inactivityBGMusic=n.all["inactivity-music"]),this.autoSpinsAnimator=this.getRootContainer().findChildByName("auto-spins-animator"),this.flyTextLayer=this.findChildByName("fly-text-layer"),this.mainMusic=this.findChildByName("main-music"),this.musicStopCount=0,this.spinButton=n.currentScene.all["spin-button"],n.isMobile.any||(this.rulesButton=ut("rules-button"),this.payTableButton=ut("pay-table-button"),this.infoButton=ut("info-button"),this.homeButton=ut("home-button"),this.historyButton=ut("history-button")),super.init(),this.spaceBarToSpinCheckBoxSet=n.settings.getItem("space-to-spin",!0),this.screenShakers=n.currentScene.findChildrenByName("common/screen-shaker"),this.hideCustomOption||(n.data.customOption1Name=g.has(n.projectDesc.runtime_locales_prefix+".custom_option_1")&&g(n.projectDesc.runtime_locales_prefix+".custom_option_1"),n.data.customOption1Name&&(n.data.customOption1=n.settings.getItem("customOption1",n.projectDesc.customOption1Default)))}static get Configs(){return b}isSpinWithBonus(){return b.currentConfig.bet_adding}trackGameInit(){var e;H.track("game_initialized",(e=window.__OPTIONS__)==null?void 0:e.identifier)}set customOption1(e){n.settings.setItem("customOption1",e),n.data.customOption1=e}get customOption1(){return n.data.customOption1}isUpdateBalanceAllowed(){return this.parent&&!this.flowLocked}applyNewMathVariant(e){const i=e.options;this.options=i,this.options=i,n.data.options=i,this.refreshBetsList(),this.emit(yi),n.data.initData&&this.resetGameStateApply()}onInitResponse(e){var i,s,r,a;this.hasStoppingPopups=!!((i=e.options.features)!=null&&i.length),(s=window.__OPTIONS__)!=null&&s.ui.isAutoSpinAvailable||(this.spinButton.repeatInterval=this.spinButton.repeatDelay=0),n.data.minSpinTimeMs=((a=(r=window.__OPTIONS__)==null?void 0:r.license_rules)==null?void 0:a.min_spin_time)||0,k.defaultBetOverride&&!n.data.allBets.includes(k.defaultBetOverride)&&n.data.allBets.push(k.defaultBetOverride);let o=k.defaultBetOverride?k.defaultBetOverride:n.settings.getItem("bet",e.options.default_bet);k.defaultBetOverride=0,this.onSpinResult(e),this.playCurrentFeatureMusic(),this.refreshBetsList(),this.setBet(e.bet||o),this.initialized=!0,this.emit(vi,e),k.needShowIntro&&m.hasScene("intro")&&(n.showScene("intro"),k.needShowIntro=!1),k.showsAcceptPayTable&&!k.acceptPayTableShown&&(n.showScene("accept-pay-table"),k.acceptPayTableShown=!0)}static hideIntro(){n.closeCurrentScene(m.hasPrefab("fader/intro")?"fader/intro":void 0)}static get showsAcceptPayTable(){var e;return((e=window.__OPTIONS__)==null?void 0:e.show_paytable)&&m.hasScene("accept-pay-table")}setBet(e){var i;const s=n.data.bet;if(n.data.bet=e,n.all.hasOwnProperty("bets-container")){const r="bet-button-"+e,a=n.all["bets-container"];for(const o of a.scrollLayer.children)o.name===r?(a.scrollLayer.scrollTo(o),o.disable()):o.enable()}n.all.hasOwnProperty("bet-label")&&n.all["bet-label"].refreshNow(),n.settings.setItem("bet",e),ve.clickedButton&&(he.clearRestoringData(),H.track("bet_changed",{previousBet:s,currentBet:n.data.bet,buttonName:(i=ve.clickedButton)==null?void 0:i.name,source:ve.clickedButton.name},n.data.bet))}playAutoSpins(e){n.data.autoSpinsLeft=e||0,n.data.isInfinityAutoSpins=e<0,e?H.track("autospins_started",void 0,!1):H.track("autospins_stopped",void 0,!1)}onSceneShow(){n.data.options&&this.refreshBetsList()}static isIntroScene(){return n.currentScene.name==="intro"}refreshBetsList(){if(this.currentBetsListBaseBet===b.currentConfig.base_bet+":"+k.betsLimit)return;let e;n.data.options.available_bets?e=n.data.options.available_bets:e=[b.currentConfig.default_bet];let i=n.data.allBets?n.data.allBets.indexOf(n.data.bet):-1;n.data.allBets=e,n.data.maxBet=n.data.allBets[n.data.allBets.length-1],n.data.minBet=n.data.allBets[0];let s=n.data.bet;i=Math.min(i,e.length-1),i<0?n.data.bet=n.data.options.default_bet:n.data.bet=e[i],this.refreshBetsListUI(s!==n.data.bet)}refreshBetsListUI(e=!1){if(n.data.currency&&n.all.hasOwnProperty("bets-container")){this.currentBetsListBaseBet=b.currentConfig.base_bet+":"+k.betsLimit;const i=n.data.allBets.slice();i.reverse();let s=0;const r=n.all["bets-container"];for(;r.scrollLayer.children.length;)r.scrollLayer.children[0].removeWithoutHolder();n.data.maxBet=0;for(const o of i){if(k.betsLimit&&o>k.betsLimit)continue;n.data.maxBet=Math.max(n.data.maxBet,o),n.data.minBet=Math.min(n.data.minBet,o);const l=m.loadPrefab("common/bet-select-btn");l.y+=s,l.findChildByName("label").text=this.formatMoney(o),l.name="bet-button-"+o,l.onClickCallback=()=>{this.setBet(o),n.all["select-bet-trigger"].hide()},s+=82,r.scrollLayer.addChild(l)}const a=Math.min(82*8,s);r.contentHeigh=s,r.y=-a,r.H=a,r.isLayoutDirty=!0,e&&n.all["bet-shaker"].gotoLabelRecursive("shake-bet"),this.setBet(n.data.bet)}}__resetUser(){he.__resetUser()}spinClick(e){this.isSpinInProgress?this.skip():this.flowLocked||(n.data.isNextSpinFree||(n.data.autoSpinsLeft>0?(n.data.autoSpinsLeft--,n.data.autoSpinsLeft||H.track("autospins_stopped",void 0,!1)):n.data.doNotStopOnPopups=!1),this.spin(e)),n.data.isLastSpinIsAutoSpin=!1}skipClick(){(!ve.downedButton||!ve.downedButton.findParentByName("common/ui/ui")&&this.isSpinInProgress)&&this.skip()}skip(){U.skip()}getCurrentCharge(e){return e?this.api.currentClientSideDirectMath.featuresBuyByName[e].price*n.data.bet:n.data.bet}spinRequest(e={}){var i;this.lockFlow("spin-request");let s;this.spinRequestFlow.schedule("spin response handler",()=>{this.onSpinResult(s),this.spinRequestFlow=void 0,this.unlockFlow("spin-request")});const r=()=>{this.lastSpinTime=Date.now(),this.emit(_i,e),this.api.spinRequest(o=>{s=o,this.spinRequestFlow.unlockFlow("wait for spin response")},e)};if(n.data.balanceChargedForSpin=0,!n.data.isNextSpinFree&&!((i=this.freeRoundsIcon)!=null&&i.visible)&&!$i.isBonusRoundReplay){const o=this.getCurrentCharge(e==null?void 0:e.purchased_feature);this.setBalance(Math.max(0,n.data.balance-o)),n.data.balanceChargedForSpin=o,n.all["balance-label"].refreshNow()}const a=Math.round((n.data.minSpinTimeMs-(Date.now()-this.lastSpinTime))*60/1e3);a>0?be.delay(r,a):r()}spin(e){if(!this._isSpinInProgressInner){if(this.lastUserActivityTime=0,n.data.lastFSWin=0,n.data.spinNumber++,ie.resetLeveledSounds(),this.playFirstSound("snd/spin"),n.data.spinWin?this.showInfo(g("slot_last_win",{"%d":this.formatMoneyNoCurrency(n.data.spinWin),"%s":n.data.currency})):!n.data.isQuickSpin&&!n.data.hideQuickSpin&&Date.now()-Vs>sr?(this.showInfo(g("panel.hold_spin_for_quick_spins")),Vs=Date.now()):this.hideInfo(),n.data.spinWin=0,this.resetSkip(),this._isSpinInProgressInner=!0,this.isSpinInProgress=!0,this.canChangeBet=!1,this.emit(Si),n.currentScene.gotoLabelRecursive("on-spin"),n.data.spinData.end.freeFeatures)for(const i of n.data.spinData.end.freeFeatures)n.currentScene.gotoLabelRecursive("on-spin-"+i.name);for(const i in this.gameValues)i.startsWith("spins-count")&&this.gameValues[i].value++;n.data.isNextSpinFree&&(n.data.isNextSpinFree.spined++,this.freeFeaturesInfoLines[n.data.isNextSpinFree.name].spined++),this.spinRequestFlow=m._loadClassInstanceById("Flow"),this.spinRequestFlow.name="spinRequestFlow",this.spinRequestFlow.killIfEmpty=!0,this.addChild(this.spinRequestFlow),this.spinRequestFlow.lockFlow("wait for spin response"),this.schedule("reset game state",()=>{this.resetGameStateApply()}),this.schedule("spin request",()=>{this.spinRequest(e)})}}resetGameStateApply(){this.resetGameState()&&this.launchAnimationIfExistsCustomizable("common/reset-game-state-before-spin")}processFadeMusic(){var e,i;const s=this.lastUserActivityTime>=this.userInactivityTime&&!this.isAnyFreeFeatureInfoLineVisible;s&&!this.isMusicStoppedForInactivity?(this.isMusicStoppedForInactivity=!0,(e=this.mainMusic)==null||e.stop(4),this.inactivityBGMusic&&!this.musicStopCount&&this.inactivityBGMusic.play(4)):!s&&this.isMusicStoppedForInactivity&&(this.isMusicStoppedForInactivity=!1,this.musicStopCount||(i=this.mainMusic)==null||i.play(),this.inactivityBGMusic&&this.inactivityBGMusic.stop()),this.flowLocked||(this.lastUserActivityTime+=1)}update(){var e;n.$=this,this.processFadeMusic(),!this._isSpinInProgressInner&&this.isSpinInProgress&&(this.isSpinInProgress=!1),this.canChangeBet=!this.isSpinInProgress&&!n.data.isNextSpinFree&&!this.spinButtonPressedTime&&!n.data.betLocked,n.data.isQuickSpin=this.spinButtonPressedTime>30||this.quickSpinCheckBoxSet&&!this.disableQuickSpin&&!n.data.isFreespinsActive,this.isSpinInProgress||(n.data.isNextSpinFree||((e=window.__OPTIONS__)==null?void 0:e.ui.isAutoSpinAvailable)!==!1&&this.spinButtonPressedTime>30?this.spinClick():n.data.autoSpinsLeft&&(this.autoSpinsAnimator.gotoLabelRecursive("shake"),this.spinClick(),n.data.isLastSpinIsAutoSpin=!0,n.data.doNotStopOnPopups=n.data.doNotStopOnPopupsCheckBox)),this.api.replays.replayData&&(n.data.doNotStopOnPopups=!0),this.spinButton.isDowned?this.spinButtonPressedTime++:this.spinButtonPressedTime=0,super.update()}resetSkip(){U.resetSkip()}setBalance(e){n.data.balance=e,this.api.trackBalance()}onSpinResult(e){e.options||this.spinButton.gotoLabelRecursive("spin-can-skip"),n.data.isNextSpinFree=void 0,e.end.freeFeatures&&(n.data.isNextSpinFree=e.end.freeFeatures[e.end.freeFeatures.length-1]),nA(e,this.bigWinLevel),n.data.isQuickSpin&&this.skip(),n.data.spinWin=0,this._isSpinInProgressInner=!0,this.isSpinInProgress=!0,this.canChangeBet=!1;for(const i of e.steps)this._scheduleEventEmitting(mi,i,e),this.schedule("  willStepsGroupStart (method invoke)",()=>{this.willStepsGroupStart(i,e)}),this.schedule("",()=>{for(const s of i)this.stepStart(s,i,e)}),this.schedule("  didStepFinish (method invoke)",()=>{this.didStepsGroupFinish(i,e)}),this._scheduleEventEmitting(gi,i,e),i.showBigWin&&this.schedule("show late big-win popup.",()=>{i.showBigWin&&this.showWinPopup(this,i,e,!0)});!e.spinWin&&this.noWinSpinDelay&&this.schedule("No win spin delay",()=>{Oe.create(this,"No win spin delay",this.noWinSpinDelay)}),this.schedule("didSpinFinish virtual method invoke",()=>{this.didSpinFinish(e)}),this._scheduleEventEmitting(bi,e),this.schedule("final balance reveal",()=>{this.setBalance(e.balance),this.setBet(this.getClosestAvailableBet(n.data.bet))}),e.free_rounds&&this.schedule("bonus rounds handler",()=>{n.all["free-rounds-icon"].onSpinFinish(e)}),this._scheduleEventEmitting(wi,e),this.schedule("unlock ui",()=>{e.steps.length<2&&this.freeSpinsNoWinDelay&&n.data.isNextSpinFree?Oe.create(this,"freeSpinsNoWinDelay",this.freeSpinsNoWinDelay,this.freeSpinsNoWinDelay,()=>{this._isSpinInProgressInner=!1}):this._isSpinInProgressInner=!1,this.spinButton.gotoLabelRecursive("spin-finish")}),this.schedule("spin animation finish tracking",()=>{H.track("finish_spin_animations"),n.data.isNextSpinFree||H.track("finish_round_animations")})}_scheduleEventEmitting(e,...i){if(Object.prototype.hasOwnProperty.call(this._events,e)){const s=this._events[e];if(Array.isArray(s))for(const r of s)this.schedule("",()=>{const a=this._events[e];(a===r||Array.isArray(a)&&a.includes(r))&&(r.context?r.fn.apply(r.context,i):r.fn(...i))});else this.schedule("",()=>{const r=this._events[e];(r===s||Array.isArray(r)&&r.includes(s))&&(s.context?s.fn.apply(s.context,i):s.fn(...i))})}}getClosestAvailableBet(e){let i=Number.MAX_VALUE,s=n.data.allBets[0];for(const r of n.data.allBets){const a=Math.abs(e-r);a<i&&(i=a,s=r)}return s}stepStart(e,i,s){switch(e.type){case"canceled":break;case"trigger-feature":this.showTriggerFeaturePopup(e,i,s);break;case"trigger-feature-quick":this.goFreeFeatureQuick(e,i,s);break;case"reset-skip":this.resetSkip();break;case"feature-restore-popup":this.showRestoreFeaturePopup(e,i,s);break;case"retrigger-feature":this.showRetriggerFeaturePopup(e,i,s);break;case"restart-feature":this.showRestartFeaturePopup(e,i,s);break;case"finish-feature":this.showTotalWinFeaturePopup(e,i,s);break;case"show-value-quick":this.showGameValue(e,i,s,!0);break;case"show-value":this.showGameValue(e,i,s);break;case"hide-value":this.hideGameValue(e,i,s);break;case"hide-all-values":this.hideAllGameValues(e,i,s);break;case"show-message":this.showMessage(e,i,s);break;case"big-win-point":break;case"fly-value":this.flyValue(e,i,s);break;case"win-client-side":this.winClientSide(e,i,s);break;default:this.customStepStart(e,i,s)}}showWin(e,i,s,r=this){const a=ie.createFlow(r,"show win popup"),o=s.steps.find(l=>l.indexOf(e)>=0);o.winShown||(o.winShown=!0,a.schedule("show win popup",()=>{this.showWinPopup(a,o,s)}),a.schedule("win popup hidden",()=>{this.winPopupHidden(e,s)}),this.winPopupFinalDelay&&a.schedule("win popup final delay",()=>{Oe.create(a,"win popup final delay",this.winPopupFinalDelay,Math.min(5,this.winPopupFinalDelay))}))}winPopupHidden(e,i){}placeValueToScreen(e,i){return!1}showGameValue(e,i,s,r=!1){const a=e.value;let o;if(this.gameValues[a.name])o=this.gameValues[a.name],o.value!=a.value&&(o.value=a.value,o.gotoLabelRecursive("on-value"),o.gotoLabelRecursive("on-value-"+o.value));else{let l=a.name.split(":")[0];l==="symbol"&&(l="cell"),o=this.launchAnimationIfExists("common/value-"+l,"common/value-"+a.type,"common/value-number"),o.value=a.value,o.name=a.name,o.valueType=a.type,o.parentContainer||this.placeValueToScreen(a,o)||this.valuesContainer.addChild(o),this.arrangeGameValues(o.parent,r),o.x=o.xTo,o.y=o.yTo,r&&o.showQuick(),this.gameValues[a.name]=o,o.gotoLabelRecursive("on-value"),o.gotoLabelRecursive("on-value-"+o.value),r&&(o.gotoLabelRecursive("on-value-quick"),o.gotoLabelRecursive("on-value-"+o.value+"-quick"))}o.onValueShown()}get stepDataForResetState(){var e;return n.data.isNextSpinFree?n.data.spinData:(e=this.api.currentClientSideDirectMath)==null?void 0:e.spinData}resetGameState(){var e;let i=!1;const s=Object.values(this.gameValues),r=((e=this.stepDataForResetState)==null?void 0:e.end.values)||[];for(const a of s){const o=r.find(l=>l.name===a.name);o?o.value!=a.value&&(a.setValue(o.value),a.gotoLabelRecursive("state-reset-value"),a.gotoLabelRecursive("state-reset-value-"+o.value),i=!0):(a.hide(),a.gotoLabelRecursive("state-reset-hide"),i=!0)}for(const a of r)if(!r.some(o=>o.name===a.name)){const o={type:"show-value",value:a,customName:"state-reset"};this.showGameValue(o,[o],this.stepDataForResetState),i=!0}return i}getValueOwner(e){}hideAllGameValues(e,i,s){const r=Object.keys(this.gameValues);for(;r.length;){const a=r.pop();this.gameValues[a].hide()}}hideGameValue(e,i,s){const r=e.valueName;this.gameValues[r].hide()}showMessage(e,i,s){let r="common/message-"+e.textId,a="common/message";e.textId.startsWith("pause:")&&(a="common/pause",r="common/pause-"+r.substring(6)),n.data.messageData=e;const o=this.launchAnimationIfExists(r,a);if(o){U.resetSkip();const l=(n.projectDesc.l10nID||n.projectDesc.APIGameId).replace(/[A-Z]/g,A=>`_${A.toLowerCase()}`)+"."+e.textId;g.has(l)?o.name=g(l):g.has(e.textId)?o.name=g(e.textId):o.name=e.textId}}arrangeGameValues(e,i=!1){let s=0,r=0,a=0,o=0,l=0,A=0;for(const h of e.children)h instanceof ht&&(l=h.yTo=s,o=h.xTo=r,A=h.arrangeLimit,h.gridColumns?(r+=h.arrangeStepX,a++,a>=h.gridColumns&&(a=0,r=0,s+=h.arrangeStepY)):h.gridRows?(s+=h.arrangeStepY,a++,a>=h.gridRows&&(a=0,s=0,r+=h.arrangeStepX)):(s+=h.arrangeStepY,r+=h.arrangeStepX));if(A){if(o>A){const h=A/o;for(const u of e.children)u instanceof ht&&(u.xTo=Math.round(u.xTo*h))}if(l>A){const h=A/l;for(const u of e.children)u instanceof ht&&(u.yTo=Math.round(u.yTo*h))}}if(i)for(const h of e.children)h instanceof ht&&(h.x=h.xTo,h.y=h.yTo)}findAnimationRootContainer(e){return e.findParentByType(ht)||e.parent}getFlyContent(e,i,s){return e instanceof qi?e.text:m.loadPrefab("common/empty-fly")}_onFlyStart(e,i){}_onFlyEnd(e,i){}flyValue(e,i,s){const r=e.to,a=e.from,o=e.valueType||typeof a=="string"&&this.gameValues[a].valueType||void 0,l="fly value from "+e.from+" to "+r,A=ie.createFlow(this,l);let h=e.finalValue,u,d;const c=typeof a=="string"?a.startsWith("symbol:")?"cell":a:"symbol",f=r?typeof r=="string"?r.startsWith("symbol:")?"cell":r:"symbol":"total-win";let v=!1,y=!0,F=!0;e:for(const z of s.steps)for(const Q of z)if(e===Q)v=!0;else if(Q.type===e.type){const rr=typeof Q.from=="string"?Q.from.startsWith("symbol:")?"cell":Q.from:"symbol";if(c===rr){const ar=Q.to?typeof Q.to=="string"?Q.to.startsWith("symbol:")?"cell":Q.to:"symbol":"total-win";if(f===ar)if(v){F=!1;break e}else y=!1}}let x;r?r==="fs"?x="all.free-features-info-line.children.0.totalSpins":typeof r=="string"?x="all."+this.name+".gameValues."+r+".value":x="all."+this.name+".reels."+r[0]+".symbols."+r[1]+".value":(h=Math.min(h,this.api.currentClientSideDirectMath.winLimit),A.schedule("before total win fly value delay",()=>{J&&this.resetSkip(),this.totalWinFlyDelay&&Oe.create(A,"before total win fly value delay",this.totalWinFlyDelay,Math.min(5,this.totalWinFlyDelay))}),x="data.spinWin");const N=["common/fly-from-"+c+"-to-"+f,"common/fly-to-"+f,"common/fly"];o&&(N.unshift("common/fly-"+o),N.unshift("common/fly-"+o+"-to-"+f));const _=A.createAnimationIfExists(...N);_.isFirst=y,_.isLast=F;const J=_.resetsSkip||y&&_.resetsSkipFirst;y&&_.gotoLabelRecursive("first-fly"),F&&_.gotoLabelRecursive("last-fly");const $=_.parent;_.detachFromParent(),i.___spreadDelay||(i.___spreadDelay=0);let K=(_.delayBefore||0)+i.___spreadDelay;i.___spreadDelay+=_.spreadDelay||0;let de=_.delayAfter||0;n.data.isQuickSpin&&(K>10&&(K=10),de>10&&(de=10)),A.schedule("fly animation labels launch",()=>{d=this._getDestinationContainer(a,e);const z=this.findAnimationRootContainer(d);z.gotoLabelRecursive("fly-from"),o&&z.gotoLabelRecursive("fly-from-"+o),K&&(_.playSound("snd/before_takeoff"),J&&U.resetSkip(),Oe.create(A,"before fly delay",K,Math.min(3,K),J?U.resetSkip:void 0))}),A.schedule(l,()=>{u=this._getDestinationContainer(r,e);const z=this.findAnimationRootContainer(d);z.gotoLabelRecursive("fly-from-started"),o&&z.gotoLabelRecursive("fly-from-"+o+"-started");let Q=this.getFlyContent(d,u,r);$&&$.addChild(_),A.activateAnimation(_),_.initFlyFlow(l,Q,d,u),_.playSound("snd/takeoff"),this._onFlyStart(d,e)});let os;A.schedule("after fly (value counting)",()=>{if(typeof h=="number"&&_.countingTime){const Q=Zl.create(A,"after fly value counting",x,h,_.countingTime,3);os=h-Q.currentDirtyValue}else Je(x,h,this);const z=this.findAnimationRootContainer(u);z.gotoLabelRecursive("fly-end"),z.gotoLabelRecursive("fly-end-"+c),typeof h!="undefined"&&z.gotoLabelRecursive("fly-end-"+h),_.playSound("snd/landing"),this._onFlyEnd(u,e)}),r||(A.schedule("reveal fly value win",()=>{this.addWin(os,!0)}),A.schedule("before total win fly value delay",()=>{Oe.create(A,"after total win fly value delay",40,5)})),de&&A.schedule("after fly delay",()=>{J&&U.resetSkip(),Oe.create(A,"after fly delay",de,Math.min(3,de),J?U.resetSkip:void 0)})}waitForClickToContinue(e=60,i){if(!n.all["popups-layer"].getChildByName("common/wait-for-click")){U.resetSkip();let s;i?s=i.launchAnimationIfExists("common/wait-for-click"):s=this.launchAnimationIfExists("common/wait-for-click"),s.findChildByName("delay-movie-clip").delay=e}}onRulesShow(){}_getDestinationContainer(e,i){var s;return e==="fs"?n.all["free-features-info-line"].children[0].findChildByName("free-feature-count-label"):typeof e=="string"?Hi(this.gameValues[e],"label"):(s=n.data.spinData.start.freeFeatures)!=null&&s.length&&this.freeFeaturesInfoLines[n.data.spinData.start.freeFeatures[0].name]?Hi(this.freeFeaturesInfoLines[n.data.spinData.start.freeFeatures[0].name],"win-label"):n.all["win-label"]}showFreeFeaturePopup(e,i,s,r,a,o=0,l=!1){const A=ie.createFlow(this,"FreeFeaturesPopupFlow");this.resetSkip();const h=A.launchAnimationIfExists("common/popups/"+e.featureName+"-"+e.type+"-"+e.count,"common/popups/"+e.featureName+"-"+e.type,"common/popups/"+e.featureName,"common/popups/"+e.type,"common/popups/free-feature");h.stepData=e,h.isTrigger=e.type==="trigger-feature",h.isRetrigger=e.type==="retrigger-feature"||e.type==="restart-feature",h.isTotalWin=e.type==="finish-feature",h.isRestoring=e.type==="feature-restore-popup",h.gotoLabelRecursive(e.type),h.title=i,h.count=s,h.popupName=r,h.xBet=o||void 0,n.all["popups-layer"].addChild(h),l&&h.gotoLabelRecursive("limit-reached"),A.schedule("reset skip after FreeFeature popup",()=>{this.resetSkip(),a&&a()})}showTriggerFeaturePopup(e,i,s){n.data.isFreespinsActive||(n.data.freespinsLeft=e.count),this.showFreeFeaturePopup(e,"You have won",e.count,e.featureName,()=>{this.addFreeFeatureInfoLine(e)})}showRetriggerFeaturePopup(e,i,s){this.showFreeFeaturePopup(e,"You have won additional ",e.count,e.featureName,()=>{const r=this.freeFeaturesInfoLines[e.featureName];r.totalSpins+=e.count})}showRestartFeaturePopup(e,i,s){this.showFreeFeaturePopup(e,"Feature starts again",e.count,e.featureName,()=>{const r=this.freeFeaturesInfoLines[e.featureName];r.totalSpins=e.count,r.spined=0})}showTotalWinFeaturePopup(e,i,s){const r=b.winToQ(e.totalWin,s.bet);this.showFreeFeaturePopup(e,"You have won ",this.formatMoney(e.totalWin)," in "+e.featureName,()=>{this.removeFreeFeatureInfoLine(e)},Math.round(r),r>=this.options.limit)}goFreeFeatureQuick(e,i,s){this.addFreeFeatureInfoLine(e,!0)}showRestoreFeaturePopup(e,i,s){const r=e.count-e.spined,a=(e.featureName.includes("respin")?g("slot.popups.you-have-respins",r):g("slot.popups.you-have-freespins",r)).split(`
`);this.showFreeFeaturePopup(e,a[0],r,a[1])}addFreeFeatureInfoLine(e,i=!1){n.data.isFreespinsActive||(n.data.freespinsLeft=e.count-(e.spined||0)),this.hideInfo(),n.data.isFreespinsActive=!0;const s=m.hasPrefab("common/free-features-info-line-entry-"+e.featureName)?m.loadPrefab("common/free-features-info-line-entry-"+e.featureName):m.loadPrefab("common/free-features-info-line-entry");s.pivot.y=n.all["free-features-info-line"].children.length*50,n.all["free-features-info-line"].addChild(s),i&&s.gotoLabelRecursive("show-quick"),s.featureName=e.featureName,s.spined=e.spined||0,s.totalSpins=e.count,s.totalWin=e.totalWin,this.freeFeaturesInfoLines[e.featureName]=s,this.infoLineChanged(),i?n.currentScene.gotoLabelRecursive("go-"+s.featureName+"-quick"):(n.currentScene.gotoLabelRecursive("go-"+s.featureName),this.lockFlow("add free feature info line"),be.delay(()=>{this.unlockFlow("add free feature info line")},30)),this.playCurrentFeatureMusic()}get isInfoButtonsExpanded(){return!n.isMobile.any&&(this.rulesButton.isOvered||this.payTableButton.isOvered||this.infoButton.isOvered||this.homeButton.isOvered||this.historyButton.isOvered)}infoLineChanged(){}disableSpinButton(){this.spinButton.disable()}enableSpinButton(){this.spinButton.enable()}showHistory(){he.showHistory()}isHistoryAvailable(){var e;return typeof((e=window.__OPTIONS__)==null?void 0:e.history_url)=="string"}playCurrentFeatureMusic(){this.isAnyFreeFeatureInfoLineVisible=Object.keys(this.freeFeaturesInfoLines).some(s=>this.freeFeaturesInfoLines[s].visible);const e=n.all["free-features-info-line"].children;let i;for(let s=e.length-1;s>=0;s--){const r=this.freeFeaturesInfoLines[e[s].featureName];if(r&&r.visible){const a=e[s].featureName+"-music";if(n.all.hasOwnProperty(a)){i=n.all[a];break}}}i||(n.all.hasOwnProperty("freespins-music")&&(i=n.all["freespins-music"]),i=this.mainMusic),i&&this.currentMusic!==i&&(this.currentMusic&&this.currentMusic.stop(),this.currentMusic=i,i.play())}stopBgMusic(){this.musicStopCount++,this.currentMusic&&this.currentMusic.stop()}resumeBgMusic(){this.musicStopCount--,this.musicStopCount===0&&this.currentMusic&&this.currentMusic.play()}removeFreeFeatureInfoLine(e){const i=this.freeFeaturesInfoLines[e.featureName];i.gotoLabelRecursive("hide"),delete this.freeFeaturesInfoLines[e.featureName],this.infoLineChanged(),this.addWin(i.totalWin,!0),n.data.lastFSWin=i.totalWin,n.data.spinWin=0,this.showInfo(g("slot_last_win",{"%d":this.formatMoneyNoCurrency(i.totalWin),"%s":n.data.currency}),1),this.playCurrentFeatureMusic(),n.currentScene.gotoLabelRecursive("exit-"+i.featureName),n.data.isFreespinsActive=Object.keys(this.freeFeaturesInfoLines).length>0}findButtonForReplay(e,i){if(i)return e.find(s=>{var r;return((r=s.onClick)==null?void 0:r.find(a=>a.endsWith(".openBuyPopup")))||s instanceof n.classes.BuyFeaturePopupItem&&s.options.name===i})}formatMoney(e){return bo(e,n.data.currencySubUnits,n.data.currencyDigits,n.data.currency)}formatMoneyNoCurrency(e){return ln.formatMoney(e/n.data.currencySubUnits,n.data.currencyDigits)}isFreeFeatureActive(e){return this.freeFeaturesInfoLines[e]}showInfo(e,i=0){!Object.keys(this.freeFeaturesInfoLines).length&&this.shownInfoPriority<=i?(n.all["info-trigger"].show(),n.all["info-label"].text=e,this.shownInfoPriority=i):i>=0&&this.shownInfoPriority--}hideInfo(){n.all["info-trigger"].hide(),this.shownInfoPriority=Number.MIN_SAFE_INTEGER}winClientSide(e,i,s){}customStepStart(e,i,s){}didStepsGroupFinish(e,i){}spawnFlyText(e,i,s){const r=this.flyTextLayer.children.slice();for(;r.find(a=>{if(Math.abs(a.x-i)<a.width&&Math.abs(a.y-s)<a.height)return r.splice(r.indexOf(a),1),s=a.y+a.height,!0}););Ia.flyText(e,i,s,void 0,void 0,this.flyTextLayer)}showWinPopup(e,i,s,r=!1){const a=Math.round(b.winToQ(s.spinWin,n.data.bet)),o=i.showBigWin&&a>=this.bigWinLevel;o&&(delete i.showBigWin,n.currentScene.gotoLabelRecursive("big-win")),this.emit(sA,s),i.winShown=!0,e.launchAnimationIfExists(o?"common/popups/big-win-popup":"common/popups/win-popup").initWinPopup(i,s,this,r)}addWin(e,i=!1,s=!1){var r;const a=this.freeFeaturesInfoLines&&Object.values(this.freeFeaturesInfoLines);if(a.length){const o=a.pop();o.totalWin=Math.min(this.api.currentClientSideDirectMath.winLimit,o.totalWin+e)}else n.data.isNextSpinFree?n.data.isNextSpinFree.totalWin=Math.min(this.api.currentClientSideDirectMath.winLimit,n.data.isNextSpinFree.totalWin+e):s||((r=this.freeRoundsIcon)!=null&&r.visible?this.freeRoundsIcon.addWin(e):(n.data.balance+=e,this.api.trackBalance()));i||(n.data.spinWin+=e,n.data.spinWin=Math.min(n.data.spinWin,this.api.currentClientSideDirectMath.winLimit))}willStepsGroupStart(e,i){}didSpinFinish(e){}get canIncreaseBet(){return this.canChangeBet&&n.data.bet<n.data.maxBet}maximizeBet(){this.setBet(n.data.maxBet)}increaseBet(){this.setBet(n.data.allBets[n.data.allBets.indexOf(n.data.bet)+1])}get canDecreaseBet(){return this.canChangeBet&&n.data.bet>n.data.minBet}decreaseBet(){this.setBet(n.data.allBets[n.data.allBets.indexOf(n.data.bet)-1])}delayHoldSpinQuickSpin(e=100){U.resetSkip(),be.delay(()=>{n.data.isQuickSpin&&this.skip()},e,this),this.spinButton.curDelay=Math.max(this.spinButton.curDelay,e)}set spaceBarToSpinCheckBoxSet(e){n.settings.setItem("space-to-spin",e),this.getRootContainer().all["spin-button"].hotkey=e?32:0,this._spaceBarToSpinCheckBoxSet=e}get spaceBarToSpinCheckBoxSet(){return this._spaceBarToSpinCheckBoxSet}get quickSpinCheckBoxSet(){return this._quickSpinCheckBoxSet}set quickSpinCheckBoxSet(e){this._quickSpinCheckBoxSet=e,n.settings.setItem("quick-spin",e)}onRemove(){this.ownerScene.off("on-scene-show",this.onSceneShow),this.ownerScene=null,this.initialized=!1,this.spinButton=null,this.spinRequestFlow=null,this.rulesButton=null,this.payTableButton=null,this.homeButton=null,this.infoButton=null,this.historyButton=null,this.gameValues={},this.removeAllListeners(),super.onRemove()}shakeScreen(e="shake-screen-deep"){for(const i of this.screenShakers)i.gotoLabel(e)}unlockBet(){n.data.betLocked=!1}lockBet(e){n.data.betLocked=!0,isNaN(e)||this.setBet(e)}static get winOver(){return b.allOptions[0].limit}static hasIntro(){return!k.skipIntro&&m.hasScene("intro")}onMathChange(e,i){this.on(yi,e,i)}offMathChange(e,i){this.off(yi,e,i)}onStepStart(e,i){this.on(mi,e,i)}offStepStart(e,i){this.off(mi,e,i)}onStepEnd(e,i){this.on(gi,e,i)}offStepEnd(e,i){this.off(gi,e,i)}onGameInit(e,i){this.on(vi,e,i)}offGameInit(e,i){this.off(vi,e,i)}onDidSpinFinish(e,i){this.on(bi,e,i)}offDidSpinFinish(e,i){this.off(bi,e,i)}onWillSpinStart(e,i){this.on(Si,e,i)}offWillSpinStart(e,i){this.off(Si,e,i)}onWillSpinRequest(e,i){this.on(_i,e,i)}offWillSpinRequest(e,i){this.off(_i,e,i)}onDidStandardFeaturesShown(e,i){this.on(wi,e,i)}offDidStandardFeaturesShown(e,i){this.off(wi,e,i)}};p(it,"defaultBetOverride",0);p(it,"betsLimit",0);p(it,"needShowIntro",!1);p(it,"acceptPayTableShown",!1);p(it,"skipIntro",!1);let Tt=it;function nA(t,e){if(b.winToQ(t.spinWin,t.bet)>=e)for(let s=t.steps.length-1;s>=0;s--){const r=t.steps[s];if(r[0].type==="big-win-point"){r.showBigWin=!0;return}if(r.some(a=>a.type==="fly-value"&&!a.to)){r.showBigWin=!0;return}if(r.some(a=>a.win)){r.showBigWin=!0;return}if(r[0].type==="cascade-fall"){r.showBigWin=!0;return}}}const nr=t=>{delete t.p["style.fontFamily"];const e=t[":"];if(e)for(const i of e)nr(i)},Gs=t=>{if(t)for(let e in t)nr(t[e])};n.on("assets-will-add",t=>{var e,i;const s=(e=window.__OPTIONS__)==null?void 0:e.show_dump_based_round_info;let r=(i=window.__OPTIONS__)==null?void 0:i.locale;if(r){const a=["bg","de","en","es","it","nl","ru","sv","uk"];n.projectDesc.supportedLocales&&a.push(...n.projectDesc.supportedLocales),a.includes(r.substring(0,2))||(Gs(t.prefabs),Gs(t.scenes))}if(t.images&&(t.images=t.images.filter(a=>s?(m.addTexture(m.unHashFileName(a),qe.EMPTY),!1):n.isMobile.any?!/(^|\/)desktop\//.test(a):!/(^|\/)mobile\//.test(a))),s&&!t.projectDesc){const a=Object.keys(t);for(const o of a)delete t[o];t.images=[],t.sounds=[]}});window.addEventListener("message",t=>{if(!t.data)return;let e=t.data;if(typeof e=="string")try{e=JSON.parse(e)}catch(i){return}switch((e.name||e.Name||"").toLowerCase()){case"pause_gameplay":_e.pauseGame(!0);break;case"pause_safe_gameplay":_e.pauseGameSafe(!0,()=>{t.source.postMessage(e.callback||"game_paused",t.origin)});break;case"resume_gameplay":_e.resumeGame();break}},!1);H.addListener(t=>{switch(t){case"game_loaded":case"finish_round_animations":_e._onGameRoundAnimationsFinish();break}});let ae,ge;const _e={toggleGame(t=!1){ae?_e.resumeGame():_e.pauseGame(t)},skipIntro(){Tt.skipIntro=!0},playRound(t,e){var i;(i=n.data.game)==null||i.setBet(t*n.data.options.base_bet),e?n.data.game.spin({purchased_feature:e}):n.data.game.spin()},showError(t){var e,i;(i=(e=n.data.game)==null?void 0:e.api)==null||i.showError(0,t)},addRequestProxy(t){$s.addHook((e,i,s)=>{if(s!=null&&s.body)return t(e,s)})},pauseGame(t=!1){ae||(ae=n.showModal("common/ui/pause-popup",()=>{ae=void 0}),ae.alpha=t?0:1)},pauseGameSafe(t=!1,e=()=>{}){const i=ge||(()=>_e.pauseGame(t));ge=()=>{i(),e()},(ae||n.data.game&&!n.data.game.flowLocked)&&(ge(),ge=void 0)},resumeGame(){ae&&(n.hideModal(ae),ae=void 0),ge=void 0},stopAutospins(){n.classes.AutoSpinsPanel.instance&&n.classes.AutoSpinsPanel.instance.stopAutoSpins()},setAudioSfx(t){n.Sound.soundEnabled=t},setAudioMusic(t){n.Sound.musicEnabled=t},formatMoney(t){return n.classes.Label.formatMoney(t/n.data.currencySubUnits,n.data.currencyDigits)},formatMoneyToNumber(t){return t/n.data.currencySubUnits},_onGameRoundAnimationsFinish(){ge&&(ge(),ge=void 0)},setBetsLimit(t){var e;if(Tt.betsLimit=t,(e=n.data)!=null&&e.game&&n.data.game.refreshBetsList(),n.data.bet>t){const i=n.data.allBets.filter(s=>s<=t);n.data.game.setBet(i[i.length-1])}},setBet(t){var e,i;(i=(e=n.data)==null?void 0:e.game)!=null&&i.setBet&&!n.data.game.flowLocked?(n.data.allBets.includes(t)||n.data.allBets.push(t),n.data.game.setBet(t)):Tt.defaultBetOverride=t},game:n};n.globalEventDispatcher={on:()=>{}};n.L=g;const rA=`html {
	height: 100%;
	margin:0;
	padding:0;
}

body {
	background:#000000;
	color: #ffffff;
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	margin: 0;
	padding: 0;
	overflow: visible;
	width: 100%;
	height: 100vh;
	user-select: none;
}

canvas {
	position: fixed;
}

.preloader{
	display: none;
}
`;console.log("build: 2025-09-01 14:37");console.log("utils-2: v1.1.8");window.__OPTIONS__&&An();const aA=()=>{var t,e,i;window.__OPTIONS__&&(n.on("preloader-scene-will-start",()=>{/ja|zh$/.test(window.__OPTIONS__.locale)&&n.classes.MultilineText&&(n.classes.MultilineText.FORCE_WORDS_BREAK=!0)}),m.ASSETS_ROOT=window.__OPTIONS__.resources_path+"/assets/");let s=(t=window.__OPTIONS__)==null?void 0:t.show_dump_based_round_info;const r=s?document.createElement("div"):void 0;s||n.applyCSS(rA),s&&Ye.projectDesc.APIGameId!=="Aviamasters"&&!Ye.projectDesc.noReplayRoundView?($i.setDataByRoundView(Ye.projectDesc),window.__OPTIONS__.show_dump_based_round_info=void 0,s=void 0,r&&(r.style.width="800px",r.style.height="450px",r.style.maxWidth="90vw",document.body.querySelector(".bet-dump-based-result").appendChild(r))):r&&(r.style.opacity="0",r.style.width="2px",r.style.height="2px",document.body.appendChild(r)),H.track("start_loading",void 0,_e),n.init(r,Ye.projectDesc.id+(Ye.projectDesc.disablecachePlayerId?"":((e=window.__OPTIONS__)==null?void 0:e.cache_player_id)||""));const a=s?s.locale:window.__OPTIONS__?window.__OPTIONS__.locale:"en",o=n.projectDesc.l10nID||((i=window.__OPTIONS__)!=null&&i.identifier?window.__OPTIONS__.identifier:n.projectDesc.APIGameId);if(!n.projectDesc.embedLocales){n.loadingAdd("l10n-thing-utils");const A=n.projectDesc.l10nURL+o+"/"+a+".json";fetch(A).then(h=>h.json()).then(h=>{g.setLanguagesAssets({[a]:g._deserializeLanguage(h)}),g.setCurrentLanguage(a),n.loadingRemove("l10n-thing-utils")}).catch(()=>{n.showLoadingError(A)})}};(()=>{const t="https://8dbd2f2420f041b2b48892d8d82216e2@sentry.bgaming-system.com/60";if(window.__OPTIONS__){const e=window.BSentry;e&&(e.init({environment:window.__OPTIONS__.env,dsn:t,release:"1.0",ignoreErrors:[],tracesSampleRate:1,attachStacktrace:!0,denyUrls:[/moz-extension:/,/chrome-extension:/,/edge-extension:/]}),window.user_id&&e.setUser({id:window.user_id}))}})();aA();window.GAME_GROUP="casual";export{he as A,ve as B,b as C,js as D,ts as E,U as F,ht as G,tt as H,uA as I,is as J,AA as K,m as L,Me as M,$i as R,q as S,mt as _,He as a,g as b,Ne as c,Je as d,vr as e,Tt as f,n as g,_e as h,bo as i,be as j,Ia as k,Hi as l,Ut as m,Ua as n,Ya as o,oa as p,ie as q,lo as r,za as s,H as t,Oe as u,Zl as v,_s as w,Dl as x,ln as y,hA as z};
